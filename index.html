<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <meta http-equiv="Content-Style-Type" content="text/css">
  <title></title>
  <meta name="Generator" content="Cocoa HTML Writer">
  <meta name="CocoaVersion" content="2575.6">
  <style type="text/css">
    p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Menlo; color: #4689cc; -webkit-text-stroke: #4689cc}
    p.p2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Menlo; color: #8cd3fe; -webkit-text-stroke: #8cd3fe}
    p.p3 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Menlo; color: #c27e65; -webkit-text-stroke: #c27e65}
    p.p4 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Menlo; color: #cacaca; -webkit-text-stroke: #cacaca}
    p.p5 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Menlo; color: #6d7378; -webkit-text-stroke: #6d7378}
    p.p6 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Menlo; color: #cacaca; -webkit-text-stroke: #cacaca; min-height: 16.0px}
    p.p7 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Menlo; color: #71c083; -webkit-text-stroke: #71c083}
    span.s1 {font-kerning: none; background-color: #171818}
    span.s2 {font-kerning: none; color: #8cd3fe; background-color: #171818; -webkit-text-stroke: 0px #8cd3fe}
    span.s3 {font-kerning: none; color: #6d6d6d; background-color: #171818; -webkit-text-stroke: 0px #6d6d6d}
    span.s4 {font-kerning: none; color: #cacaca; background-color: #171818; -webkit-text-stroke: 0px #cacaca}
    span.s5 {font-kerning: none; color: #c27e65; background-color: #171818; -webkit-text-stroke: 0px #c27e65}
    span.s6 {font-kerning: none; color: #4689cc; background-color: #171818; -webkit-text-stroke: 0px #4689cc}
    span.s7 {font-kerning: none; color: #d4d4d4; background-color: #171818; -webkit-text-stroke: 0px #d4d4d4}
    span.s8 {font-kerning: none; color: #71c083; background-color: #171818; -webkit-text-stroke: 0px #71c083}
    span.s9 {font-kerning: none}
    span.s10 {font-kerning: none; color: #6d7378; background-color: #171818; -webkit-text-stroke: 0px #6d7378}
    span.s11 {font-kerning: none; color: #a7c598; background-color: #171818; -webkit-text-stroke: 0px #a7c598}
    span.s12 {font-kerning: none; color: #b76ff7; background-color: #171818; -webkit-text-stroke: 0px #b76ff7}
    span.s13 {font-kerning: none; color: #36c0a0; background-color: #171818; -webkit-text-stroke: 0px #36c0a0}
    span.s14 {font-kerning: none; color: #f67c30; background-color: #171818; -webkit-text-stroke: 0px #f67c30}
    span.s15 {font-kerning: none; color: #a34f83; background-color: #171818; -webkit-text-stroke: 0px #a34f83}
  </style>
</head>
<body>
<p class="p1"><span class="s1">&lt;!DOCTYPE</span><span class="s2"> html</span><span class="s1">&gt;</span></p>
<p class="p1"><span class="s3">&lt;</span><span class="s1">html</span><span class="s4"> </span><span class="s2">lang</span><span class="s3">=</span><span class="s5">"en"</span><span class="s3">&gt;</span></p>
<p class="p1"><span class="s3">&lt;</span><span class="s1">head</span><span class="s3">&gt;</span></p>
<p class="p2"><span class="s4"><span class="Apple-converted-space">    </span></span><span class="s3">&lt;</span><span class="s6">meta</span><span class="s4"> </span><span class="s1">charset</span><span class="s3">=</span><span class="s5">"UTF-8"</span><span class="s3">&gt;</span></p>
<p class="p3"><span class="s4"><span class="Apple-converted-space">    </span></span><span class="s3">&lt;</span><span class="s6">meta</span><span class="s4"> </span><span class="s2">name</span><span class="s3">=</span><span class="s1">"viewport"</span><span class="s4"> </span><span class="s2">content</span><span class="s3">=</span><span class="s1">"width=device-width, initial-scale=1.0"</span><span class="s3">&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">    </span></span><span class="s3">&lt;</span><span class="s6">title</span><span class="s3">&gt;</span><span class="s1">Triathlon Training Tracker</span><span class="s3">&lt;/</span><span class="s6">title</span><span class="s3">&gt;</span></p>
<p class="p5"><span class="s4"><span class="Apple-converted-space">    </span></span><span class="s1">&lt;!-- Tailwind CSS CDN for styling --&gt;</span></p>
<p class="p3"><span class="s4"><span class="Apple-converted-space">    </span></span><span class="s3">&lt;</span><span class="s6">script</span><span class="s4"> </span><span class="s2">src</span><span class="s3">=</span><span class="s1">"https://cdn.tailwindcss.com"</span><span class="s3">&gt;&lt;/</span><span class="s6">script</span><span class="s3">&gt;</span></p>
<p class="p5"><span class="s4"><span class="Apple-converted-space">    </span></span><span class="s1">&lt;!-- Inter font from Google Fonts --&gt;</span></p>
<p class="p3"><span class="s4"><span class="Apple-converted-space">    </span></span><span class="s3">&lt;</span><span class="s6">link</span><span class="s4"> </span><span class="s2">href</span><span class="s3">=</span><span class="s1">"https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&amp;display=swap"</span><span class="s4"> </span><span class="s2">rel</span><span class="s3">=</span><span class="s1">"stylesheet"</span><span class="s3">&gt;</span></p>
<p class="p1"><span class="s4"><span class="Apple-converted-space">    </span></span><span class="s3">&lt;</span><span class="s1">style</span><span class="s3">&gt;</span></p>
<p class="p5"><span class="s4"><span class="Apple-converted-space">        </span></span><span class="s1">/* Apply Inter font to the entire body */</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s6">body</span><span class="s1"> </span><span class="s7">{</span><span class="s1"> </span><span class="s2">font-family:</span><span class="s1"> </span><span class="s8">'Inter'</span><span class="s7">,</span><span class="s1"> </span><span class="s5">sans-serif</span><span class="s7">;</span><span class="s1"> </span><span class="s7">}</span></p>
<p class="p6"><span class="s9"></span><br></p>
<p class="p5"><span class="s4"><span class="Apple-converted-space">        </span></span><span class="s1">/* Custom colors for sports to make visual tracking bold and clear */</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s6">.sport-swim</span><span class="s1"> </span><span class="s7">{</span><span class="s1"> </span><span class="s2">background-color:</span><span class="s1"> #e0f2fe</span><span class="s7">;</span><span class="s1"> </span><span class="s2">color:</span><span class="s1"> #0284c7</span><span class="s7">;</span><span class="s1"> </span><span class="s7">}</span><span class="s1"> </span><span class="s10">/* Light Blue */</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s6">.sport-bike</span><span class="s1"> </span><span class="s7">{</span><span class="s1"> </span><span class="s2">background-color:</span><span class="s1"> #fef9c3</span><span class="s7">;</span><span class="s1"> </span><span class="s2">color:</span><span class="s1"> #ca8a04</span><span class="s7">;</span><span class="s1"> </span><span class="s7">}</span><span class="s1"> </span><span class="s10">/* Light Yellow */</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s6">.sport-run</span><span class="s1"> </span><span class="s7">{</span><span class="s1"> </span><span class="s2">background-color:</span><span class="s1"> #fecaca</span><span class="s7">;</span><span class="s1"> </span><span class="s2">color:</span><span class="s1"> #dc2626</span><span class="s7">;</span><span class="s1"> </span><span class="s7">}</span><span class="s1"> </span><span class="s10">/* Light Red */</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s6">.sport-strength</span><span class="s7">,</span><span class="s1"> </span><span class="s6">.sport-core</span><span class="s1"> </span><span class="s7">{</span><span class="s1"> </span><span class="s2">background-color:</span><span class="s1"> #e0e7ff</span><span class="s7">;</span><span class="s1"> </span><span class="s2">color:</span><span class="s1"> #4338ca</span><span class="s7">;</span><span class="s1"> </span><span class="s7">}</span><span class="s1"> </span><span class="s10">/* Light Indigo */</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s6">.sport-recovery</span><span class="s7">,</span><span class="s1"> </span><span class="s6">.sport-rest</span><span class="s1"> </span><span class="s7">{</span><span class="s1"> </span><span class="s2">background-color:</span><span class="s1"> #e5e7eb</span><span class="s7">;</span><span class="s1"> </span><span class="s2">color:</span><span class="s1"> #4b5563</span><span class="s7">;</span><span class="s1"> </span><span class="s7">}</span><span class="s1"> </span><span class="s10">/* Light Gray */</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s6">.sport-brick</span><span class="s1"> </span><span class="s7">{</span><span class="s1"> </span><span class="s2">background-color:</span><span class="s1"> #dcfce7</span><span class="s7">;</span><span class="s1"> </span><span class="s2">color:</span><span class="s1"> #16a34a</span><span class="s7">;</span><span class="s1"> </span><span class="s7">}</span><span class="s1"> </span><span class="s10">/* Light Green */</span></p>
<p class="p5"><span class="s4"><span class="Apple-converted-space">        </span></span><span class="s6">.sport-triathlon</span><span class="s7">,</span><span class="s4"> </span><span class="s6">.sport-race-day</span><span class="s4"> </span><span class="s7">{</span><span class="s4"> </span><span class="s2">background-color:</span><span class="s4"> #ffe4e6</span><span class="s7">;</span><span class="s4"> </span><span class="s2">color:</span><span class="s4"> #db2777</span><span class="s7">;</span><span class="s4"> </span><span class="s7">}</span><span class="s4"> </span><span class="s1">/* Light Pink/Rose for Race related */</span></p>
<p class="p6"><span class="s9"></span><br></p>
<p class="p5"><span class="s4"><span class="Apple-converted-space">        </span></span><span class="s1">/* Styles for the status messages (success/error/info) */</span></p>
<p class="p1"><span class="s4"><span class="Apple-converted-space">        </span></span><span class="s1">#status-message</span><span class="s4"> </span><span class="s7">{</span></p>
<p class="p3"><span class="s4"><span class="Apple-converted-space">            </span></span><span class="s2">transition:</span><span class="s4"> </span><span class="s1">opacity</span><span class="s4"> </span><span class="s11">0.3s</span><span class="s4"> </span><span class="s1">ease-in-out</span><span class="s7">;</span></p>
<p class="p5"><span class="s4"><span class="Apple-converted-space">            </span></span><span class="s2">pointer-events:</span><span class="s4"> </span><span class="s5">none</span><span class="s7">;</span><span class="s4"> </span><span class="s1">/* Allows clicks to pass through */</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s7">}</span></p>
<p class="p1"><span class="s4"><span class="Apple-converted-space">    </span></span><span class="s3">&lt;/</span><span class="s1">style</span><span class="s3">&gt;</span></p>
<p class="p1"><span class="s3">&lt;/</span><span class="s1">head</span><span class="s3">&gt;</span></p>
<p class="p3"><span class="s3">&lt;</span><span class="s6">body</span><span class="s4"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"bg-gray-100 min-h-screen flex flex-col items-center p-4"</span><span class="s3">&gt;</span></p>
<p class="p5"><span class="s4"><span class="Apple-converted-space">    </span></span><span class="s1">&lt;!-- Main Application Container --&gt;</span></p>
<p class="p3"><span class="s4"><span class="Apple-converted-space">    </span></span><span class="s3">&lt;</span><span class="s6">div</span><span class="s4"> </span><span class="s2">id</span><span class="s3">=</span><span class="s1">"app"</span><span class="s4"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"w-full max-w-md bg-white rounded-xl shadow-lg p-6"</span><span class="s3">&gt;</span></p>
<p class="p5"><span class="s4"><span class="Apple-converted-space">        </span></span><span class="s1">&lt;!-- Loading Indicator - shown while Firebase initializes and data loads --&gt;</span></p>
<p class="p3"><span class="s4"><span class="Apple-converted-space">        </span></span><span class="s3">&lt;</span><span class="s6">div</span><span class="s4"> </span><span class="s2">id</span><span class="s3">=</span><span class="s1">"loading"</span><span class="s4"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"text-center py-8"</span><span class="s3">&gt;</span></p>
<p class="p3"><span class="s4"><span class="Apple-converted-space">            </span></span><span class="s3">&lt;</span><span class="s6">div</span><span class="s4"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"animate-spin rounded-full h-12 w-12 border-b-2 border-gray-900 mx-auto"</span><span class="s3">&gt;&lt;/</span><span class="s6">div</span><span class="s3">&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s3">&lt;</span><span class="s6">p</span><span class="s1"> </span><span class="s2">class</span><span class="s3">=</span><span class="s5">"mt-4 text-gray-600"</span><span class="s3">&gt;</span><span class="s1">Loading training data...</span><span class="s3">&lt;/</span><span class="s6">p</span><span class="s3">&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s3">&lt;/</span><span class="s6">div</span><span class="s3">&gt;</span></p>
<p class="p6"><span class="s9"></span><br></p>
<p class="p5"><span class="s4"><span class="Apple-converted-space">        </span></span><span class="s1">&lt;!-- Main Application Content - hidden until data is loaded --&gt;</span></p>
<p class="p3"><span class="s4"><span class="Apple-converted-space">        </span></span><span class="s3">&lt;</span><span class="s6">div</span><span class="s4"> </span><span class="s2">id</span><span class="s3">=</span><span class="s1">"content"</span><span class="s4"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"hidden"</span><span class="s3">&gt;</span></p>
<p class="p5"><span class="s4"><span class="Apple-converted-space">            </span></span><span class="s1">&lt;!-- Header Section --&gt;</span></p>
<p class="p3"><span class="s4"><span class="Apple-converted-space">            </span></span><span class="s3">&lt;</span><span class="s6">h1</span><span class="s4"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"text-2xl font-bold text-gray-800 text-center mb-4"</span><span class="s3">&gt;</span><span class="s4">Triathlon Training</span><span class="s3">&lt;/</span><span class="s6">h1</span><span class="s3">&gt;</span></p>
<p class="p3"><span class="s4"><span class="Apple-converted-space">            </span></span><span class="s3">&lt;</span><span class="s6">div</span><span class="s4"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"flex justify-between items-center mb-6 border-b pb-4 border-gray-200"</span><span class="s3">&gt;</span></p>
<p class="p5"><span class="s4"><span class="Apple-converted-space">                </span></span><span class="s1">&lt;!-- Race Day Countdown --&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s3">&lt;</span><span class="s6">div</span><span class="s1"> </span><span class="s2">class</span><span class="s3">=</span><span class="s5">"text-center"</span><span class="s3">&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                    </span></span><span class="s3">&lt;</span><span class="s6">p</span><span class="s1"> </span><span class="s2">class</span><span class="s3">=</span><span class="s5">"text-sm text-gray-600"</span><span class="s3">&gt;</span><span class="s1">Race Day:</span><span class="s3">&lt;/</span><span class="s6">p</span><span class="s3">&gt;</span></p>
<p class="p3"><span class="s4"><span class="Apple-converted-space">                    </span></span><span class="s3">&lt;</span><span class="s6">p</span><span class="s4"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"text-lg font-semibold text-gray-800"</span><span class="s4"> </span><span class="s2">id</span><span class="s3">=</span><span class="s1">"race-day-countdown"</span><span class="s3">&gt;&lt;/</span><span class="s6">p</span><span class="s3">&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s3">&lt;/</span><span class="s6">div</span><span class="s3">&gt;</span></p>
<p class="p5"><span class="s4"><span class="Apple-converted-space">                </span></span><span class="s1">&lt;!-- Current Training Week Display --&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s3">&lt;</span><span class="s6">div</span><span class="s1"> </span><span class="s2">class</span><span class="s3">=</span><span class="s5">"text-center"</span><span class="s3">&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                    </span></span><span class="s3">&lt;</span><span class="s6">p</span><span class="s1"> </span><span class="s2">class</span><span class="s3">=</span><span class="s5">"text-sm text-gray-600"</span><span class="s3">&gt;</span><span class="s1">Current Week:</span><span class="s3">&lt;/</span><span class="s6">p</span><span class="s3">&gt;</span></p>
<p class="p3"><span class="s4"><span class="Apple-converted-space">                    </span></span><span class="s3">&lt;</span><span class="s6">p</span><span class="s4"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"text-lg font-semibold text-gray-800"</span><span class="s4"> </span><span class="s2">id</span><span class="s3">=</span><span class="s1">"current-week-display"</span><span class="s3">&gt;&lt;/</span><span class="s6">p</span><span class="s3">&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s3">&lt;/</span><span class="s6">div</span><span class="s3">&gt;</span></p>
<p class="p5"><span class="s4"><span class="Apple-converted-space">                </span></span><span class="s1">&lt;!-- User ID Display (for multi-user tracking and debugging) --&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s3">&lt;</span><span class="s6">div</span><span class="s1"> </span><span class="s2">class</span><span class="s3">=</span><span class="s5">"text-center"</span><span class="s3">&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                    </span></span><span class="s3">&lt;</span><span class="s6">p</span><span class="s1"> </span><span class="s2">class</span><span class="s3">=</span><span class="s5">"text-sm text-gray-600"</span><span class="s3">&gt;</span><span class="s1">User ID:</span><span class="s3">&lt;/</span><span class="s6">p</span><span class="s3">&gt;</span></p>
<p class="p3"><span class="s4"><span class="Apple-converted-space">                    </span></span><span class="s3">&lt;</span><span class="s6">p</span><span class="s4"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"text-xs font-semibold text-gray-500 truncate"</span><span class="s4"> </span><span class="s2">id</span><span class="s3">=</span><span class="s1">"user-id-display"</span><span class="s3">&gt;&lt;/</span><span class="s6">p</span><span class="s3">&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s3">&lt;/</span><span class="s6">div</span><span class="s3">&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s3">&lt;/</span><span class="s6">div</span><span class="s3">&gt;</span></p>
<p class="p6"><span class="s9"></span><br></p>
<p class="p5"><span class="s4"><span class="Apple-converted-space">            </span></span><span class="s1">&lt;!-- Weekly Navigation Buttons --&gt;</span></p>
<p class="p3"><span class="s4"><span class="Apple-converted-space">            </span></span><span class="s3">&lt;</span><span class="s6">div</span><span class="s4"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"flex justify-between items-center mb-6"</span><span class="s3">&gt;</span></p>
<p class="p3"><span class="s4"><span class="Apple-converted-space">                </span></span><span class="s3">&lt;</span><span class="s6">button</span><span class="s4"> </span><span class="s2">id</span><span class="s3">=</span><span class="s1">"prev-week-btn"</span><span class="s4"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"p-2 rounded-full bg-blue-500 text-white shadow hover:bg-blue-600 transition-colors"</span><span class="s3">&gt;</span></p>
<p class="p5"><span class="s4"><span class="Apple-converted-space">                    </span></span><span class="s1">&lt;!-- Left Arrow SVG Icon --&gt;</span></p>
<p class="p3"><span class="s4"><span class="Apple-converted-space">                    </span></span><span class="s3">&lt;</span><span class="s6">svg</span><span class="s4"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"w-6 h-6"</span><span class="s4"> </span><span class="s2">fill</span><span class="s3">=</span><span class="s1">"none"</span><span class="s4"> </span><span class="s2">stroke</span><span class="s3">=</span><span class="s1">"currentColor"</span><span class="s4"> </span><span class="s2">viewBox</span><span class="s3">=</span><span class="s1">"0 0 24 24"</span><span class="s4"> </span><span class="s2">xmlns</span><span class="s3">=</span><span class="s1">"http://www.w3.org/2000/svg"</span><span class="s3">&gt;&lt;</span><span class="s6">path</span><span class="s4"> </span><span class="s2">stroke-linecap</span><span class="s3">=</span><span class="s1">"round"</span><span class="s4"> </span><span class="s2">stroke-linejoin</span><span class="s3">=</span><span class="s1">"round"</span><span class="s4"> </span><span class="s2">stroke-width</span><span class="s3">=</span><span class="s1">"2"</span><span class="s4"> </span><span class="s2">d</span><span class="s3">=</span><span class="s1">"M15 19l-7-7 7-7"</span><span class="s3">&gt;&lt;/</span><span class="s6">path</span><span class="s3">&gt;&lt;/</span><span class="s6">svg</span><span class="s3">&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s3">&lt;/</span><span class="s6">button</span><span class="s3">&gt;</span></p>
<p class="p3"><span class="s4"><span class="Apple-converted-space">                </span></span><span class="s3">&lt;</span><span class="s6">span</span><span class="s4"> </span><span class="s2">id</span><span class="s3">=</span><span class="s1">"week-display"</span><span class="s4"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"text-xl font-bold text-gray-800"</span><span class="s3">&gt;</span><span class="s4">Week 1</span><span class="s3">&lt;/</span><span class="s6">span</span><span class="s3">&gt;</span></p>
<p class="p3"><span class="s4"><span class="Apple-converted-space">                </span></span><span class="s3">&lt;</span><span class="s6">button</span><span class="s4"> </span><span class="s2">id</span><span class="s3">=</span><span class="s1">"next-week-btn"</span><span class="s4"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"p-2 rounded-full bg-blue-500 text-white shadow hover:bg-blue-600 transition-colors"</span><span class="s3">&gt;</span></p>
<p class="p5"><span class="s4"><span class="Apple-converted-space">                    </span></span><span class="s1">&lt;!-- Right Arrow SVG Icon --&gt;</span></p>
<p class="p3"><span class="s4"><span class="Apple-converted-space">                    </span></span><span class="s3">&lt;</span><span class="s6">svg</span><span class="s4"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"w-6 h-6"</span><span class="s4"> </span><span class="s2">fill</span><span class="s3">=</span><span class="s1">"none"</span><span class="s4"> </span><span class="s2">stroke</span><span class="s3">=</span><span class="s1">"currentColor"</span><span class="s4"> </span><span class="s2">viewBox</span><span class="s3">=</span><span class="s1">"0 0 24 24"</span><span class="s4"> </span><span class="s2">xmlns</span><span class="s3">=</span><span class="s1">"http://www.w3.org/2000/svg"</span><span class="s3">&gt;&lt;</span><span class="s6">path</span><span class="s4"> </span><span class="s2">stroke-linecap</span><span class="s3">=</span><span class="s1">"round"</span><span class="s4"> </span><span class="s2">stroke-linejoin</span><span class="s3">=</span><span class="s1">"round"</span><span class="s4"> </span><span class="s2">stroke-width</span><span class="s3">=</span><span class="s1">"2"</span><span class="s4"> </span><span class="s2">d</span><span class="s3">=</span><span class="s1">"M9 5l7 7-7 7"</span><span class="s3">&gt;&lt;/</span><span class="s6">path</span><span class="s3">&gt;&lt;/</span><span class="s6">svg</span><span class="s3">&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s3">&lt;/</span><span class="s6">button</span><span class="s3">&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s3">&lt;/</span><span class="s6">div</span><span class="s3">&gt;</span></p>
<p class="p6"><span class="s9"></span><br></p>
<p class="p5"><span class="s4"><span class="Apple-converted-space">            </span></span><span class="s1">&lt;!-- Weekly Totals by Sport --&gt;</span></p>
<p class="p3"><span class="s4"><span class="Apple-converted-space">            </span></span><span class="s3">&lt;</span><span class="s6">div</span><span class="s4"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"mb-6 bg-gray-50 p-4 rounded-lg shadow-inner"</span><span class="s3">&gt;</span></p>
<p class="p3"><span class="s4"><span class="Apple-converted-space">                </span></span><span class="s3">&lt;</span><span class="s6">h3</span><span class="s4"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"text-lg font-semibold text-gray-700 mb-2"</span><span class="s3">&gt;</span><span class="s4">Weekly Totals</span><span class="s3">&lt;/</span><span class="s6">h3</span><span class="s3">&gt;</span></p>
<p class="p3"><span class="s4"><span class="Apple-converted-space">                </span></span><span class="s3">&lt;</span><span class="s6">div</span><span class="s4"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"grid grid-cols-3 gap-2 text-center text-sm"</span><span class="s3">&gt;</span></p>
<p class="p3"><span class="s4"><span class="Apple-converted-space">                    </span></span><span class="s3">&lt;</span><span class="s6">div</span><span class="s4"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"p-2 rounded-md bg-blue-100"</span><span class="s3">&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                        </span></span><span class="s3">&lt;</span><span class="s6">p</span><span class="s1"> </span><span class="s2">class</span><span class="s3">=</span><span class="s5">"font-medium text-blue-800"</span><span class="s3">&gt;</span><span class="s1">Swim</span><span class="s3">&lt;/</span><span class="s6">p</span><span class="s3">&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                        </span></span><span class="s3">&lt;</span><span class="s6">p</span><span class="s1"> </span><span class="s2">class</span><span class="s3">=</span><span class="s5">"text-gray-700"</span><span class="s1"> </span><span class="s2">id</span><span class="s3">=</span><span class="s5">"total-swim"</span><span class="s3">&gt;</span><span class="s1">0 km</span><span class="s3">&lt;/</span><span class="s6">p</span><span class="s3">&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                    </span></span><span class="s3">&lt;/</span><span class="s6">div</span><span class="s3">&gt;</span></p>
<p class="p3"><span class="s4"><span class="Apple-converted-space">                    </span></span><span class="s3">&lt;</span><span class="s6">div</span><span class="s4"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"p-2 rounded-md bg-yellow-100"</span><span class="s3">&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                        </span></span><span class="s3">&lt;</span><span class="s6">p</span><span class="s1"> </span><span class="s2">class</span><span class="s3">=</span><span class="s5">"font-medium text-yellow-800"</span><span class="s3">&gt;</span><span class="s1">Bike</span><span class="s3">&lt;/</span><span class="s6">p</span><span class="s3">&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                        </span></span><span class="s3">&lt;</span><span class="s6">p</span><span class="s1"> </span><span class="s2">class</span><span class="s3">=</span><span class="s5">"text-gray-700"</span><span class="s1"> </span><span class="s2">id</span><span class="s3">=</span><span class="s5">"total-bike"</span><span class="s3">&gt;</span><span class="s1">0 km</span><span class="s3">&lt;/</span><span class="s6">p</span><span class="s3">&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                    </span></span><span class="s3">&lt;/</span><span class="s6">div</span><span class="s3">&gt;</span></p>
<p class="p3"><span class="s4"><span class="Apple-converted-space">                    </span></span><span class="s3">&lt;</span><span class="s6">div</span><span class="s4"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"p-2 rounded-md bg-red-100"</span><span class="s3">&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                        </span></span><span class="s3">&lt;</span><span class="s6">p</span><span class="s1"> </span><span class="s2">class</span><span class="s3">=</span><span class="s5">"font-medium text-red-800"</span><span class="s3">&gt;</span><span class="s1">Run</span><span class="s3">&lt;/</span><span class="s6">p</span><span class="s3">&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                        </span></span><span class="s3">&lt;</span><span class="s6">p</span><span class="s1"> </span><span class="s2">class</span><span class="s3">=</span><span class="s5">"text-gray-700"</span><span class="s1"> </span><span class="s2">id</span><span class="s3">=</span><span class="s5">"total-run"</span><span class="s3">&gt;</span><span class="s1">0 km</span><span class="s3">&lt;/</span><span class="s6">p</span><span class="s3">&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                    </span></span><span class="s3">&lt;/</span><span class="s6">div</span><span class="s3">&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s3">&lt;/</span><span class="s6">div</span><span class="s3">&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s3">&lt;/</span><span class="s6">div</span><span class="s3">&gt;</span></p>
<p class="p6"><span class="s9"></span><br></p>
<p class="p5"><span class="s4"><span class="Apple-converted-space">            </span></span><span class="s1">&lt;!-- Motivational Tip --&gt;</span></p>
<p class="p3"><span class="s4"><span class="Apple-converted-space">            </span></span><span class="s3">&lt;</span><span class="s6">div</span><span class="s4"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"bg-gradient-to-r from-green-400 to-blue-500 text-white p-4 rounded-lg shadow-md mb-6"</span><span class="s3">&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s3">&lt;</span><span class="s6">p</span><span class="s1"> </span><span class="s2">class</span><span class="s3">=</span><span class="s5">"font-medium text-sm"</span><span class="s3">&gt;</span><span class="s1">Motivation of the Week:</span><span class="s3">&lt;/</span><span class="s6">p</span><span class="s3">&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s3">&lt;</span><span class="s6">p</span><span class="s1"> </span><span class="s2">class</span><span class="s3">=</span><span class="s5">"text-md italic"</span><span class="s1"> </span><span class="s2">id</span><span class="s3">=</span><span class="s5">"motivational-tip"</span><span class="s3">&gt;</span><span class="s1">"Consistency is key. Every session, no matter how small, builds towards your goal!"</span><span class="s3">&lt;/</span><span class="s6">p</span><span class="s3">&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s3">&lt;/</span><span class="s6">div</span><span class="s3">&gt;</span></p>
<p class="p6"><span class="s9"></span><br></p>
<p class="p5"><span class="s4"><span class="Apple-converted-space">            </span></span><span class="s1">&lt;!-- Training Schedule Display Area --&gt;</span></p>
<p class="p3"><span class="s4"><span class="Apple-converted-space">            </span></span><span class="s3">&lt;</span><span class="s6">div</span><span class="s4"> </span><span class="s2">id</span><span class="s3">=</span><span class="s1">"training-schedule"</span><span class="s3">&gt;</span></p>
<p class="p5"><span class="s4"><span class="Apple-converted-space">                </span></span><span class="s1">&lt;!-- Training sessions will be dynamically loaded here by JavaScript --&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s3">&lt;/</span><span class="s6">div</span><span class="s3">&gt;</span></p>
<p class="p6"><span class="s9"></span><br></p>
<p class="p5"><span class="s4"><span class="Apple-converted-space">            </span></span><span class="s1">&lt;!-- Session Detail Modal (for logging and editing workouts) --&gt;</span></p>
<p class="p3"><span class="s4"><span class="Apple-converted-space">            </span></span><span class="s3">&lt;</span><span class="s6">div</span><span class="s4"> </span><span class="s2">id</span><span class="s3">=</span><span class="s1">"session-detail-modal"</span><span class="s4"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"fixed inset-0 bg-gray-800 bg-opacity-75 flex items-center justify-center p-4 z-50 hidden"</span><span class="s3">&gt;</span></p>
<p class="p3"><span class="s4"><span class="Apple-converted-space">                </span></span><span class="s3">&lt;</span><span class="s6">div</span><span class="s4"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"bg-white rounded-lg shadow-xl p-6 w-full max-w-sm"</span><span class="s3">&gt;</span></p>
<p class="p3"><span class="s4"><span class="Apple-converted-space">                    </span></span><span class="s3">&lt;</span><span class="s6">h3</span><span class="s4"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"text-xl font-bold mb-4 text-gray-800"</span><span class="s4"> </span><span class="s2">id</span><span class="s3">=</span><span class="s1">"modal-session-title"</span><span class="s3">&gt;&lt;/</span><span class="s6">h3</span><span class="s3">&gt;</span></p>
<p class="p3"><span class="s4"><span class="Apple-converted-space">                    </span></span><span class="s3">&lt;</span><span class="s6">div</span><span class="s4"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"mb-4 text-gray-600 text-sm"</span><span class="s3">&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                        </span></span><span class="s3">&lt;</span><span class="s6">p</span><span class="s1"> </span><span class="s2">class</span><span class="s3">=</span><span class="s5">"font-medium"</span><span class="s3">&gt;</span><span class="s1">Planned:</span><span class="s3">&lt;/</span><span class="s6">p</span><span class="s3">&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                        </span></span><span class="s3">&lt;</span><span class="s6">p</span><span class="s1"> </span><span class="s2">id</span><span class="s3">=</span><span class="s5">"modal-session-planned"</span><span class="s3">&gt;&lt;/</span><span class="s6">p</span><span class="s3">&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                    </span></span><span class="s3">&lt;/</span><span class="s6">div</span><span class="s3">&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                    </span></span><span class="s3">&lt;</span><span class="s6">div</span><span class="s1"> </span><span class="s2">class</span><span class="s3">=</span><span class="s5">"mb-4"</span><span class="s3">&gt;</span></p>
<p class="p3"><span class="s4"><span class="Apple-converted-space">                        </span></span><span class="s3">&lt;</span><span class="s6">label</span><span class="s4"> </span><span class="s2">for</span><span class="s3">=</span><span class="s1">"modal-status"</span><span class="s4"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"block text-sm font-medium text-gray-700 mb-1"</span><span class="s3">&gt;</span><span class="s4">Status:</span><span class="s3">&lt;/</span><span class="s6">label</span><span class="s3">&gt;</span></p>
<p class="p3"><span class="s4"><span class="Apple-converted-space">                        </span></span><span class="s3">&lt;</span><span class="s6">select</span><span class="s4"> </span><span class="s2">id</span><span class="s3">=</span><span class="s1">"modal-status"</span><span class="s4"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"w-full p-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500"</span><span class="s3">&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                            </span></span><span class="s3">&lt;</span><span class="s6">option</span><span class="s1"> </span><span class="s2">value</span><span class="s3">=</span><span class="s5">"planned"</span><span class="s3">&gt;</span><span class="s1">Planned</span><span class="s3">&lt;/</span><span class="s6">option</span><span class="s3">&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                            </span></span><span class="s3">&lt;</span><span class="s6">option</span><span class="s1"> </span><span class="s2">value</span><span class="s3">=</span><span class="s5">"completed"</span><span class="s3">&gt;</span><span class="s1">Completed</span><span class="s3">&lt;/</span><span class="s6">option</span><span class="s3">&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                            </span></span><span class="s3">&lt;</span><span class="s6">option</span><span class="s1"> </span><span class="s2">value</span><span class="s3">=</span><span class="s5">"skipped"</span><span class="s3">&gt;</span><span class="s1">Skipped</span><span class="s3">&lt;/</span><span class="s6">option</span><span class="s3">&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                        </span></span><span class="s3">&lt;/</span><span class="s6">select</span><span class="s3">&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                    </span></span><span class="s3">&lt;/</span><span class="s6">div</span><span class="s3">&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                    </span></span><span class="s3">&lt;</span><span class="s6">div</span><span class="s1"> </span><span class="s2">class</span><span class="s3">=</span><span class="s5">"mb-4"</span><span class="s3">&gt;</span></p>
<p class="p3"><span class="s4"><span class="Apple-converted-space">                        </span></span><span class="s3">&lt;</span><span class="s6">label</span><span class="s4"> </span><span class="s2">for</span><span class="s3">=</span><span class="s1">"modal-time"</span><span class="s4"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"block text-sm font-medium text-gray-700 mb-1"</span><span class="s3">&gt;</span><span class="s4">Time (HH:MM:SS):</span><span class="s3">&lt;/</span><span class="s6">label</span><span class="s3">&gt;</span></p>
<p class="p3"><span class="s4"><span class="Apple-converted-space">                        </span></span><span class="s3">&lt;</span><span class="s6">input</span><span class="s4"> </span><span class="s2">type</span><span class="s3">=</span><span class="s1">"text"</span><span class="s4"> </span><span class="s2">id</span><span class="s3">=</span><span class="s1">"modal-time"</span><span class="s4"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"w-full p-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500"</span><span class="s4"> </span><span class="s2">placeholder</span><span class="s3">=</span><span class="s1">"e.g., 01:30:00"</span><span class="s3">&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                    </span></span><span class="s3">&lt;/</span><span class="s6">div</span><span class="s3">&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                    </span></span><span class="s3">&lt;</span><span class="s6">div</span><span class="s1"> </span><span class="s2">class</span><span class="s3">=</span><span class="s5">"mb-4"</span><span class="s3">&gt;</span></p>
<p class="p3"><span class="s4"><span class="Apple-converted-space">                        </span></span><span class="s3">&lt;</span><span class="s6">label</span><span class="s4"> </span><span class="s2">for</span><span class="s3">=</span><span class="s1">"modal-distance"</span><span class="s4"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"block text-sm font-medium text-gray-700 mb-1"</span><span class="s3">&gt;</span><span class="s4">Distance (km):</span><span class="s3">&lt;/</span><span class="s6">label</span><span class="s3">&gt;</span></p>
<p class="p3"><span class="s4"><span class="Apple-converted-space">                        </span></span><span class="s3">&lt;</span><span class="s6">input</span><span class="s4"> </span><span class="s2">type</span><span class="s3">=</span><span class="s1">"number"</span><span class="s4"> </span><span class="s2">step</span><span class="s3">=</span><span class="s1">"0.1"</span><span class="s4"> </span><span class="s2">id</span><span class="s3">=</span><span class="s1">"modal-distance"</span><span class="s4"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"w-full p-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500"</span><span class="s4"> </span><span class="s2">placeholder</span><span class="s3">=</span><span class="s1">"e.g., 5.2"</span><span class="s3">&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                    </span></span><span class="s3">&lt;/</span><span class="s6">div</span><span class="s3">&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                    </span></span><span class="s3">&lt;</span><span class="s6">div</span><span class="s1"> </span><span class="s2">class</span><span class="s3">=</span><span class="s5">"mb-4"</span><span class="s3">&gt;</span></p>
<p class="p3"><span class="s4"><span class="Apple-converted-space">                        </span></span><span class="s3">&lt;</span><span class="s6">label</span><span class="s4"> </span><span class="s2">for</span><span class="s3">=</span><span class="s1">"modal-intensity"</span><span class="s4"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"block text-sm font-medium text-gray-700 mb-1"</span><span class="s3">&gt;</span><span class="s4">Intensity:</span><span class="s3">&lt;/</span><span class="s6">label</span><span class="s3">&gt;</span></p>
<p class="p3"><span class="s4"><span class="Apple-converted-space">                        </span></span><span class="s3">&lt;</span><span class="s6">input</span><span class="s4"> </span><span class="s2">type</span><span class="s3">=</span><span class="s1">"text"</span><span class="s4"> </span><span class="s2">id</span><span class="s3">=</span><span class="s1">"modal-intensity"</span><span class="s4"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"w-full p-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500"</span><span class="s4"> </span><span class="s2">placeholder</span><span class="s3">=</span><span class="s1">"e.g., Moderate"</span><span class="s3">&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                    </span></span><span class="s3">&lt;/</span><span class="s6">div</span><span class="s3">&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                    </span></span><span class="s3">&lt;</span><span class="s6">div</span><span class="s1"> </span><span class="s2">class</span><span class="s3">=</span><span class="s5">"mb-4"</span><span class="s3">&gt;</span></p>
<p class="p3"><span class="s4"><span class="Apple-converted-space">                        </span></span><span class="s3">&lt;</span><span class="s6">label</span><span class="s4"> </span><span class="s2">for</span><span class="s3">=</span><span class="s1">"modal-rpe"</span><span class="s4"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"block text-sm font-medium text-gray-700 mb-1"</span><span class="s3">&gt;</span><span class="s4">RPE (1-10):</span><span class="s3">&lt;/</span><span class="s6">label</span><span class="s3">&gt;</span></p>
<p class="p3"><span class="s4"><span class="Apple-converted-space">                        </span></span><span class="s3">&lt;</span><span class="s6">input</span><span class="s4"> </span><span class="s2">type</span><span class="s3">=</span><span class="s1">"number"</span><span class="s4"> </span><span class="s2">min</span><span class="s3">=</span><span class="s1">"1"</span><span class="s4"> </span><span class="s2">max</span><span class="s3">=</span><span class="s1">"10"</span><span class="s4"> </span><span class="s2">id</span><span class="s3">=</span><span class="s1">"modal-rpe"</span><span class="s4"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"w-full p-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500"</span><span class="s4"> </span><span class="s2">placeholder</span><span class="s3">=</span><span class="s1">"e.g., 7"</span><span class="s3">&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                    </span></span><span class="s3">&lt;/</span><span class="s6">div</span><span class="s3">&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                    </span></span><span class="s3">&lt;</span><span class="s6">div</span><span class="s1"> </span><span class="s2">class</span><span class="s3">=</span><span class="s5">"mb-6"</span><span class="s3">&gt;</span></p>
<p class="p3"><span class="s4"><span class="Apple-converted-space">                        </span></span><span class="s3">&lt;</span><span class="s6">label</span><span class="s4"> </span><span class="s2">for</span><span class="s3">=</span><span class="s1">"modal-notes"</span><span class="s4"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"block text-sm font-medium text-gray-700 mb-1"</span><span class="s3">&gt;</span><span class="s4">Notes:</span><span class="s3">&lt;/</span><span class="s6">label</span><span class="s3">&gt;</span></p>
<p class="p3"><span class="s4"><span class="Apple-converted-space">                        </span></span><span class="s3">&lt;</span><span class="s6">textarea</span><span class="s4"> </span><span class="s2">id</span><span class="s3">=</span><span class="s1">"modal-notes"</span><span class="s4"> </span><span class="s2">rows</span><span class="s3">=</span><span class="s1">"3"</span><span class="s4"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"w-full p-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500"</span><span class="s4"> </span><span class="s2">placeholder</span><span class="s3">=</span><span class="s1">"e.g., Felt great, windy ride"</span><span class="s3">&gt;&lt;/</span><span class="s6">textarea</span><span class="s3">&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                    </span></span><span class="s3">&lt;/</span><span class="s6">div</span><span class="s3">&gt;</span></p>
<p class="p3"><span class="s4"><span class="Apple-converted-space">                    </span></span><span class="s3">&lt;</span><span class="s6">div</span><span class="s4"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"flex justify-end space-x-2"</span><span class="s3">&gt;</span></p>
<p class="p3"><span class="s4"><span class="Apple-converted-space">                        </span></span><span class="s3">&lt;</span><span class="s6">button</span><span class="s4"> </span><span class="s2">id</span><span class="s3">=</span><span class="s1">"save-session-btn"</span><span class="s4"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"px-4 py-2 bg-green-500 text-white rounded-md shadow hover:bg-green-600 transition-colors"</span><span class="s3">&gt;</span><span class="s4">Save</span><span class="s3">&lt;/</span><span class="s6">button</span><span class="s3">&gt;</span></p>
<p class="p3"><span class="s4"><span class="Apple-converted-space">                        </span></span><span class="s3">&lt;</span><span class="s6">button</span><span class="s4"> </span><span class="s2">id</span><span class="s3">=</span><span class="s1">"cancel-session-btn"</span><span class="s4"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"px-4 py-2 bg-gray-300 text-gray-800 rounded-md shadow hover:bg-gray-400 transition-colors"</span><span class="s3">&gt;</span><span class="s4">Cancel</span><span class="s3">&lt;/</span><span class="s6">button</span><span class="s3">&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                    </span></span><span class="s3">&lt;/</span><span class="s6">div</span><span class="s3">&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s3">&lt;/</span><span class="s6">div</span><span class="s3">&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s3">&lt;/</span><span class="s6">div</span><span class="s3">&gt;</span></p>
<p class="p6"><span class="s9"></span><br></p>
<p class="p5"><span class="s4"><span class="Apple-converted-space">            </span></span><span class="s1">&lt;!-- Export to CSV Button --&gt;</span></p>
<p class="p3"><span class="s4"><span class="Apple-converted-space">            </span></span><span class="s3">&lt;</span><span class="s6">button</span><span class="s4"> </span><span class="s2">id</span><span class="s3">=</span><span class="s1">"export-csv-btn"</span><span class="s4"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"w-full mt-6 py-3 bg-indigo-600 text-white rounded-lg shadow-md hover:bg-indigo-700 transition duration-200"</span><span class="s3">&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span>Export Logs to CSV</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s3">&lt;/</span><span class="s6">button</span><span class="s3">&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s3">&lt;/</span><span class="s6">div</span><span class="s3">&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">    </span></span><span class="s3">&lt;/</span><span class="s6">div</span><span class="s3">&gt;</span></p>
<p class="p6"><span class="s9"></span><br></p>
<p class="p5"><span class="s4"><span class="Apple-converted-space">    </span></span><span class="s1">&lt;!-- Firebase SDKs - Imported as modules for better organization --&gt;</span></p>
<p class="p3"><span class="s4"><span class="Apple-converted-space">    </span></span><span class="s3">&lt;</span><span class="s6">script</span><span class="s4"> </span><span class="s2">type</span><span class="s3">=</span><span class="s1">"module"</span><span class="s3">&gt;</span></p>
<p class="p5"><span class="s4"><span class="Apple-converted-space">        </span></span><span class="s1">// Firebase Core &amp; Auth for user management</span></p>
<p class="p7"><span class="s4"><span class="Apple-converted-space">        </span></span><span class="s12">import</span><span class="s4"> </span><span class="s7">{</span><span class="s4"> initializeApp </span><span class="s7">}</span><span class="s4"> </span><span class="s12">from</span><span class="s4"> </span><span class="s1">"https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js"</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s12">import</span><span class="s1"> </span><span class="s7">{</span><span class="s1"> getAuth</span><span class="s7">,</span><span class="s1"> signInAnonymously</span><span class="s7">,</span><span class="s1"> signInWithCustomToken</span><span class="s7">,</span><span class="s1"> onAuthStateChanged </span><span class="s7">}</span><span class="s1"> </span><span class="s12">from</span><span class="s1"> </span><span class="s8">"https://www.gstatic.com/firebasejs/11.6.1/firebase-auth.js"</span><span class="s7">;</span></p>
<p class="p5"><span class="s4"><span class="Apple-converted-space">        </span></span><span class="s1">// Firestore for database operations</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s12">import</span><span class="s1"> </span><span class="s7">{</span><span class="s1"> getFirestore</span><span class="s7">,</span><span class="s1"> doc</span><span class="s7">,</span><span class="s1"> addDoc</span><span class="s7">,</span><span class="s1"> updateDoc</span><span class="s7">,</span><span class="s1"> onSnapshot</span><span class="s7">,</span><span class="s1"> collection</span><span class="s7">,</span><span class="s1"> query</span><span class="s7">,</span><span class="s1"> getDocs</span><span class="s7">,</span><span class="s1"> setLogLevel </span><span class="s7">}</span><span class="s1"> </span><span class="s12">from</span><span class="s1"> </span><span class="s8">"https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore.js"</span><span class="s7">;</span></p>
<p class="p6"><span class="s9"></span><br></p>
<p class="p5"><span class="s4"><span class="Apple-converted-space">        </span></span><span class="s1">// Set Firebase log level to debug for development visibility</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span>setLogLevel</span><span class="s7">(</span><span class="s8">'debug'</span><span class="s7">);</span></p>
<p class="p6"><span class="s9"></span><br></p>
<p class="p5"><span class="s4"><span class="Apple-converted-space">        </span></span><span class="s1">// Global variables provided by the Canvas environment for Firebase configuration</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s12">const</span><span class="s1"> appId </span><span class="s7">=</span><span class="s1"> </span><span class="s12">typeof</span><span class="s1"> __app_id </span><span class="s7">!==</span><span class="s1"> </span><span class="s8">'undefined'</span><span class="s1"> </span><span class="s7">?</span><span class="s1"> __app_id </span><span class="s7">:</span><span class="s1"> </span><span class="s8">'default-app-id'</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s12">const</span><span class="s1"> firebaseConfig </span><span class="s7">=</span><span class="s1"> </span><span class="s12">typeof</span><span class="s1"> __firebase_config </span><span class="s7">!==</span><span class="s1"> </span><span class="s8">'undefined'</span><span class="s1"> </span><span class="s7">?</span><span class="s1"> </span><span class="s13">JSON</span><span class="s7">.</span><span class="s1">parse</span><span class="s7">(</span><span class="s1">__firebase_config</span><span class="s7">)</span><span class="s1"> </span><span class="s7">:</span><span class="s1"> </span><span class="s7">{};</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s12">const</span><span class="s1"> initialAuthToken </span><span class="s7">=</span><span class="s1"> </span><span class="s12">typeof</span><span class="s1"> __initial_auth_token </span><span class="s7">!==</span><span class="s1"> </span><span class="s8">'undefined'</span><span class="s1"> </span><span class="s7">?</span><span class="s1"> __initial_auth_token </span><span class="s7">:</span><span class="s1"> </span><span class="s12">null</span><span class="s7">;</span></p>
<p class="p6"><span class="s9"></span><br></p>
<p class="p5"><span class="s4"><span class="Apple-converted-space">        </span></span><span class="s12">let</span><span class="s4"> app</span><span class="s7">,</span><span class="s4"> db</span><span class="s7">,</span><span class="s4"> auth</span><span class="s7">,</span><span class="s4"> userId </span><span class="s7">=</span><span class="s4"> </span><span class="s12">null</span><span class="s7">;</span><span class="s4"> </span><span class="s1">// Firebase instances and current user ID</span></p>
<p class="p5"><span class="s4"><span class="Apple-converted-space">        </span></span><span class="s12">let</span><span class="s4"> unsubscribeSnapshot </span><span class="s7">=</span><span class="s4"> </span><span class="s12">null</span><span class="s7">;</span><span class="s4"> </span><span class="s1">// Holds the Firestore unsubscribe function</span></p>
<p class="p5"><span class="s4"><span class="Apple-converted-space">        </span></span><span class="s12">let</span><span class="s4"> userLogs </span><span class="s7">=</span><span class="s4"> </span><span class="s7">{};</span><span class="s4"> </span><span class="s1">// Cache to store user's logged training data</span></p>
<p class="p6"><span class="s9"></span><br></p>
<p class="p5"><span class="s4"><span class="Apple-converted-space">        </span></span><span class="s12">const</span><span class="s4"> trainingPlan </span><span class="s7">=</span><span class="s4"> </span><span class="s7">[];</span><span class="s4"> </span><span class="s1">// This array will hold the static, pre-defined 14-week training plan</span></p>
<p class="p6"><span class="s9"></span><br></p>
<p class="p5"><span class="s4"><span class="Apple-converted-space">        </span></span><span class="s1">// Define the start date of the training plan (July 22nd, 2025) and race day (October 25th, 2025)</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s12">const</span><span class="s1"> planStartDate </span><span class="s7">=</span><span class="s1"> </span><span class="s12">new</span><span class="s1"> </span><span class="s13">Date</span><span class="s7">(</span><span class="s8">'2025-07-22T00:00:00'</span><span class="s7">);</span></p>
<p class="p7"><span class="s4"><span class="Apple-converted-space">        </span></span><span class="s12">const</span><span class="s4"> raceDay </span><span class="s7">=</span><span class="s4"> </span><span class="s12">new</span><span class="s4"> </span><span class="s13">Date</span><span class="s7">(</span><span class="s1">'2025-10-25T00:00:00'</span><span class="s7">);</span></p>
<p class="p6"><span class="s9"></span><br></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s10">/**</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">         </span>* Generates the detailed 14-week triathlon training plan based on the user's requirements.</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">         </span>* This function populates the `trainingPlan` array.</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">         </span>*/</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s12">function</span><span class="s1"> generateTrainingPlan</span><span class="s7">()</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s12">for</span><span class="s1"> </span><span class="s7">(</span><span class="s12">let</span><span class="s1"> week </span><span class="s7">=</span><span class="s1"> </span><span class="s14">1</span><span class="s7">;</span><span class="s1"> week </span><span class="s7">&lt;=</span><span class="s1"> </span><span class="s14">14</span><span class="s7">;</span><span class="s1"> week</span><span class="s7">++)</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s12">const</span><span class="s1"> weekStartDate </span><span class="s7">=</span><span class="s1"> </span><span class="s12">new</span><span class="s1"> </span><span class="s13">Date</span><span class="s7">(</span><span class="s1">planStartDate</span><span class="s7">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span>weekStartDate</span><span class="s7">.</span><span class="s1">setDate</span><span class="s7">(</span><span class="s1">planStartDate</span><span class="s7">.</span><span class="s1">getDate</span><span class="s7">()</span><span class="s1"> </span><span class="s7">+</span><span class="s1"> </span><span class="s7">(</span><span class="s1">week </span><span class="s7">-</span><span class="s1"> </span><span class="s14">1</span><span class="s7">)</span><span class="s1"> </span><span class="s7">*</span><span class="s1"> </span><span class="s14">7</span><span class="s7">);</span><span class="s1"> </span><span class="s10">// Calculate start date for each week</span></p>
<p class="p6"><span class="s9"></span><br></p>
<p class="p5"><span class="s4"><span class="Apple-converted-space">                </span></span><span class="s12">const</span><span class="s4"> workouts </span><span class="s7">=</span><span class="s4"> </span><span class="s7">[];</span><span class="s4"> </span><span class="s1">// Workouts for the current week</span></p>
<p class="p7"><span class="s4"><span class="Apple-converted-space">                </span></span><span class="s12">const</span><span class="s4"> daysOfWeek </span><span class="s7">=</span><span class="s4"> </span><span class="s7">[</span><span class="s1">"Monday"</span><span class="s7">,</span><span class="s4"> </span><span class="s1">"Tuesday"</span><span class="s7">,</span><span class="s4"> </span><span class="s1">"Wednesday"</span><span class="s7">,</span><span class="s4"> </span><span class="s1">"Thursday"</span><span class="s7">,</span><span class="s4"> </span><span class="s1">"Friday"</span><span class="s7">,</span><span class="s4"> </span><span class="s1">"Saturday"</span><span class="s7">,</span><span class="s4"> </span><span class="s1">"Sunday"</span><span class="s7">];</span></p>
<p class="p6"><span class="s9"></span><br></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s12">for</span><span class="s1"> </span><span class="s7">(</span><span class="s12">let</span><span class="s1"> i </span><span class="s7">=</span><span class="s1"> </span><span class="s14">0</span><span class="s7">;</span><span class="s1"> i </span><span class="s7">&lt;</span><span class="s1"> </span><span class="s14">7</span><span class="s7">;</span><span class="s1"> i</span><span class="s7">++)</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                    </span></span><span class="s12">const</span><span class="s1"> workoutDate </span><span class="s7">=</span><span class="s1"> </span><span class="s12">new</span><span class="s1"> </span><span class="s13">Date</span><span class="s7">(</span><span class="s1">weekStartDate</span><span class="s7">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                    </span>workoutDate</span><span class="s7">.</span><span class="s1">setDate</span><span class="s7">(</span><span class="s1">weekStartDate</span><span class="s7">.</span><span class="s1">getDate</span><span class="s7">()</span><span class="s1"> </span><span class="s7">+</span><span class="s1"> i</span><span class="s7">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                    </span></span><span class="s12">const</span><span class="s1"> formattedDate </span><span class="s7">=</span><span class="s1"> workoutDate</span><span class="s7">.</span><span class="s1">toISOString</span><span class="s7">().</span><span class="s1">split</span><span class="s7">(</span><span class="s8">'T'</span><span class="s7">)[</span><span class="s14">0</span><span class="s7">];</span><span class="s1"> </span><span class="s10">// YYYY-MM-DD format</span></p>
<p class="p6"><span class="s9"></span><br></p>
<p class="p5"><span class="s4"><span class="Apple-converted-space">                    </span></span><span class="s1">// Default "Rest Day" session, will be overridden by specific workouts</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                    </span></span><span class="s12">let</span><span class="s1"> dayWorkout </span><span class="s7">=</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                        </span>date</span><span class="s7">:</span><span class="s1"> formattedDate</span><span class="s7">,</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                        </span>day</span><span class="s7">:</span><span class="s1"> daysOfWeek</span><span class="s7">[</span><span class="s1">i</span><span class="s7">],</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                        </span>sport</span><span class="s7">:</span><span class="s1"> </span><span class="s8">"Rest"</span><span class="s7">,</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                        </span>type</span><span class="s7">:</span><span class="s1"> </span><span class="s8">"Rest Day"</span><span class="s7">,</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                        </span>distance</span><span class="s7">:</span><span class="s1"> </span><span class="s8">"0km"</span><span class="s7">,</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                        </span>time</span><span class="s7">:</span><span class="s1"> </span><span class="s8">"0min"</span><span class="s7">,</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                        </span>intensity</span><span class="s7">:</span><span class="s1"> </span><span class="s8">"N/A"</span><span class="s7">,</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                        </span>rpe</span><span class="s7">:</span><span class="s1"> </span><span class="s14">0</span><span class="s7">,</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                        </span>isBrick</span><span class="s7">:</span><span class="s1"> </span><span class="s12">false</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                    </span></span><span class="s7">};</span></p>
<p class="p6"><span class="s9"></span><br></p>
<p class="p5"><span class="s4"><span class="Apple-converted-space">                    </span></span><span class="s1">// Define specific workouts based on the training phase/week</span></p>
<p class="p5"><span class="s4"><span class="Apple-converted-space">                    </span></span><span class="s12">if</span><span class="s4"> </span><span class="s7">(</span><span class="s4">week </span><span class="s7">&gt;=</span><span class="s4"> </span><span class="s14">1</span><span class="s4"> </span><span class="s7">&amp;&amp;</span><span class="s4"> week </span><span class="s7">&lt;=</span><span class="s4"> </span><span class="s14">3</span><span class="s7">)</span><span class="s4"> </span><span class="s7">{</span><span class="s4"> </span><span class="s1">// Weeks 1-3: Focus on technique and aerobic base</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                        </span></span><span class="s12">if</span><span class="s1"> </span><span class="s7">(</span><span class="s1">daysOfWeek</span><span class="s7">[</span><span class="s1">i</span><span class="s7">]</span><span class="s1"> </span><span class="s7">===</span><span class="s1"> </span><span class="s8">"Monday"</span><span class="s7">)</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                            </span>workouts</span><span class="s7">.</span><span class="s1">push</span><span class="s7">({</span><span class="s1"> </span><span class="s7">...</span><span class="s1">dayWorkout</span><span class="s7">,</span><span class="s1"> sport</span><span class="s7">:</span><span class="s1"> </span><span class="s8">"Swim"</span><span class="s7">,</span><span class="s1"> type</span><span class="s7">:</span><span class="s1"> </span><span class="s8">"technique + aerobic"</span><span class="s7">,</span><span class="s1"> distance</span><span class="s7">:</span><span class="s1"> </span><span class="s8">"0.8-1km"</span><span class="s7">,</span><span class="s1"> time</span><span class="s7">:</span><span class="s1"> </span><span class="s8">"45min"</span><span class="s7">,</span><span class="s1"> intensity</span><span class="s7">:</span><span class="s1"> </span><span class="s8">"Light"</span><span class="s7">,</span><span class="s1"> rpe</span><span class="s7">:</span><span class="s1"> </span><span class="s14">4</span><span class="s1"> </span><span class="s7">});</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                            </span>workouts</span><span class="s7">.</span><span class="s1">push</span><span class="s7">({</span><span class="s1"> </span><span class="s7">...</span><span class="s1">dayWorkout</span><span class="s7">,</span><span class="s1"> sport</span><span class="s7">:</span><span class="s1"> </span><span class="s8">"Strength"</span><span class="s7">,</span><span class="s1"> type</span><span class="s7">:</span><span class="s1"> </span><span class="s8">"Light Strength Training"</span><span class="s7">,</span><span class="s1"> distance</span><span class="s7">:</span><span class="s1"> </span><span class="s8">"0km"</span><span class="s7">,</span><span class="s1"> time</span><span class="s7">:</span><span class="s1"> </span><span class="s8">"30min"</span><span class="s7">,</span><span class="s1"> intensity</span><span class="s7">:</span><span class="s1"> </span><span class="s8">"Moderate"</span><span class="s7">,</span><span class="s1"> rpe</span><span class="s7">:</span><span class="s1"> </span><span class="s14">6</span><span class="s1"> </span><span class="s7">});</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                        </span></span><span class="s7">}</span><span class="s1"> </span><span class="s12">else</span><span class="s1"> </span><span class="s12">if</span><span class="s1"> </span><span class="s7">(</span><span class="s1">daysOfWeek</span><span class="s7">[</span><span class="s1">i</span><span class="s7">]</span><span class="s1"> </span><span class="s7">===</span><span class="s1"> </span><span class="s8">"Tuesday"</span><span class="s7">)</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                            </span>workouts</span><span class="s7">.</span><span class="s1">push</span><span class="s7">({</span><span class="s1"> </span><span class="s7">...</span><span class="s1">dayWorkout</span><span class="s7">,</span><span class="s1"> sport</span><span class="s7">:</span><span class="s1"> </span><span class="s8">"Run"</span><span class="s7">,</span><span class="s1"> type</span><span class="s7">:</span><span class="s1"> </span><span class="s8">"aerobic base"</span><span class="s7">,</span><span class="s1"> distance</span><span class="s7">:</span><span class="s1"> </span><span class="s8">"4-5km"</span><span class="s7">,</span><span class="s1"> time</span><span class="s7">:</span><span class="s1"> </span><span class="s8">"30min"</span><span class="s7">,</span><span class="s1"> intensity</span><span class="s7">:</span><span class="s1"> </span><span class="s8">"Easy"</span><span class="s7">,</span><span class="s1"> rpe</span><span class="s7">:</span><span class="s1"> </span><span class="s14">5</span><span class="s1"> </span><span class="s7">});</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                        </span></span><span class="s7">}</span><span class="s1"> </span><span class="s12">else</span><span class="s1"> </span><span class="s12">if</span><span class="s1"> </span><span class="s7">(</span><span class="s1">daysOfWeek</span><span class="s7">[</span><span class="s1">i</span><span class="s7">]</span><span class="s1"> </span><span class="s7">===</span><span class="s1"> </span><span class="s8">"Wednesday"</span><span class="s7">)</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                            </span>workouts</span><span class="s7">.</span><span class="s1">push</span><span class="s7">({</span><span class="s1"> </span><span class="s7">...</span><span class="s1">dayWorkout</span><span class="s7">,</span><span class="s1"> sport</span><span class="s7">:</span><span class="s1"> </span><span class="s8">"Bike"</span><span class="s7">,</span><span class="s1"> type</span><span class="s7">:</span><span class="s1"> </span><span class="s8">"aerobic endurance"</span><span class="s7">,</span><span class="s1"> distance</span><span class="s7">:</span><span class="s1"> </span><span class="s8">"20-25km"</span><span class="s7">,</span><span class="s1"> time</span><span class="s7">:</span><span class="s1"> </span><span class="s8">"60min"</span><span class="s7">,</span><span class="s1"> intensity</span><span class="s7">:</span><span class="s1"> </span><span class="s8">"Moderate"</span><span class="s7">,</span><span class="s1"> rpe</span><span class="s7">:</span><span class="s1"> </span><span class="s14">6</span><span class="s1"> </span><span class="s7">});</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                            </span>workouts</span><span class="s7">.</span><span class="s1">push</span><span class="s7">({</span><span class="s1"> </span><span class="s7">...</span><span class="s1">dayWorkout</span><span class="s7">,</span><span class="s1"> sport</span><span class="s7">:</span><span class="s1"> </span><span class="s8">"Core"</span><span class="s7">,</span><span class="s1"> type</span><span class="s7">:</span><span class="s1"> </span><span class="s8">"Core Strength"</span><span class="s7">,</span><span class="s1"> distance</span><span class="s7">:</span><span class="s1"> </span><span class="s8">"0km"</span><span class="s7">,</span><span class="s1"> time</span><span class="s7">:</span><span class="s1"> </span><span class="s8">"20min"</span><span class="s7">,</span><span class="s1"> intensity</span><span class="s7">:</span><span class="s1"> </span><span class="s8">"Moderate"</span><span class="s7">,</span><span class="s1"> rpe</span><span class="s7">:</span><span class="s1"> </span><span class="s14">5</span><span class="s1"> </span><span class="s7">});</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                        </span></span><span class="s7">}</span><span class="s1"> </span><span class="s12">else</span><span class="s1"> </span><span class="s12">if</span><span class="s1"> </span><span class="s7">(</span><span class="s1">daysOfWeek</span><span class="s7">[</span><span class="s1">i</span><span class="s7">]</span><span class="s1"> </span><span class="s7">===</span><span class="s1"> </span><span class="s8">"Thursday"</span><span class="s7">)</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                            </span>workouts</span><span class="s7">.</span><span class="s1">push</span><span class="s7">({</span><span class="s1"> </span><span class="s7">...</span><span class="s1">dayWorkout</span><span class="s7">,</span><span class="s1"> sport</span><span class="s7">:</span><span class="s1"> </span><span class="s8">"Swim"</span><span class="s7">,</span><span class="s1"> type</span><span class="s7">:</span><span class="s1"> </span><span class="s8">"endurance drills"</span><span class="s7">,</span><span class="s1"> distance</span><span class="s7">:</span><span class="s1"> </span><span class="s8">"1-1.2km"</span><span class="s7">,</span><span class="s1"> time</span><span class="s7">:</span><span class="s1"> </span><span class="s8">"45min"</span><span class="s7">,</span><span class="s1"> intensity</span><span class="s7">:</span><span class="s1"> </span><span class="s8">"Moderate"</span><span class="s7">,</span><span class="s1"> rpe</span><span class="s7">:</span><span class="s1"> </span><span class="s14">5</span><span class="s1"> </span><span class="s7">});</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                        </span></span><span class="s7">}</span><span class="s1"> </span><span class="s12">else</span><span class="s1"> </span><span class="s12">if</span><span class="s1"> </span><span class="s7">(</span><span class="s1">daysOfWeek</span><span class="s7">[</span><span class="s1">i</span><span class="s7">]</span><span class="s1"> </span><span class="s7">===</span><span class="s1"> </span><span class="s8">"Friday"</span><span class="s7">)</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                            </span>workouts</span><span class="s7">.</span><span class="s1">push</span><span class="s7">({</span><span class="s1"> </span><span class="s7">...</span><span class="s1">dayWorkout</span><span class="s7">,</span><span class="s1"> sport</span><span class="s7">:</span><span class="s1"> </span><span class="s8">"Rest"</span><span class="s7">,</span><span class="s1"> type</span><span class="s7">:</span><span class="s1"> </span><span class="s8">"Active Recovery/Rest"</span><span class="s7">,</span><span class="s1"> distance</span><span class="s7">:</span><span class="s1"> </span><span class="s8">"0km"</span><span class="s7">,</span><span class="s1"> time</span><span class="s7">:</span><span class="s1"> </span><span class="s8">"0min"</span><span class="s7">,</span><span class="s1"> intensity</span><span class="s7">:</span><span class="s1"> </span><span class="s8">"N/A"</span><span class="s7">,</span><span class="s1"> rpe</span><span class="s7">:</span><span class="s1"> </span><span class="s14">0</span><span class="s1"> </span><span class="s7">});</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                        </span></span><span class="s7">}</span><span class="s1"> </span><span class="s12">else</span><span class="s1"> </span><span class="s12">if</span><span class="s1"> </span><span class="s7">(</span><span class="s1">daysOfWeek</span><span class="s7">[</span><span class="s1">i</span><span class="s7">]</span><span class="s1"> </span><span class="s7">===</span><span class="s1"> </span><span class="s8">"Saturday"</span><span class="s7">)</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                            </span>workouts</span><span class="s7">.</span><span class="s1">push</span><span class="s7">({</span><span class="s1"> </span><span class="s7">...</span><span class="s1">dayWorkout</span><span class="s7">,</span><span class="s1"> sport</span><span class="s7">:</span><span class="s1"> </span><span class="s8">"Run"</span><span class="s7">,</span><span class="s1"> type</span><span class="s7">:</span><span class="s1"> </span><span class="s8">"easy long"</span><span class="s7">,</span><span class="s1"> distance</span><span class="s7">:</span><span class="s1"> </span><span class="s8">"6-7km"</span><span class="s7">,</span><span class="s1"> time</span><span class="s7">:</span><span class="s1"> </span><span class="s8">"45min"</span><span class="s7">,</span><span class="s1"> intensity</span><span class="s7">:</span><span class="s1"> </span><span class="s8">"Easy"</span><span class="s7">,</span><span class="s1"> rpe</span><span class="s7">:</span><span class="s1"> </span><span class="s14">5</span><span class="s1"> </span><span class="s7">});</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                        </span></span><span class="s7">}</span><span class="s1"> </span><span class="s12">else</span><span class="s1"> </span><span class="s12">if</span><span class="s1"> </span><span class="s7">(</span><span class="s1">daysOfWeek</span><span class="s7">[</span><span class="s1">i</span><span class="s7">]</span><span class="s1"> </span><span class="s7">===</span><span class="s1"> </span><span class="s8">"Sunday"</span><span class="s7">)</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                            </span>workouts</span><span class="s7">.</span><span class="s1">push</span><span class="s7">({</span><span class="s1"> </span><span class="s7">...</span><span class="s1">dayWorkout</span><span class="s7">,</span><span class="s1"> sport</span><span class="s7">:</span><span class="s1"> </span><span class="s8">"Bike"</span><span class="s7">,</span><span class="s1"> type</span><span class="s7">:</span><span class="s1"> </span><span class="s8">"easy long"</span><span class="s7">,</span><span class="s1"> distance</span><span class="s7">:</span><span class="s1"> </span><span class="s8">"30-40km"</span><span class="s7">,</span><span class="s1"> time</span><span class="s7">:</span><span class="s1"> </span><span class="s8">"90-120min"</span><span class="s7">,</span><span class="s1"> intensity</span><span class="s7">:</span><span class="s1"> </span><span class="s8">"Easy"</span><span class="s7">,</span><span class="s1"> rpe</span><span class="s7">:</span><span class="s1"> </span><span class="s14">5</span><span class="s1"> </span><span class="s7">});</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                        </span></span><span class="s7">}</span></p>
<p class="p5"><span class="s4"><span class="Apple-converted-space">                    </span></span><span class="s7">}</span><span class="s4"> </span><span class="s12">else</span><span class="s4"> </span><span class="s12">if</span><span class="s4"> </span><span class="s7">(</span><span class="s4">week </span><span class="s7">&gt;=</span><span class="s4"> </span><span class="s14">4</span><span class="s4"> </span><span class="s7">&amp;&amp;</span><span class="s4"> week </span><span class="s7">&lt;=</span><span class="s4"> </span><span class="s14">6</span><span class="s7">)</span><span class="s4"> </span><span class="s7">{</span><span class="s4"> </span><span class="s1">// Weeks 4-6: Add brick workouts, intervals, tempo rides</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                        </span></span><span class="s12">if</span><span class="s1"> </span><span class="s7">(</span><span class="s1">daysOfWeek</span><span class="s7">[</span><span class="s1">i</span><span class="s7">]</span><span class="s1"> </span><span class="s7">===</span><span class="s1"> </span><span class="s8">"Monday"</span><span class="s7">)</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                            </span>workouts</span><span class="s7">.</span><span class="s1">push</span><span class="s7">({</span><span class="s1"> </span><span class="s7">...</span><span class="s1">dayWorkout</span><span class="s7">,</span><span class="s1"> sport</span><span class="s7">:</span><span class="s1"> </span><span class="s8">"Swim"</span><span class="s7">,</span><span class="s1"> type</span><span class="s7">:</span><span class="s1"> </span><span class="s8">"technique + intervals"</span><span class="s7">,</span><span class="s1"> distance</span><span class="s7">:</span><span class="s1"> </span><span class="s8">"1-1.2km"</span><span class="s7">,</span><span class="s1"> time</span><span class="s7">:</span><span class="s1"> </span><span class="s8">"50min"</span><span class="s7">,</span><span class="s1"> intensity</span><span class="s7">:</span><span class="s1"> </span><span class="s8">"Moderate-Hard"</span><span class="s7">,</span><span class="s1"> rpe</span><span class="s7">:</span><span class="s1"> </span><span class="s14">7</span><span class="s1"> </span><span class="s7">});</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                            </span>workouts</span><span class="s7">.</span><span class="s1">push</span><span class="s7">({</span><span class="s1"> </span><span class="s7">...</span><span class="s1">dayWorkout</span><span class="s7">,</span><span class="s1"> sport</span><span class="s7">:</span><span class="s1"> </span><span class="s8">"Strength"</span><span class="s7">,</span><span class="s1"> type</span><span class="s7">:</span><span class="s1"> </span><span class="s8">"Light Strength Training"</span><span class="s7">,</span><span class="s1"> distance</span><span class="s7">:</span><span class="s1"> </span><span class="s8">"0km"</span><span class="s7">,</span><span class="s1"> time</span><span class="s7">:</span><span class="s1"> </span><span class="s8">"30min"</span><span class="s7">,</span><span class="s1"> intensity</span><span class="s7">:</span><span class="s1"> </span><span class="s8">"Moderate"</span><span class="s7">,</span><span class="s1"> rpe</span><span class="s7">:</span><span class="s1"> </span><span class="s14">6</span><span class="s1"> </span><span class="s7">});</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                        </span></span><span class="s7">}</span><span class="s1"> </span><span class="s12">else</span><span class="s1"> </span><span class="s12">if</span><span class="s1"> </span><span class="s7">(</span><span class="s1">daysOfWeek</span><span class="s7">[</span><span class="s1">i</span><span class="s7">]</span><span class="s1"> </span><span class="s7">===</span><span class="s1"> </span><span class="s8">"Tuesday"</span><span class="s7">)</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                            </span>workouts</span><span class="s7">.</span><span class="s1">push</span><span class="s7">({</span><span class="s1"> </span><span class="s7">...</span><span class="s1">dayWorkout</span><span class="s7">,</span><span class="s1"> sport</span><span class="s7">:</span><span class="s1"> </span><span class="s8">"Run"</span><span class="s7">,</span><span class="s1"> type</span><span class="s7">:</span><span class="s1"> </span><span class="s8">"interval run (5x800m)"</span><span class="s7">,</span><span class="s1"> distance</span><span class="s7">:</span><span class="s1"> </span><span class="s8">"6-7km"</span><span class="s7">,</span><span class="s1"> time</span><span class="s7">:</span><span class="s1"> </span><span class="s8">"40min"</span><span class="s7">,</span><span class="s1"> intensity</span><span class="s7">:</span><span class="s1"> </span><span class="s8">"Hard"</span><span class="s7">,</span><span class="s1"> rpe</span><span class="s7">:</span><span class="s1"> </span><span class="s14">8</span><span class="s1"> </span><span class="s7">});</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                        </span></span><span class="s7">}</span><span class="s1"> </span><span class="s12">else</span><span class="s1"> </span><span class="s12">if</span><span class="s1"> </span><span class="s7">(</span><span class="s1">daysOfWeek</span><span class="s7">[</span><span class="s1">i</span><span class="s7">]</span><span class="s1"> </span><span class="s7">===</span><span class="s1"> </span><span class="s8">"Wednesday"</span><span class="s7">)</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                            </span>workouts</span><span class="s7">.</span><span class="s1">push</span><span class="s7">({</span><span class="s1"> </span><span class="s7">...</span><span class="s1">dayWorkout</span><span class="s7">,</span><span class="s1"> sport</span><span class="s7">:</span><span class="s1"> </span><span class="s8">"Bike"</span><span class="s7">,</span><span class="s1"> type</span><span class="s7">:</span><span class="s1"> </span><span class="s8">"cadence/hill work"</span><span class="s7">,</span><span class="s1"> distance</span><span class="s7">:</span><span class="s1"> </span><span class="s8">"25-30km"</span><span class="s7">,</span><span class="s1"> time</span><span class="s7">:</span><span class="s1"> </span><span class="s8">"75min"</span><span class="s7">,</span><span class="s1"> intensity</span><span class="s7">:</span><span class="s1"> </span><span class="s8">"Moderate"</span><span class="s7">,</span><span class="s1"> rpe</span><span class="s7">:</span><span class="s1"> </span><span class="s14">6</span><span class="s1"> </span><span class="s7">});</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                            </span>workouts</span><span class="s7">.</span><span class="s1">push</span><span class="s7">({</span><span class="s1"> </span><span class="s7">...</span><span class="s1">dayWorkout</span><span class="s7">,</span><span class="s1"> sport</span><span class="s7">:</span><span class="s1"> </span><span class="s8">"Core"</span><span class="s7">,</span><span class="s1"> type</span><span class="s7">:</span><span class="s1"> </span><span class="s8">"Core Strength"</span><span class="s7">,</span><span class="s1"> distance</span><span class="s7">:</span><span class="s1"> </span><span class="s8">"0km"</span><span class="s7">,</span><span class="s1"> time</span><span class="s7">:</span><span class="s1"> </span><span class="s8">"20min"</span><span class="s7">,</span><span class="s1"> intensity</span><span class="s7">:</span><span class="s1"> </span><span class="s8">"Moderate"</span><span class="s7">,</span><span class="s1"> rpe</span><span class="s7">:</span><span class="s1"> </span><span class="s14">5</span><span class="s1"> </span><span class="s7">});</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                        </span></span><span class="s7">}</span><span class="s1"> </span><span class="s12">else</span><span class="s1"> </span><span class="s12">if</span><span class="s1"> </span><span class="s7">(</span><span class="s1">daysOfWeek</span><span class="s7">[</span><span class="s1">i</span><span class="s7">]</span><span class="s1"> </span><span class="s7">===</span><span class="s1"> </span><span class="s8">"Thursday"</span><span class="s7">)</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                            </span>workouts</span><span class="s7">.</span><span class="s1">push</span><span class="s7">({</span><span class="s1"> </span><span class="s7">...</span><span class="s1">dayWorkout</span><span class="s7">,</span><span class="s1"> sport</span><span class="s7">:</span><span class="s1"> </span><span class="s8">"Swim"</span><span class="s7">,</span><span class="s1"> type</span><span class="s7">:</span><span class="s1"> </span><span class="s8">"endurance"</span><span class="s7">,</span><span class="s1"> distance</span><span class="s7">:</span><span class="s1"> </span><span class="s8">"1.2-1.5km"</span><span class="s7">,</span><span class="s1"> time</span><span class="s7">:</span><span class="s1"> </span><span class="s8">"55min"</span><span class="s7">,</span><span class="s1"> intensity</span><span class="s7">:</span><span class="s1"> </span><span class="s8">"Moderate"</span><span class="s7">,</span><span class="s1"> rpe</span><span class="s7">:</span><span class="s1"> </span><span class="s14">6</span><span class="s1"> </span><span class="s7">});</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                        </span></span><span class="s7">}</span><span class="s1"> </span><span class="s12">else</span><span class="s1"> </span><span class="s12">if</span><span class="s1"> </span><span class="s7">(</span><span class="s1">daysOfWeek</span><span class="s7">[</span><span class="s1">i</span><span class="s7">]</span><span class="s1"> </span><span class="s7">===</span><span class="s1"> </span><span class="s8">"Friday"</span><span class="s7">)</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                            </span>workouts</span><span class="s7">.</span><span class="s1">push</span><span class="s7">({</span><span class="s1"> </span><span class="s7">...</span><span class="s1">dayWorkout</span><span class="s7">,</span><span class="s1"> sport</span><span class="s7">:</span><span class="s1"> </span><span class="s8">"Recovery"</span><span class="s7">,</span><span class="s1"> type</span><span class="s7">:</span><span class="s1"> </span><span class="s8">"Active Recovery (yoga/stretching)"</span><span class="s7">,</span><span class="s1"> distance</span><span class="s7">:</span><span class="s1"> </span><span class="s8">"0km"</span><span class="s7">,</span><span class="s1"> time</span><span class="s7">:</span><span class="s1"> </span><span class="s8">"30min"</span><span class="s7">,</span><span class="s1"> intensity</span><span class="s7">:</span><span class="s1"> </span><span class="s8">"Easy"</span><span class="s7">,</span><span class="s1"> rpe</span><span class="s7">:</span><span class="s1"> </span><span class="s14">3</span><span class="s1"> </span><span class="s7">});</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                        </span></span><span class="s7">}</span><span class="s1"> </span><span class="s12">else</span><span class="s1"> </span><span class="s12">if</span><span class="s1"> </span><span class="s7">(</span><span class="s1">daysOfWeek</span><span class="s7">[</span><span class="s1">i</span><span class="s7">]</span><span class="s1"> </span><span class="s7">===</span><span class="s1"> </span><span class="s8">"Saturday"</span><span class="s7">)</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                            </span>workouts</span><span class="s7">.</span><span class="s1">push</span><span class="s7">({</span><span class="s1"> </span><span class="s7">...</span><span class="s1">dayWorkout</span><span class="s7">,</span><span class="s1"> sport</span><span class="s7">:</span><span class="s1"> </span><span class="s8">"Brick"</span><span class="s7">,</span><span class="s1"> type</span><span class="s7">:</span><span class="s1"> </span><span class="s8">"Bike 60-75min + Run 4-5km"</span><span class="s7">,</span><span class="s1"> distance</span><span class="s7">:</span><span class="s1"> </span><span class="s8">"Bike: 20-25km, Run: 4-5km"</span><span class="s7">,</span><span class="s1"> time</span><span class="s7">:</span><span class="s1"> </span><span class="s8">"Bike: 60-75min, Run: 25-30min"</span><span class="s7">,</span><span class="s1"> intensity</span><span class="s7">:</span><span class="s1"> </span><span class="s8">"Moderate"</span><span class="s7">,</span><span class="s1"> rpe</span><span class="s7">:</span><span class="s1"> </span><span class="s14">7</span><span class="s7">,</span><span class="s1"> isBrick</span><span class="s7">:</span><span class="s1"> </span><span class="s12">true</span><span class="s1"> </span><span class="s7">});</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                        </span></span><span class="s7">}</span><span class="s1"> </span><span class="s12">else</span><span class="s1"> </span><span class="s12">if</span><span class="s1"> </span><span class="s7">(</span><span class="s1">daysOfWeek</span><span class="s7">[</span><span class="s1">i</span><span class="s7">]</span><span class="s1"> </span><span class="s7">===</span><span class="s1"> </span><span class="s8">"Sunday"</span><span class="s7">)</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                            </span>workouts</span><span class="s7">.</span><span class="s1">push</span><span class="s7">({</span><span class="s1"> </span><span class="s7">...</span><span class="s1">dayWorkout</span><span class="s7">,</span><span class="s1"> sport</span><span class="s7">:</span><span class="s1"> </span><span class="s8">"Run"</span><span class="s7">,</span><span class="s1"> type</span><span class="s7">:</span><span class="s1"> </span><span class="s8">"long easy"</span><span class="s7">,</span><span class="s1"> distance</span><span class="s7">:</span><span class="s1"> </span><span class="s8">"8-10km"</span><span class="s7">,</span><span class="s1"> time</span><span class="s7">:</span><span class="s1"> </span><span class="s8">"60-75min"</span><span class="s7">,</span><span class="s1"> intensity</span><span class="s7">:</span><span class="s1"> </span><span class="s8">"Easy"</span><span class="s7">,</span><span class="s1"> rpe</span><span class="s7">:</span><span class="s1"> </span><span class="s14">5</span><span class="s1"> </span><span class="s7">});</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                        </span></span><span class="s7">}</span></p>
<p class="p5"><span class="s4"><span class="Apple-converted-space">                    </span></span><span class="s7">}</span><span class="s4"> </span><span class="s12">else</span><span class="s4"> </span><span class="s12">if</span><span class="s4"> </span><span class="s7">(</span><span class="s4">week </span><span class="s7">&gt;=</span><span class="s4"> </span><span class="s14">7</span><span class="s4"> </span><span class="s7">&amp;&amp;</span><span class="s4"> week </span><span class="s7">&lt;=</span><span class="s4"> </span><span class="s14">9</span><span class="s7">)</span><span class="s4"> </span><span class="s7">{</span><span class="s4"> </span><span class="s1">// Weeks 7-9: Build volume and simulate race effort</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                        </span></span><span class="s12">if</span><span class="s1"> </span><span class="s7">(</span><span class="s1">daysOfWeek</span><span class="s7">[</span><span class="s1">i</span><span class="s7">]</span><span class="s1"> </span><span class="s7">===</span><span class="s1"> </span><span class="s8">"Monday"</span><span class="s7">)</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                            </span>workouts</span><span class="s7">.</span><span class="s1">push</span><span class="s7">({</span><span class="s1"> </span><span class="s7">...</span><span class="s1">dayWorkout</span><span class="s7">,</span><span class="s1"> sport</span><span class="s7">:</span><span class="s1"> </span><span class="s8">"Swim"</span><span class="s7">,</span><span class="s1"> type</span><span class="s7">:</span><span class="s1"> </span><span class="s8">"volume + race pace"</span><span class="s7">,</span><span class="s1"> distance</span><span class="s7">:</span><span class="s1"> </span><span class="s8">"1.2-1.5km"</span><span class="s7">,</span><span class="s1"> time</span><span class="s7">:</span><span class="s1"> </span><span class="s8">"55min"</span><span class="s7">,</span><span class="s1"> intensity</span><span class="s7">:</span><span class="s1"> </span><span class="s8">"Moderate-Hard"</span><span class="s7">,</span><span class="s1"> rpe</span><span class="s7">:</span><span class="s1"> </span><span class="s14">7</span><span class="s1"> </span><span class="s7">});</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                            </span>workouts</span><span class="s7">.</span><span class="s1">push</span><span class="s7">({</span><span class="s1"> </span><span class="s7">...</span><span class="s1">dayWorkout</span><span class="s7">,</span><span class="s1"> sport</span><span class="s7">:</span><span class="s1"> </span><span class="s8">"Strength"</span><span class="s7">,</span><span class="s1"> type</span><span class="s7">:</span><span class="s1"> </span><span class="s8">"Strength Training"</span><span class="s7">,</span><span class="s1"> distance</span><span class="s7">:</span><span class="s1"> </span><span class="s8">"0km"</span><span class="s7">,</span><span class="s1"> time</span><span class="s7">:</span><span class="s1"> </span><span class="s8">"30-45min"</span><span class="s7">,</span><span class="s1"> intensity</span><span class="s7">:</span><span class="s1"> </span><span class="s8">"Moderate"</span><span class="s7">,</span><span class="s1"> rpe</span><span class="s7">:</span><span class="s1"> </span><span class="s14">6</span><span class="s1"> </span><span class="s7">});</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                        </span></span><span class="s7">}</span><span class="s1"> </span><span class="s12">else</span><span class="s1"> </span><span class="s12">if</span><span class="s1"> </span><span class="s7">(</span><span class="s1">daysOfWeek</span><span class="s7">[</span><span class="s1">i</span><span class="s7">]</span><span class="s1"> </span><span class="s7">===</span><span class="s1"> </span><span class="s8">"Tuesday"</span><span class="s7">)</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                            </span>workouts</span><span class="s7">.</span><span class="s1">push</span><span class="s7">({</span><span class="s1"> </span><span class="s7">...</span><span class="s1">dayWorkout</span><span class="s7">,</span><span class="s1"> sport</span><span class="s7">:</span><span class="s1"> </span><span class="s8">"Run"</span><span class="s7">,</span><span class="s1"> type</span><span class="s7">:</span><span class="s1"> </span><span class="s8">"tempo run"</span><span class="s7">,</span><span class="s1"> distance</span><span class="s7">:</span><span class="s1"> </span><span class="s8">"7-8km"</span><span class="s7">,</span><span class="s1"> time</span><span class="s7">:</span><span class="s1"> </span><span class="s8">"45min"</span><span class="s7">,</span><span class="s1"> intensity</span><span class="s7">:</span><span class="s1"> </span><span class="s8">"Hard"</span><span class="s7">,</span><span class="s1"> rpe</span><span class="s7">:</span><span class="s1"> </span><span class="s14">8</span><span class="s1"> </span><span class="s7">});</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                        </span></span><span class="s7">}</span><span class="s1"> </span><span class="s12">else</span><span class="s1"> </span><span class="s12">if</span><span class="s1"> </span><span class="s7">(</span><span class="s1">daysOfWeek</span><span class="s7">[</span><span class="s1">i</span><span class="s7">]</span><span class="s1"> </span><span class="s7">===</span><span class="s1"> </span><span class="s8">"Wednesday"</span><span class="s7">)</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                            </span>workouts</span><span class="s7">.</span><span class="s1">push</span><span class="s7">({</span><span class="s1"> </span><span class="s7">...</span><span class="s1">dayWorkout</span><span class="s7">,</span><span class="s1"> sport</span><span class="s7">:</span><span class="s1"> </span><span class="s8">"Bike"</span><span class="s7">,</span><span class="s1"> type</span><span class="s7">:</span><span class="s1"> </span><span class="s8">"long endurance"</span><span class="s7">,</span><span class="s1"> distance</span><span class="s7">:</span><span class="s1"> </span><span class="s8">"35-45km"</span><span class="s7">,</span><span class="s1"> time</span><span class="s7">:</span><span class="s1"> </span><span class="s8">"90-120min"</span><span class="s7">,</span><span class="s1"> intensity</span><span class="s7">:</span><span class="s1"> </span><span class="s8">"Moderate"</span><span class="s7">,</span><span class="s1"> rpe</span><span class="s7">:</span><span class="s1"> </span><span class="s14">6</span><span class="s1"> </span><span class="s7">});</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                            </span>workouts</span><span class="s7">.</span><span class="s1">push</span><span class="s7">({</span><span class="s1"> </span><span class="s7">...</span><span class="s1">dayWorkout</span><span class="s7">,</span><span class="s1"> sport</span><span class="s7">:</span><span class="s1"> </span><span class="s8">"Core"</span><span class="s7">,</span><span class="s1"> type</span><span class="s7">:</span><span class="s1"> </span><span class="s8">"Core Strength"</span><span class="s7">,</span><span class="s1"> distance</span><span class="s7">:</span><span class="s1"> </span><span class="s8">"0km"</span><span class="s7">,</span><span class="s1"> time</span><span class="s7">:</span><span class="s1"> </span><span class="s8">"20-30min"</span><span class="s7">,</span><span class="s1"> intensity</span><span class="s7">:</span><span class="s1"> </span><span class="s8">"Moderate"</span><span class="s7">,</span><span class="s1"> rpe</span><span class="s7">:</span><span class="s1"> </span><span class="s14">5</span><span class="s1"> </span><span class="s7">});</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                        </span></span><span class="s7">}</span><span class="s1"> </span><span class="s12">else</span><span class="s1"> </span><span class="s12">if</span><span class="s1"> </span><span class="s7">(</span><span class="s1">daysOfWeek</span><span class="s7">[</span><span class="s1">i</span><span class="s7">]</span><span class="s1"> </span><span class="s7">===</span><span class="s1"> </span><span class="s8">"Thursday"</span><span class="s7">)</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                            </span>workouts</span><span class="s7">.</span><span class="s1">push</span><span class="s7">({</span><span class="s1"> </span><span class="s7">...</span><span class="s1">dayWorkout</span><span class="s7">,</span><span class="s1"> sport</span><span class="s7">:</span><span class="s1"> </span><span class="s8">"Swim"</span><span class="s7">,</span><span class="s1"> type</span><span class="s7">:</span><span class="s1"> </span><span class="s8">"endurance focus"</span><span class="s7">,</span><span class="s1"> distance</span><span class="s7">:</span><span class="s1"> </span><span class="s8">"1.5-1.8km"</span><span class="s7">,</span><span class="s1"> time</span><span class="s7">:</span><span class="s1"> </span><span class="s8">"60min"</span><span class="s7">,</span><span class="s1"> intensity</span><span class="s7">:</span><span class="s1"> </span><span class="s8">"Moderate"</span><span class="s7">,</span><span class="s1"> rpe</span><span class="s7">:</span><span class="s1"> </span><span class="s14">6</span><span class="s1"> </span><span class="s7">});</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                        </span></span><span class="s7">}</span><span class="s1"> </span><span class="s12">else</span><span class="s1"> </span><span class="s12">if</span><span class="s1"> </span><span class="s7">(</span><span class="s1">daysOfWeek</span><span class="s7">[</span><span class="s1">i</span><span class="s7">]</span><span class="s1"> </span><span class="s7">===</span><span class="s1"> </span><span class="s8">"Friday"</span><span class="s7">)</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                            </span>workouts</span><span class="s7">.</span><span class="s1">push</span><span class="s7">({</span><span class="s1"> </span><span class="s7">...</span><span class="s1">dayWorkout</span><span class="s7">,</span><span class="s1"> sport</span><span class="s7">:</span><span class="s1"> </span><span class="s8">"Rest"</span><span class="s7">,</span><span class="s1"> type</span><span class="s7">:</span><span class="s1"> </span><span class="s8">"Active Recovery/Rest"</span><span class="s7">,</span><span class="s1"> distance</span><span class="s7">:</span><span class="s1"> </span><span class="s8">"0km"</span><span class="s7">,</span><span class="s1"> time</span><span class="s7">:</span><span class="s1"> </span><span class="s8">"0min"</span><span class="s7">,</span><span class="s1"> intensity</span><span class="s7">:</span><span class="s1"> </span><span class="s8">"N/A"</span><span class="s7">,</span><span class="s1"> rpe</span><span class="s7">:</span><span class="s1"> </span><span class="s14">0</span><span class="s1"> </span><span class="s7">});</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                        </span></span><span class="s7">}</span><span class="s1"> </span><span class="s12">else</span><span class="s1"> </span><span class="s12">if</span><span class="s1"> </span><span class="s7">(</span><span class="s1">daysOfWeek</span><span class="s7">[</span><span class="s1">i</span><span class="s7">]</span><span class="s1"> </span><span class="s7">===</span><span class="s1"> </span><span class="s8">"Saturday"</span><span class="s7">)</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p7"><span class="s4"><span class="Apple-converted-space">                            </span>workouts</span><span class="s7">.</span><span class="s4">push</span><span class="s7">({</span><span class="s4"> </span><span class="s7">...</span><span class="s4">dayWorkout</span><span class="s7">,</span><span class="s4"> sport</span><span class="s7">:</span><span class="s4"> </span><span class="s1">"Brick"</span><span class="s7">,</span><span class="s4"> type</span><span class="s7">:</span><span class="s4"> </span><span class="s1">"Bike 75-90min + Run 5-6km"</span><span class="s7">,</span><span class="s4"> distance</span><span class="s7">:</span><span class="s4"> </span><span class="s1">"Bike: 25-30km, Run: 5-6km"</span><span class="s7">,</span><span class="s4"> time</span><span class="s7">:</span><span class="s4"> </span><span class="s1">"Bike: 75-90min, Run: 30-40min"</span><span class="s7">,</span><span class="s4"> intensity</span><span class="s7">:</span><span class="s4"> </span><span class="s1">"Moderate-Hard"</span><span class="s7">,</span><span class="s4"> rpe</span><span class="s7">:</span><span class="s4"> </span><span class="s14">8</span><span class="s7">,</span><span class="s4"> isBrick</span><span class="s7">:</span><span class="s4"> </span><span class="s12">true</span><span class="s4"> </span><span class="s7">});</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                        </span></span><span class="s7">}</span><span class="s1"> </span><span class="s12">else</span><span class="s1"> </span><span class="s12">if</span><span class="s1"> </span><span class="s7">(</span><span class="s1">daysOfWeek</span><span class="s7">[</span><span class="s1">i</span><span class="s7">]</span><span class="s1"> </span><span class="s7">===</span><span class="s1"> </span><span class="s8">"Sunday"</span><span class="s7">)</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                            </span>workouts</span><span class="s7">.</span><span class="s1">push</span><span class="s7">({</span><span class="s1"> </span><span class="s7">...</span><span class="s1">dayWorkout</span><span class="s7">,</span><span class="s1"> sport</span><span class="s7">:</span><span class="s1"> </span><span class="s8">"Run"</span><span class="s7">,</span><span class="s1"> type</span><span class="s7">:</span><span class="s1"> </span><span class="s8">"long run"</span><span class="s7">,</span><span class="s1"> distance</span><span class="s7">:</span><span class="s1"> </span><span class="s8">"10-12km"</span><span class="s7">,</span><span class="s1"> time</span><span class="s7">:</span><span class="s1"> </span><span class="s8">"75-90min"</span><span class="s7">,</span><span class="s1"> intensity</span><span class="s7">:</span><span class="s1"> </span><span class="s8">"Easy"</span><span class="s7">,</span><span class="s1"> rpe</span><span class="s7">:</span><span class="s1"> </span><span class="s14">6</span><span class="s1"> </span><span class="s7">});</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                        </span></span><span class="s7">}</span></p>
<p class="p5"><span class="s4"><span class="Apple-converted-space">                    </span></span><span class="s7">}</span><span class="s4"> </span><span class="s12">else</span><span class="s4"> </span><span class="s12">if</span><span class="s4"> </span><span class="s7">(</span><span class="s4">week </span><span class="s7">&gt;=</span><span class="s4"> </span><span class="s14">10</span><span class="s4"> </span><span class="s7">&amp;&amp;</span><span class="s4"> week </span><span class="s7">&lt;=</span><span class="s4"> </span><span class="s14">11</span><span class="s7">)</span><span class="s4"> </span><span class="s7">{</span><span class="s4"> </span><span class="s1">// Weeks 10-11: Peak volume, simulate race pace bricks</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                        </span></span><span class="s12">if</span><span class="s1"> </span><span class="s7">(</span><span class="s1">daysOfWeek</span><span class="s7">[</span><span class="s1">i</span><span class="s7">]</span><span class="s1"> </span><span class="s7">===</span><span class="s1"> </span><span class="s8">"Monday"</span><span class="s7">)</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                            </span>workouts</span><span class="s7">.</span><span class="s1">push</span><span class="s7">({</span><span class="s1"> </span><span class="s7">...</span><span class="s1">dayWorkout</span><span class="s7">,</span><span class="s1"> sport</span><span class="s7">:</span><span class="s1"> </span><span class="s8">"Swim"</span><span class="s7">,</span><span class="s1"> type</span><span class="s7">:</span><span class="s1"> </span><span class="s8">"peak volume + race pace"</span><span class="s7">,</span><span class="s1"> distance</span><span class="s7">:</span><span class="s1"> </span><span class="s8">"1.5-1.8km"</span><span class="s7">,</span><span class="s1"> time</span><span class="s7">:</span><span class="s1"> </span><span class="s8">"60min"</span><span class="s7">,</span><span class="s1"> intensity</span><span class="s7">:</span><span class="s1"> </span><span class="s8">"Hard"</span><span class="s7">,</span><span class="s1"> rpe</span><span class="s7">:</span><span class="s1"> </span><span class="s14">8</span><span class="s1"> </span><span class="s7">});</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                            </span>workouts</span><span class="s7">.</span><span class="s1">push</span><span class="s7">({</span><span class="s1"> </span><span class="s7">...</span><span class="s1">dayWorkout</span><span class="s7">,</span><span class="s1"> sport</span><span class="s7">:</span><span class="s1"> </span><span class="s8">"Strength"</span><span class="s7">,</span><span class="s1"> type</span><span class="s7">:</span><span class="s1"> </span><span class="s8">"Strength Training"</span><span class="s7">,</span><span class="s1"> distance</span><span class="s7">:</span><span class="s1"> </span><span class="s8">"0km"</span><span class="s7">,</span><span class="s1"> time</span><span class="s7">:</span><span class="s1"> </span><span class="s8">"30-45min"</span><span class="s7">,</span><span class="s1"> intensity</span><span class="s7">:</span><span class="s1"> </span><span class="s8">"Moderate"</span><span class="s7">,</span><span class="s1"> rpe</span><span class="s7">:</span><span class="s1"> </span><span class="s14">6</span><span class="s1"> </span><span class="s7">});</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                        </span></span><span class="s7">}</span><span class="s1"> </span><span class="s12">else</span><span class="s1"> </span><span class="s12">if</span><span class="s1"> </span><span class="s7">(</span><span class="s1">daysOfWeek</span><span class="s7">[</span><span class="s1">i</span><span class="s7">]</span><span class="s1"> </span><span class="s7">===</span><span class="s1"> </span><span class="s8">"Tuesday"</span><span class="s7">)</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                            </span>workouts</span><span class="s7">.</span><span class="s1">push</span><span class="s7">({</span><span class="s1"> </span><span class="s7">...</span><span class="s1">dayWorkout</span><span class="s7">,</span><span class="s1"> sport</span><span class="s7">:</span><span class="s1"> </span><span class="s8">"Run"</span><span class="s7">,</span><span class="s1"> type</span><span class="s7">:</span><span class="s1"> </span><span class="s8">"race pace intervals"</span><span class="s7">,</span><span class="s1"> distance</span><span class="s7">:</span><span class="s1"> </span><span class="s8">"8-9km"</span><span class="s7">,</span><span class="s1"> time</span><span class="s7">:</span><span class="s1"> </span><span class="s8">"50min"</span><span class="s7">,</span><span class="s1"> intensity</span><span class="s7">:</span><span class="s1"> </span><span class="s8">"Very Hard"</span><span class="s7">,</span><span class="s1"> rpe</span><span class="s7">:</span><span class="s1"> </span><span class="s14">9</span><span class="s1"> </span><span class="s7">});</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                        </span></span><span class="s7">}</span><span class="s1"> </span><span class="s12">else</span><span class="s1"> </span><span class="s12">if</span><span class="s1"> </span><span class="s7">(</span><span class="s1">daysOfWeek</span><span class="s7">[</span><span class="s1">i</span><span class="s7">]</span><span class="s1"> </span><span class="s7">===</span><span class="s1"> </span><span class="s8">"Wednesday"</span><span class="s7">)</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                            </span>workouts</span><span class="s7">.</span><span class="s1">push</span><span class="s7">({</span><span class="s1"> </span><span class="s7">...</span><span class="s1">dayWorkout</span><span class="s7">,</span><span class="s1"> sport</span><span class="s7">:</span><span class="s1"> </span><span class="s8">"Bike"</span><span class="s7">,</span><span class="s1"> type</span><span class="s7">:</span><span class="s1"> </span><span class="s8">"race pace tempo"</span><span class="s7">,</span><span class="s1"> distance</span><span class="s7">:</span><span class="s1"> </span><span class="s8">"40-50km"</span><span class="s7">,</span><span class="s1"> time</span><span class="s7">:</span><span class="s1"> </span><span class="s8">"100-130min"</span><span class="s7">,</span><span class="s1"> intensity</span><span class="s7">:</span><span class="s1"> </span><span class="s8">"Hard"</span><span class="s7">,</span><span class="s1"> rpe</span><span class="s7">:</span><span class="s1"> </span><span class="s14">8</span><span class="s1"> </span><span class="s7">});</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                            </span>workouts</span><span class="s7">.</span><span class="s1">push</span><span class="s7">({</span><span class="s1"> </span><span class="s7">...</span><span class="s1">dayWorkout</span><span class="s7">,</span><span class="s1"> sport</span><span class="s7">:</span><span class="s1"> </span><span class="s8">"Core"</span><span class="s7">,</span><span class="s1"> type</span><span class="s7">:</span><span class="s1"> </span><span class="s8">"Core Strength"</span><span class="s7">,</span><span class="s1"> distance</span><span class="s7">:</span><span class="s1"> </span><span class="s8">"0km"</span><span class="s7">,</span><span class="s1"> time</span><span class="s7">:</span><span class="s1"> </span><span class="s8">"20-30min"</span><span class="s7">,</span><span class="s1"> intensity</span><span class="s7">:</span><span class="s1"> </span><span class="s8">"Moderate"</span><span class="s7">,</span><span class="s1"> rpe</span><span class="s7">:</span><span class="s1"> </span><span class="s14">5</span><span class="s1"> </span><span class="s7">});</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                        </span></span><span class="s7">}</span><span class="s1"> </span><span class="s12">else</span><span class="s1"> </span><span class="s12">if</span><span class="s1"> </span><span class="s7">(</span><span class="s1">daysOfWeek</span><span class="s7">[</span><span class="s1">i</span><span class="s7">]</span><span class="s1"> </span><span class="s7">===</span><span class="s1"> </span><span class="s8">"Thursday"</span><span class="s7">)</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                            </span>workouts</span><span class="s7">.</span><span class="s1">push</span><span class="s7">({</span><span class="s1"> </span><span class="s7">...</span><span class="s1">dayWorkout</span><span class="s7">,</span><span class="s1"> sport</span><span class="s7">:</span><span class="s1"> </span><span class="s8">"Swim"</span><span class="s7">,</span><span class="s1"> type</span><span class="s7">:</span><span class="s1"> </span><span class="s8">"simulated race"</span><span class="s7">,</span><span class="s1"> distance</span><span class="s7">:</span><span class="s1"> </span><span class="s8">"1.8-2km"</span><span class="s7">,</span><span class="s1"> time</span><span class="s7">:</span><span class="s1"> </span><span class="s8">"65min"</span><span class="s7">,</span><span class="s1"> intensity</span><span class="s7">:</span><span class="s1"> </span><span class="s8">"Hard"</span><span class="s7">,</span><span class="s1"> rpe</span><span class="s7">:</span><span class="s1"> </span><span class="s14">8</span><span class="s1"> </span><span class="s7">});</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                        </span></span><span class="s7">}</span><span class="s1"> </span><span class="s12">else</span><span class="s1"> </span><span class="s12">if</span><span class="s1"> </span><span class="s7">(</span><span class="s1">daysOfWeek</span><span class="s7">[</span><span class="s1">i</span><span class="s7">]</span><span class="s1"> </span><span class="s7">===</span><span class="s1"> </span><span class="s8">"Friday"</span><span class="s7">)</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                            </span>workouts</span><span class="s7">.</span><span class="s1">push</span><span class="s7">({</span><span class="s1"> </span><span class="s7">...</span><span class="s1">dayWorkout</span><span class="s7">,</span><span class="s1"> sport</span><span class="s7">:</span><span class="s1"> </span><span class="s8">"Rest"</span><span class="s7">,</span><span class="s1"> type</span><span class="s7">:</span><span class="s1"> </span><span class="s8">"Active Recovery/Rest"</span><span class="s7">,</span><span class="s1"> distance</span><span class="s7">:</span><span class="s1"> </span><span class="s8">"0km"</span><span class="s7">,</span><span class="s1"> time</span><span class="s7">:</span><span class="s1"> </span><span class="s8">"0min"</span><span class="s7">,</span><span class="s1"> intensity</span><span class="s7">:</span><span class="s1"> </span><span class="s8">"N/A"</span><span class="s7">,</span><span class="s1"> rpe</span><span class="s7">:</span><span class="s1"> </span><span class="s14">0</span><span class="s1"> </span><span class="s7">});</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                        </span></span><span class="s7">}</span><span class="s1"> </span><span class="s12">else</span><span class="s1"> </span><span class="s12">if</span><span class="s1"> </span><span class="s7">(</span><span class="s1">daysOfWeek</span><span class="s7">[</span><span class="s1">i</span><span class="s7">]</span><span class="s1"> </span><span class="s7">===</span><span class="s1"> </span><span class="s8">"Saturday"</span><span class="s7">)</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p7"><span class="s4"><span class="Apple-converted-space">                            </span>workouts</span><span class="s7">.</span><span class="s4">push</span><span class="s7">({</span><span class="s4"> </span><span class="s7">...</span><span class="s4">dayWorkout</span><span class="s7">,</span><span class="s4"> sport</span><span class="s7">:</span><span class="s4"> </span><span class="s1">"Brick"</span><span class="s7">,</span><span class="s4"> type</span><span class="s7">:</span><span class="s4"> </span><span class="s1">"Simulated Race Effort (Bike + Run)"</span><span class="s7">,</span><span class="s4"> distance</span><span class="s7">:</span><span class="s4"> </span><span class="s1">"Bike: 20km, Run: 5km"</span><span class="s7">,</span><span class="s4"> time</span><span class="s7">:</span><span class="s4"> </span><span class="s1">"Bike: 45-60min, Run: 25-30min"</span><span class="s7">,</span><span class="s4"> intensity</span><span class="s7">:</span><span class="s4"> </span><span class="s1">"Race Pace"</span><span class="s7">,</span><span class="s4"> rpe</span><span class="s7">:</span><span class="s4"> </span><span class="s14">9</span><span class="s7">,</span><span class="s4"> isBrick</span><span class="s7">:</span><span class="s4"> </span><span class="s12">true</span><span class="s4"> </span><span class="s7">});</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                        </span></span><span class="s7">}</span><span class="s1"> </span><span class="s12">else</span><span class="s1"> </span><span class="s12">if</span><span class="s1"> </span><span class="s7">(</span><span class="s1">daysOfWeek</span><span class="s7">[</span><span class="s1">i</span><span class="s7">]</span><span class="s1"> </span><span class="s7">===</span><span class="s1"> </span><span class="s8">"Sunday"</span><span class="s7">)</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                            </span>workouts</span><span class="s7">.</span><span class="s1">push</span><span class="s7">({</span><span class="s1"> </span><span class="s7">...</span><span class="s1">dayWorkout</span><span class="s7">,</span><span class="s1"> sport</span><span class="s7">:</span><span class="s1"> </span><span class="s8">"Run"</span><span class="s7">,</span><span class="s1"> type</span><span class="s7">:</span><span class="s1"> </span><span class="s8">"moderate long run"</span><span class="s7">,</span><span class="s1"> distance</span><span class="s7">:</span><span class="s1"> </span><span class="s8">"9-11km"</span><span class="s7">,</span><span class="s1"> time</span><span class="s7">:</span><span class="s1"> </span><span class="s8">"70-80min"</span><span class="s7">,</span><span class="s1"> intensity</span><span class="s7">:</span><span class="s1"> </span><span class="s8">"Moderate"</span><span class="s7">,</span><span class="s1"> rpe</span><span class="s7">:</span><span class="s1"> </span><span class="s14">7</span><span class="s1"> </span><span class="s7">});</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                        </span></span><span class="s7">}</span></p>
<p class="p5"><span class="s4"><span class="Apple-converted-space">                    </span></span><span class="s7">}</span><span class="s4"> </span><span class="s12">else</span><span class="s4"> </span><span class="s12">if</span><span class="s4"> </span><span class="s7">(</span><span class="s4">week </span><span class="s7">===</span><span class="s4"> </span><span class="s14">12</span><span class="s7">)</span><span class="s4"> </span><span class="s7">{</span><span class="s4"> </span><span class="s1">// Week 12: Simulated sprint triathlon</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                        </span></span><span class="s12">if</span><span class="s1"> </span><span class="s7">(</span><span class="s1">daysOfWeek</span><span class="s7">[</span><span class="s1">i</span><span class="s7">]</span><span class="s1"> </span><span class="s7">===</span><span class="s1"> </span><span class="s8">"Monday"</span><span class="s7">)</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                            </span>workouts</span><span class="s7">.</span><span class="s1">push</span><span class="s7">({</span><span class="s1"> </span><span class="s7">...</span><span class="s1">dayWorkout</span><span class="s7">,</span><span class="s1"> sport</span><span class="s7">:</span><span class="s1"> </span><span class="s8">"Swim"</span><span class="s7">,</span><span class="s1"> type</span><span class="s7">:</span><span class="s1"> </span><span class="s8">"light shakeout"</span><span class="s7">,</span><span class="s1"> distance</span><span class="s7">:</span><span class="s1"> </span><span class="s8">"0.5km"</span><span class="s7">,</span><span class="s1"> time</span><span class="s7">:</span><span class="s1"> </span><span class="s8">"20min"</span><span class="s7">,</span><span class="s1"> intensity</span><span class="s7">:</span><span class="s1"> </span><span class="s8">"Easy"</span><span class="s7">,</span><span class="s1"> rpe</span><span class="s7">:</span><span class="s1"> </span><span class="s14">4</span><span class="s1"> </span><span class="s7">});</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                        </span></span><span class="s7">}</span><span class="s1"> </span><span class="s12">else</span><span class="s1"> </span><span class="s12">if</span><span class="s1"> </span><span class="s7">(</span><span class="s1">daysOfWeek</span><span class="s7">[</span><span class="s1">i</span><span class="s7">]</span><span class="s1"> </span><span class="s7">===</span><span class="s1"> </span><span class="s8">"Tuesday"</span><span class="s7">)</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                            </span>workouts</span><span class="s7">.</span><span class="s1">push</span><span class="s7">({</span><span class="s1"> </span><span class="s7">...</span><span class="s1">dayWorkout</span><span class="s7">,</span><span class="s1"> sport</span><span class="s7">:</span><span class="s1"> </span><span class="s8">"Run"</span><span class="s7">,</span><span class="s1"> type</span><span class="s7">:</span><span class="s1"> </span><span class="s8">"light shakeout"</span><span class="s7">,</span><span class="s1"> distance</span><span class="s7">:</span><span class="s1"> </span><span class="s8">"2km"</span><span class="s7">,</span><span class="s1"> time</span><span class="s7">:</span><span class="s1"> </span><span class="s8">"15min"</span><span class="s7">,</span><span class="s1"> intensity</span><span class="s7">:</span><span class="s1"> </span><span class="s8">"Easy"</span><span class="s7">,</span><span class="s1"> rpe</span><span class="s7">:</span><span class="s1"> </span><span class="s14">4</span><span class="s1"> </span><span class="s7">});</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                        </span></span><span class="s7">}</span><span class="s1"> </span><span class="s12">else</span><span class="s1"> </span><span class="s12">if</span><span class="s1"> </span><span class="s7">(</span><span class="s1">daysOfWeek</span><span class="s7">[</span><span class="s1">i</span><span class="s7">]</span><span class="s1"> </span><span class="s7">===</span><span class="s1"> </span><span class="s8">"Wednesday"</span><span class="s7">)</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                            </span>workouts</span><span class="s7">.</span><span class="s1">push</span><span class="s7">({</span><span class="s1"> </span><span class="s7">...</span><span class="s1">dayWorkout</span><span class="s7">,</span><span class="s1"> sport</span><span class="s7">:</span><span class="s1"> </span><span class="s8">"Bike"</span><span class="s7">,</span><span class="s1"> type</span><span class="s7">:</span><span class="s1"> </span><span class="s8">"light shakeout"</span><span class="s7">,</span><span class="s1"> distance</span><span class="s7">:</span><span class="s1"> </span><span class="s8">"10km"</span><span class="s7">,</span><span class="s1"> time</span><span class="s7">:</span><span class="s1"> </span><span class="s8">"30min"</span><span class="s7">,</span><span class="s1"> intensity</span><span class="s7">:</span><span class="s1"> </span><span class="s8">"Easy"</span><span class="s7">,</span><span class="s1"> rpe</span><span class="s7">:</span><span class="s1"> </span><span class="s14">4</span><span class="s1"> </span><span class="s7">});</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                        </span></span><span class="s7">}</span><span class="s1"> </span><span class="s12">else</span><span class="s1"> </span><span class="s12">if</span><span class="s1"> </span><span class="s7">(</span><span class="s1">daysOfWeek</span><span class="s7">[</span><span class="s1">i</span><span class="s7">]</span><span class="s1"> </span><span class="s7">===</span><span class="s1"> </span><span class="s8">"Thursday"</span><span class="s1"> </span><span class="s7">||</span><span class="s1"> daysOfWeek</span><span class="s7">[</span><span class="s1">i</span><span class="s7">]</span><span class="s1"> </span><span class="s7">===</span><span class="s1"> </span><span class="s8">"Friday"</span><span class="s7">)</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                            </span>workouts</span><span class="s7">.</span><span class="s1">push</span><span class="s7">({</span><span class="s1"> </span><span class="s7">...</span><span class="s1">dayWorkout</span><span class="s7">,</span><span class="s1"> sport</span><span class="s7">:</span><span class="s1"> </span><span class="s8">"Rest"</span><span class="s7">,</span><span class="s1"> type</span><span class="s7">:</span><span class="s1"> </span><span class="s8">"Complete Rest"</span><span class="s7">,</span><span class="s1"> distance</span><span class="s7">:</span><span class="s1"> </span><span class="s8">"0km"</span><span class="s7">,</span><span class="s1"> time</span><span class="s7">:</span><span class="s1"> </span><span class="s8">"0min"</span><span class="s7">,</span><span class="s1"> intensity</span><span class="s7">:</span><span class="s1"> </span><span class="s8">"N/A"</span><span class="s7">,</span><span class="s1"> rpe</span><span class="s7">:</span><span class="s1"> </span><span class="s14">0</span><span class="s1"> </span><span class="s7">});</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                        </span></span><span class="s7">}</span><span class="s1"> </span><span class="s12">else</span><span class="s1"> </span><span class="s12">if</span><span class="s1"> </span><span class="s7">(</span><span class="s1">daysOfWeek</span><span class="s7">[</span><span class="s1">i</span><span class="s7">]</span><span class="s1"> </span><span class="s7">===</span><span class="s1"> </span><span class="s8">"Saturday"</span><span class="s7">)</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p5"><span class="s4"><span class="Apple-converted-space">                            </span></span><span class="s1">// Ensure the simulated triathlon happens on the correct date for this week</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                            </span></span><span class="s12">const</span><span class="s1"> simulatedRaceDate </span><span class="s7">=</span><span class="s1"> </span><span class="s12">new</span><span class="s1"> </span><span class="s13">Date</span><span class="s7">(</span><span class="s1">weekStartDate</span><span class="s7">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                            </span>simulatedRaceDate</span><span class="s7">.</span><span class="s1">setDate</span><span class="s7">(</span><span class="s1">simulatedRaceDate</span><span class="s7">.</span><span class="s1">getDate</span><span class="s7">()</span><span class="s1"> </span><span class="s7">+</span><span class="s1"> </span><span class="s14">5</span><span class="s7">);</span><span class="s1"> </span><span class="s10">// Saturday</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                            </span>workouts</span><span class="s7">.</span><span class="s1">push</span><span class="s7">({</span><span class="s1"> </span><span class="s7">...</span><span class="s1">dayWorkout</span><span class="s7">,</span><span class="s1"> date</span><span class="s7">:</span><span class="s1"> simulatedRaceDate</span><span class="s7">.</span><span class="s1">toISOString</span><span class="s7">().</span><span class="s1">split</span><span class="s7">(</span><span class="s8">'T'</span><span class="s7">)[</span><span class="s14">0</span><span class="s7">],</span><span class="s1"> sport</span><span class="s7">:</span><span class="s1"> </span><span class="s8">"Triathlon"</span><span class="s7">,</span><span class="s1"> type</span><span class="s7">:</span><span class="s1"> </span><span class="s8">"Simulated Sprint Triathlon"</span><span class="s7">,</span><span class="s1"> distance</span><span class="s7">:</span><span class="s1"> </span><span class="s8">"Swim: 0.75km, Bike: 20km, Run: 5km"</span><span class="s7">,</span><span class="s1"> time</span><span class="s7">:</span><span class="s1"> </span><span class="s8">"Approx: 1h30m"</span><span class="s7">,</span><span class="s1"> intensity</span><span class="s7">:</span><span class="s1"> </span><span class="s8">"Race Effort"</span><span class="s7">,</span><span class="s1"> rpe</span><span class="s7">:</span><span class="s1"> </span><span class="s14">10</span><span class="s7">,</span><span class="s1"> isBrick</span><span class="s7">:</span><span class="s1"> </span><span class="s12">true</span><span class="s1"> </span><span class="s7">});</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                        </span></span><span class="s7">}</span><span class="s1"> </span><span class="s12">else</span><span class="s1"> </span><span class="s12">if</span><span class="s1"> </span><span class="s7">(</span><span class="s1">daysOfWeek</span><span class="s7">[</span><span class="s1">i</span><span class="s7">]</span><span class="s1"> </span><span class="s7">===</span><span class="s1"> </span><span class="s8">"Sunday"</span><span class="s7">)</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                            </span>workouts</span><span class="s7">.</span><span class="s1">push</span><span class="s7">({</span><span class="s1"> </span><span class="s7">...</span><span class="s1">dayWorkout</span><span class="s7">,</span><span class="s1"> sport</span><span class="s7">:</span><span class="s1"> </span><span class="s8">"Recovery"</span><span class="s7">,</span><span class="s1"> type</span><span class="s7">:</span><span class="s1"> </span><span class="s8">"Active Recovery"</span><span class="s7">,</span><span class="s1"> distance</span><span class="s7">:</span><span class="s1"> </span><span class="s8">"0km"</span><span class="s7">,</span><span class="s1"> time</span><span class="s7">:</span><span class="s1"> </span><span class="s8">"30min"</span><span class="s7">,</span><span class="s1"> intensity</span><span class="s7">:</span><span class="s1"> </span><span class="s8">"Very Easy"</span><span class="s7">,</span><span class="s1"> rpe</span><span class="s7">:</span><span class="s1"> </span><span class="s14">2</span><span class="s1"> </span><span class="s7">});</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                        </span></span><span class="s7">}</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                    </span></span><span class="s7">}</span><span class="s1"> </span><span class="s12">else</span><span class="s1"> </span><span class="s12">if</span><span class="s1"> </span><span class="s7">(</span><span class="s1">week </span><span class="s7">===</span><span class="s1"> </span><span class="s14">13</span><span class="s7">)</span><span class="s1"> </span><span class="s7">{</span><span class="s1"> </span><span class="s10">// Week 13: Taper</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                        </span></span><span class="s12">if</span><span class="s1"> </span><span class="s7">(</span><span class="s1">daysOfWeek</span><span class="s7">[</span><span class="s1">i</span><span class="s7">]</span><span class="s1"> </span><span class="s7">===</span><span class="s1"> </span><span class="s8">"Monday"</span><span class="s7">)</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                            </span>workouts</span><span class="s7">.</span><span class="s1">push</span><span class="s7">({</span><span class="s1"> </span><span class="s7">...</span><span class="s1">dayWorkout</span><span class="s7">,</span><span class="s1"> sport</span><span class="s7">:</span><span class="s1"> </span><span class="s8">"Swim"</span><span class="s7">,</span><span class="s1"> type</span><span class="s7">:</span><span class="s1"> </span><span class="s8">"short &amp; sharp"</span><span class="s7">,</span><span class="s1"> distance</span><span class="s7">:</span><span class="s1"> </span><span class="s8">"0.5km"</span><span class="s7">,</span><span class="s1"> time</span><span class="s7">:</span><span class="s1"> </span><span class="s8">"20min"</span><span class="s7">,</span><span class="s1"> intensity</span><span class="s7">:</span><span class="s1"> </span><span class="s8">"Moderate"</span><span class="s7">,</span><span class="s1"> rpe</span><span class="s7">:</span><span class="s1"> </span><span class="s14">6</span><span class="s1"> </span><span class="s7">});</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                        </span></span><span class="s7">}</span><span class="s1"> </span><span class="s12">else</span><span class="s1"> </span><span class="s12">if</span><span class="s1"> </span><span class="s7">(</span><span class="s1">daysOfWeek</span><span class="s7">[</span><span class="s1">i</span><span class="s7">]</span><span class="s1"> </span><span class="s7">===</span><span class="s1"> </span><span class="s8">"Tuesday"</span><span class="s7">)</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                            </span>workouts</span><span class="s7">.</span><span class="s1">push</span><span class="s7">({</span><span class="s1"> </span><span class="s7">...</span><span class="s1">dayWorkout</span><span class="s7">,</span><span class="s1"> sport</span><span class="s7">:</span><span class="s1"> </span><span class="s8">"Run"</span><span class="s7">,</span><span class="s1"> type</span><span class="s7">:</span><span class="s1"> </span><span class="s8">"short &amp; fast strides"</span><span class="s7">,</span><span class="s1"> distance</span><span class="s7">:</span><span class="s1"> </span><span class="s8">"3km"</span><span class="s7">,</span><span class="s1"> time</span><span class="s7">:</span><span class="s1"> </span><span class="s8">"20min"</span><span class="s7">,</span><span class="s1"> intensity</span><span class="s7">:</span><span class="s1"> </span><span class="s8">"Moderate"</span><span class="s7">,</span><span class="s1"> rpe</span><span class="s7">:</span><span class="s1"> </span><span class="s14">6</span><span class="s1"> </span><span class="s7">});</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                        </span></span><span class="s7">}</span><span class="s1"> </span><span class="s12">else</span><span class="s1"> </span><span class="s12">if</span><span class="s1"> </span><span class="s7">(</span><span class="s1">daysOfWeek</span><span class="s7">[</span><span class="s1">i</span><span class="s7">]</span><span class="s1"> </span><span class="s7">===</span><span class="s1"> </span><span class="s8">"Wednesday"</span><span class="s7">)</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                            </span>workouts</span><span class="s7">.</span><span class="s1">push</span><span class="s7">({</span><span class="s1"> </span><span class="s7">...</span><span class="s1">dayWorkout</span><span class="s7">,</span><span class="s1"> sport</span><span class="s7">:</span><span class="s1"> </span><span class="s8">"Bike"</span><span class="s7">,</span><span class="s1"> type</span><span class="s7">:</span><span class="s1"> </span><span class="s8">"short &amp; tempo"</span><span class="s7">,</span><span class="s1"> distance</span><span class="s7">:</span><span class="s1"> </span><span class="s8">"15km"</span><span class="s7">,</span><span class="s1"> time</span><span class="s7">:</span><span class="s1"> </span><span class="s8">"40min"</span><span class="s7">,</span><span class="s1"> intensity</span><span class="s7">:</span><span class="s1"> </span><span class="s8">"Moderate"</span><span class="s7">,</span><span class="s1"> rpe</span><span class="s7">:</span><span class="s1"> </span><span class="s14">6</span><span class="s1"> </span><span class="s7">});</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                        </span></span><span class="s7">}</span><span class="s1"> </span><span class="s12">else</span><span class="s1"> </span><span class="s12">if</span><span class="s1"> </span><span class="s7">(</span><span class="s1">daysOfWeek</span><span class="s7">[</span><span class="s1">i</span><span class="s7">]</span><span class="s1"> </span><span class="s7">===</span><span class="s1"> </span><span class="s8">"Thursday"</span><span class="s7">)</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                            </span>workouts</span><span class="s7">.</span><span class="s1">push</span><span class="s7">({</span><span class="s1"> </span><span class="s7">...</span><span class="s1">dayWorkout</span><span class="s7">,</span><span class="s1"> sport</span><span class="s7">:</span><span class="s1"> </span><span class="s8">"Rest"</span><span class="s7">,</span><span class="s1"> type</span><span class="s7">:</span><span class="s1"> </span><span class="s8">"Complete Rest"</span><span class="s7">,</span><span class="s1"> distance</span><span class="s7">:</span><span class="s1"> </span><span class="s8">"0km"</span><span class="s7">,</span><span class="s1"> time</span><span class="s7">:</span><span class="s1"> </span><span class="s8">"0min"</span><span class="s7">,</span><span class="s1"> intensity</span><span class="s7">:</span><span class="s1"> </span><span class="s8">"N/A"</span><span class="s7">,</span><span class="s1"> rpe</span><span class="s7">:</span><span class="s1"> </span><span class="s14">0</span><span class="s1"> </span><span class="s7">});</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                        </span></span><span class="s7">}</span><span class="s1"> </span><span class="s12">else</span><span class="s1"> </span><span class="s12">if</span><span class="s1"> </span><span class="s7">(</span><span class="s1">daysOfWeek</span><span class="s7">[</span><span class="s1">i</span><span class="s7">]</span><span class="s1"> </span><span class="s7">===</span><span class="s1"> </span><span class="s8">"Friday"</span><span class="s7">)</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                            </span>workouts</span><span class="s7">.</span><span class="s1">push</span><span class="s7">({</span><span class="s1"> </span><span class="s7">...</span><span class="s1">dayWorkout</span><span class="s7">,</span><span class="s1"> sport</span><span class="s7">:</span><span class="s1"> </span><span class="s8">"Recovery"</span><span class="s7">,</span><span class="s1"> type</span><span class="s7">:</span><span class="s1"> </span><span class="s8">"light mobility/stretching"</span><span class="s7">,</span><span class="s1"> distance</span><span class="s7">:</span><span class="s1"> </span><span class="s8">"0km"</span><span class="s7">,</span><span class="s1"> time</span><span class="s7">:</span><span class="s1"> </span><span class="s8">"30min"</span><span class="s7">,</span><span class="s1"> intensity</span><span class="s7">:</span><span class="s1"> </span><span class="s8">"Very Easy"</span><span class="s7">,</span><span class="s1"> rpe</span><span class="s7">:</span><span class="s1"> </span><span class="s14">2</span><span class="s1"> </span><span class="s7">});</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                        </span></span><span class="s7">}</span><span class="s1"> </span><span class="s12">else</span><span class="s1"> </span><span class="s12">if</span><span class="s1"> </span><span class="s7">(</span><span class="s1">daysOfWeek</span><span class="s7">[</span><span class="s1">i</span><span class="s7">]</span><span class="s1"> </span><span class="s7">===</span><span class="s1"> </span><span class="s8">"Saturday"</span><span class="s7">)</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                            </span>workouts</span><span class="s7">.</span><span class="s1">push</span><span class="s7">({</span><span class="s1"> </span><span class="s7">...</span><span class="s1">dayWorkout</span><span class="s7">,</span><span class="s1"> sport</span><span class="s7">:</span><span class="s1"> </span><span class="s8">"Active Recovery"</span><span class="s7">,</span><span class="s1"> type</span><span class="s7">:</span><span class="s1"> </span><span class="s8">"very light spin/walk"</span><span class="s7">,</span><span class="s1"> distance</span><span class="s7">:</span><span class="s1"> </span><span class="s8">"10km"</span><span class="s7">,</span><span class="s1"> time</span><span class="s7">:</span><span class="s1"> </span><span class="s8">"30min"</span><span class="s7">,</span><span class="s1"> intensity</span><span class="s7">:</span><span class="s1"> </span><span class="s8">"Very Easy"</span><span class="s7">,</span><span class="s1"> rpe</span><span class="s7">:</span><span class="s1"> </span><span class="s14">3</span><span class="s1"> </span><span class="s7">});</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                        </span></span><span class="s7">}</span><span class="s1"> </span><span class="s12">else</span><span class="s1"> </span><span class="s12">if</span><span class="s1"> </span><span class="s7">(</span><span class="s1">daysOfWeek</span><span class="s7">[</span><span class="s1">i</span><span class="s7">]</span><span class="s1"> </span><span class="s7">===</span><span class="s1"> </span><span class="s8">"Sunday"</span><span class="s7">)</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                            </span>workouts</span><span class="s7">.</span><span class="s1">push</span><span class="s7">({</span><span class="s1"> </span><span class="s7">...</span><span class="s1">dayWorkout</span><span class="s7">,</span><span class="s1"> sport</span><span class="s7">:</span><span class="s1"> </span><span class="s8">"Rest"</span><span class="s7">,</span><span class="s1"> type</span><span class="s7">:</span><span class="s1"> </span><span class="s8">"Complete Rest"</span><span class="s7">,</span><span class="s1"> distance</span><span class="s7">:</span><span class="s1"> </span><span class="s8">"0km"</span><span class="s7">,</span><span class="s1"> time</span><span class="s7">:</span><span class="s1"> </span><span class="s8">"0min"</span><span class="s7">,</span><span class="s1"> intensity</span><span class="s7">:</span><span class="s1"> </span><span class="s8">"N/A"</span><span class="s7">,</span><span class="s1"> rpe</span><span class="s7">:</span><span class="s1"> </span><span class="s14">0</span><span class="s1"> </span><span class="s7">});</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                        </span></span><span class="s7">}</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                    </span></span><span class="s7">}</span><span class="s1"> </span><span class="s12">else</span><span class="s1"> </span><span class="s12">if</span><span class="s1"> </span><span class="s7">(</span><span class="s1">week </span><span class="s7">===</span><span class="s1"> </span><span class="s14">14</span><span class="s7">)</span><span class="s1"> </span><span class="s7">{</span><span class="s1"> </span><span class="s10">// Week 14: Race Week</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                        </span></span><span class="s12">if</span><span class="s1"> </span><span class="s7">(</span><span class="s1">daysOfWeek</span><span class="s7">[</span><span class="s1">i</span><span class="s7">]</span><span class="s1"> </span><span class="s7">===</span><span class="s1"> </span><span class="s8">"Monday"</span><span class="s7">)</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                            </span>workouts</span><span class="s7">.</span><span class="s1">push</span><span class="s7">({</span><span class="s1"> </span><span class="s7">...</span><span class="s1">dayWorkout</span><span class="s7">,</span><span class="s1"> sport</span><span class="s7">:</span><span class="s1"> </span><span class="s8">"Swim"</span><span class="s7">,</span><span class="s1"> type</span><span class="s7">:</span><span class="s1"> </span><span class="s8">"very light opener"</span><span class="s7">,</span><span class="s1"> distance</span><span class="s7">:</span><span class="s1"> </span><span class="s8">"0.4km"</span><span class="s7">,</span><span class="s1"> time</span><span class="s7">:</span><span class="s1"> </span><span class="s8">"15min"</span><span class="s7">,</span><span class="s1"> intensity</span><span class="s7">:</span><span class="s1"> </span><span class="s8">"Easy"</span><span class="s7">,</span><span class="s1"> rpe</span><span class="s7">:</span><span class="s1"> </span><span class="s14">3</span><span class="s1"> </span><span class="s7">});</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                        </span></span><span class="s7">}</span><span class="s1"> </span><span class="s12">else</span><span class="s1"> </span><span class="s12">if</span><span class="s1"> </span><span class="s7">(</span><span class="s1">daysOfWeek</span><span class="s7">[</span><span class="s1">i</span><span class="s7">]</span><span class="s1"> </span><span class="s7">===</span><span class="s1"> </span><span class="s8">"Tuesday"</span><span class="s7">)</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                            </span>workouts</span><span class="s7">.</span><span class="s1">push</span><span class="s7">({</span><span class="s1"> </span><span class="s7">...</span><span class="s1">dayWorkout</span><span class="s7">,</span><span class="s1"> sport</span><span class="s7">:</span><span class="s1"> </span><span class="s8">"Run"</span><span class="s7">,</span><span class="s1"> type</span><span class="s7">:</span><span class="s1"> </span><span class="s8">"very light opener"</span><span class="s7">,</span><span class="s1"> distance</span><span class="s7">:</span><span class="s1"> </span><span class="s8">"2km"</span><span class="s7">,</span><span class="s1"> time</span><span class="s7">:</span><span class="s1"> </span><span class="s8">"10min"</span><span class="s7">,</span><span class="s1"> intensity</span><span class="s7">:</span><span class="s1"> </span><span class="s8">"Easy"</span><span class="s7">,</span><span class="s1"> rpe</span><span class="s7">:</span><span class="s1"> </span><span class="s14">3</span><span class="s1"> </span><span class="s7">});</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                        </span></span><span class="s7">}</span><span class="s1"> </span><span class="s12">else</span><span class="s1"> </span><span class="s12">if</span><span class="s1"> </span><span class="s7">(</span><span class="s1">daysOfWeek</span><span class="s7">[</span><span class="s1">i</span><span class="s7">]</span><span class="s1"> </span><span class="s7">===</span><span class="s1"> </span><span class="s8">"Wednesday"</span><span class="s7">)</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                            </span>workouts</span><span class="s7">.</span><span class="s1">push</span><span class="s7">({</span><span class="s1"> </span><span class="s7">...</span><span class="s1">dayWorkout</span><span class="s7">,</span><span class="s1"> sport</span><span class="s7">:</span><span class="s1"> </span><span class="s8">"Bike"</span><span class="s7">,</span><span class="s1"> type</span><span class="s7">:</span><span class="s1"> </span><span class="s8">"very light opener"</span><span class="s7">,</span><span class="s1"> distance</span><span class="s7">:</span><span class="s1"> </span><span class="s8">"8km"</span><span class="s7">,</span><span class="s1"> time</span><span class="s7">:</span><span class="s1"> </span><span class="s8">"20min"</span><span class="s7">,</span><span class="s1"> intensity</span><span class="s7">:</span><span class="s1"> </span><span class="s8">"Easy"</span><span class="s7">,</span><span class="s1"> rpe</span><span class="s7">:</span><span class="s1"> </span><span class="s14">3</span><span class="s1"> </span><span class="s7">});</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                        </span></span><span class="s7">}</span><span class="s1"> </span><span class="s12">else</span><span class="s1"> </span><span class="s12">if</span><span class="s1"> </span><span class="s7">(</span><span class="s1">daysOfWeek</span><span class="s7">[</span><span class="s1">i</span><span class="s7">]</span><span class="s1"> </span><span class="s7">===</span><span class="s1"> </span><span class="s8">"Thursday"</span><span class="s1"> </span><span class="s7">||</span><span class="s1"> daysOfWeek</span><span class="s7">[</span><span class="s1">i</span><span class="s7">]</span><span class="s1"> </span><span class="s7">===</span><span class="s1"> </span><span class="s8">"Friday"</span><span class="s7">)</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                            </span>workouts</span><span class="s7">.</span><span class="s1">push</span><span class="s7">({</span><span class="s1"> </span><span class="s7">...</span><span class="s1">dayWorkout</span><span class="s7">,</span><span class="s1"> sport</span><span class="s7">:</span><span class="s1"> </span><span class="s8">"Rest"</span><span class="s7">,</span><span class="s1"> type</span><span class="s7">:</span><span class="s1"> </span><span class="s8">"Complete Rest"</span><span class="s7">,</span><span class="s1"> distance</span><span class="s7">:</span><span class="s1"> </span><span class="s8">"0km"</span><span class="s7">,</span><span class="s1"> time</span><span class="s7">:</span><span class="s1"> </span><span class="s8">"0min"</span><span class="s7">,</span><span class="s1"> intensity</span><span class="s7">:</span><span class="s1"> </span><span class="s8">"N/A"</span><span class="s7">,</span><span class="s1"> rpe</span><span class="s7">:</span><span class="s1"> </span><span class="s14">0</span><span class="s1"> </span><span class="s7">});</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                        </span></span><span class="s7">}</span><span class="s1"> </span><span class="s12">else</span><span class="s1"> </span><span class="s12">if</span><span class="s1"> </span><span class="s7">(</span><span class="s1">daysOfWeek</span><span class="s7">[</span><span class="s1">i</span><span class="s7">]</span><span class="s1"> </span><span class="s7">===</span><span class="s1"> </span><span class="s8">"Saturday"</span><span class="s7">)</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p5"><span class="s4"><span class="Apple-converted-space">                            </span></span><span class="s1">// This is the actual race day!</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                            </span>dayWorkout </span><span class="s7">=</span><span class="s1"> </span><span class="s7">{</span><span class="s1"> </span><span class="s7">...</span><span class="s1">dayWorkout</span><span class="s7">,</span><span class="s1"> date</span><span class="s7">:</span><span class="s1"> raceDay</span><span class="s7">.</span><span class="s1">toISOString</span><span class="s7">().</span><span class="s1">split</span><span class="s7">(</span><span class="s8">'T'</span><span class="s7">)[</span><span class="s14">0</span><span class="s7">],</span><span class="s1"> sport</span><span class="s7">:</span><span class="s1"> </span><span class="s8">"Race Day"</span><span class="s7">,</span><span class="s1"> type</span><span class="s7">:</span><span class="s1"> </span><span class="s8">"Sprint Triathlon"</span><span class="s7">,</span><span class="s1"> distance</span><span class="s7">:</span><span class="s1"> </span><span class="s8">"Swim: 0.75km, Bike: 20km, Run: 5km"</span><span class="s7">,</span><span class="s1"> time</span><span class="s7">:</span><span class="s1"> </span><span class="s8">"N/A"</span><span class="s7">,</span><span class="s1"> intensity</span><span class="s7">:</span><span class="s1"> </span><span class="s8">"Max Effort"</span><span class="s7">,</span><span class="s1"> rpe</span><span class="s7">:</span><span class="s1"> </span><span class="s14">10</span><span class="s1"> </span><span class="s7">};</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                            </span>workouts</span><span class="s7">.</span><span class="s1">push</span><span class="s7">(</span><span class="s1">dayWorkout</span><span class="s7">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                        </span></span><span class="s7">}</span><span class="s1"> </span><span class="s12">else</span><span class="s1"> </span><span class="s12">if</span><span class="s1"> </span><span class="s7">(</span><span class="s1">daysOfWeek</span><span class="s7">[</span><span class="s1">i</span><span class="s7">]</span><span class="s1"> </span><span class="s7">===</span><span class="s1"> </span><span class="s8">"Sunday"</span><span class="s7">)</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                            </span>workouts</span><span class="s7">.</span><span class="s1">push</span><span class="s7">({</span><span class="s1"> </span><span class="s7">...</span><span class="s1">dayWorkout</span><span class="s7">,</span><span class="s1"> sport</span><span class="s7">:</span><span class="s1"> </span><span class="s8">"Recovery"</span><span class="s7">,</span><span class="s1"> type</span><span class="s7">:</span><span class="s1"> </span><span class="s8">"Post-Race Recovery"</span><span class="s7">,</span><span class="s1"> distance</span><span class="s7">:</span><span class="s1"> </span><span class="s8">"0km"</span><span class="s7">,</span><span class="s1"> time</span><span class="s7">:</span><span class="s1"> </span><span class="s8">"0min"</span><span class="s7">,</span><span class="s1"> intensity</span><span class="s7">:</span><span class="s1"> </span><span class="s8">"N/A"</span><span class="s7">,</span><span class="s1"> rpe</span><span class="s7">:</span><span class="s1"> </span><span class="s14">0</span><span class="s1"> </span><span class="s7">});</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                        </span></span><span class="s7">}</span></p>
<p class="p5"><span class="s4"><span class="Apple-converted-space">                    </span></span><span class="s7">}</span><span class="s4"> </span><span class="s12">else</span><span class="s4"> </span><span class="s7">{</span><span class="s4"> </span><span class="s1">// Fallback for other days, ensure they are 'Rest' if not explicitly defined</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                        </span>workouts</span><span class="s7">.</span><span class="s1">push</span><span class="s7">(</span><span class="s1">dayWorkout</span><span class="s7">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                    </span></span><span class="s7">}</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s7">}</span></p>
<p class="p5"><span class="s4"><span class="Apple-converted-space">                </span></span><span class="s1">// Filter out default rest days if specific workouts were added for that day</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s12">const</span><span class="s1"> filteredWorkouts </span><span class="s7">=</span><span class="s1"> workouts</span><span class="s7">.</span><span class="s1">filter</span><span class="s7">((</span><span class="s1">w</span><span class="s7">,</span><span class="s1"> index</span><span class="s7">,</span><span class="s1"> self</span><span class="s7">)</span><span class="s1"> </span><span class="s7">=&gt;</span></p>
<p class="p5"><span class="s4"><span class="Apple-converted-space">                    </span></span><span class="s1">// Keep the first instance of a workout for a given date, sport, and type</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                    </span>index </span><span class="s7">===</span><span class="s1"> self</span><span class="s7">.</span><span class="s1">findIndex</span><span class="s7">(</span><span class="s1">s </span><span class="s7">=&gt;</span><span class="s1"> s</span><span class="s7">.</span><span class="s1">date </span><span class="s7">===</span><span class="s1"> w</span><span class="s7">.</span><span class="s1">date </span><span class="s7">&amp;&amp;</span><span class="s1"> s</span><span class="s7">.</span><span class="s1">sport </span><span class="s7">===</span><span class="s1"> w</span><span class="s7">.</span><span class="s1">sport </span><span class="s7">&amp;&amp;</span><span class="s1"> s</span><span class="s7">.</span><span class="s1">type </span><span class="s7">===</span><span class="s1"> w</span><span class="s7">.</span><span class="s1">type</span><span class="s7">)</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s7">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span>trainingPlan</span><span class="s7">.</span><span class="s1">push</span><span class="s7">({</span><span class="s1"> week</span><span class="s7">,</span><span class="s1"> startDate</span><span class="s7">:</span><span class="s1"> weekStartDate</span><span class="s7">.</span><span class="s1">toISOString</span><span class="s7">().</span><span class="s1">split</span><span class="s7">(</span><span class="s8">'T'</span><span class="s7">)[</span><span class="s14">0</span><span class="s7">],</span><span class="s1"> workouts</span><span class="s7">:</span><span class="s1"> filteredWorkouts </span><span class="s7">});</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s7">}</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s7">}</span></p>
<p class="p6"><span class="s9"></span><br></p>
<p class="p5"><span class="s4"><span class="Apple-converted-space">        </span></span><span class="s1">// Call the function to populate the training plan when the script loads</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span>generateTrainingPlan</span><span class="s7">();</span></p>
<p class="p6"><span class="s9"></span><br></p>
<p class="p5"><span class="s4"><span class="Apple-converted-space">        </span></span><span class="s1">// State variables for the application</span></p>
<p class="p5"><span class="s4"><span class="Apple-converted-space">        </span></span><span class="s12">let</span><span class="s4"> currentWeek </span><span class="s7">=</span><span class="s4"> </span><span class="s14">1</span><span class="s7">;</span><span class="s4"> </span><span class="s1">// Tracks the currently displayed week</span></p>
<p class="p5"><span class="s4"><span class="Apple-converted-space">        </span></span><span class="s12">let</span><span class="s4"> selectedSessionData </span><span class="s7">=</span><span class="s4"> </span><span class="s12">null</span><span class="s7">;</span><span class="s4"> </span><span class="s1">// Stores data for the session being edited in the modal</span></p>
<p class="p6"><span class="s9"></span><br></p>
<p class="p5"><span class="s4"><span class="Apple-converted-space">        </span></span><span class="s1">// Get references to DOM elements</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s12">const</span><span class="s1"> loadingDiv </span><span class="s7">=</span><span class="s1"> document</span><span class="s7">.</span><span class="s1">getElementById</span><span class="s7">(</span><span class="s8">'loading'</span><span class="s7">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s12">const</span><span class="s1"> contentDiv </span><span class="s7">=</span><span class="s1"> document</span><span class="s7">.</span><span class="s1">getElementById</span><span class="s7">(</span><span class="s8">'content'</span><span class="s7">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s12">const</span><span class="s1"> raceDayCountdownEl </span><span class="s7">=</span><span class="s1"> document</span><span class="s7">.</span><span class="s1">getElementById</span><span class="s7">(</span><span class="s8">'race-day-countdown'</span><span class="s7">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s12">const</span><span class="s1"> currentWeekDisplayEl </span><span class="s7">=</span><span class="s1"> document</span><span class="s7">.</span><span class="s1">getElementById</span><span class="s7">(</span><span class="s8">'current-week-display'</span><span class="s7">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s12">const</span><span class="s1"> userIdDisplayEl </span><span class="s7">=</span><span class="s1"> document</span><span class="s7">.</span><span class="s1">getElementById</span><span class="s7">(</span><span class="s8">'user-id-display'</span><span class="s7">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s12">const</span><span class="s1"> weekDisplayEl </span><span class="s7">=</span><span class="s1"> document</span><span class="s7">.</span><span class="s1">getElementById</span><span class="s7">(</span><span class="s8">'week-display'</span><span class="s7">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s12">const</span><span class="s1"> prevWeekBtn </span><span class="s7">=</span><span class="s1"> document</span><span class="s7">.</span><span class="s1">getElementById</span><span class="s7">(</span><span class="s8">'prev-week-btn'</span><span class="s7">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s12">const</span><span class="s1"> nextWeekBtn </span><span class="s7">=</span><span class="s1"> document</span><span class="s7">.</span><span class="s1">getElementById</span><span class="s7">(</span><span class="s8">'next-week-btn'</span><span class="s7">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s12">const</span><span class="s1"> trainingScheduleEl </span><span class="s7">=</span><span class="s1"> document</span><span class="s7">.</span><span class="s1">getElementById</span><span class="s7">(</span><span class="s8">'training-schedule'</span><span class="s7">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s12">const</span><span class="s1"> totalSwimEl </span><span class="s7">=</span><span class="s1"> document</span><span class="s7">.</span><span class="s1">getElementById</span><span class="s7">(</span><span class="s8">'total-swim'</span><span class="s7">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s12">const</span><span class="s1"> totalBikeEl </span><span class="s7">=</span><span class="s1"> document</span><span class="s7">.</span><span class="s1">getElementById</span><span class="s7">(</span><span class="s8">'total-bike'</span><span class="s7">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s12">const</span><span class="s1"> totalRunEl </span><span class="s7">=</span><span class="s1"> document</span><span class="s7">.</span><span class="s1">getElementById</span><span class="s7">(</span><span class="s8">'total-run'</span><span class="s7">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s12">const</span><span class="s1"> motivationalTipEl </span><span class="s7">=</span><span class="s1"> document</span><span class="s7">.</span><span class="s1">getElementById</span><span class="s7">(</span><span class="s8">'motivational-tip'</span><span class="s7">);</span></p>
<p class="p6"><span class="s9"></span><br></p>
<p class="p5"><span class="s4"><span class="Apple-converted-space">        </span></span><span class="s1">// Modal elements</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s12">const</span><span class="s1"> sessionDetailModal </span><span class="s7">=</span><span class="s1"> document</span><span class="s7">.</span><span class="s1">getElementById</span><span class="s7">(</span><span class="s8">'session-detail-modal'</span><span class="s7">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s12">const</span><span class="s1"> modalSessionTitleEl </span><span class="s7">=</span><span class="s1"> document</span><span class="s7">.</span><span class="s1">getElementById</span><span class="s7">(</span><span class="s8">'modal-session-title'</span><span class="s7">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s12">const</span><span class="s1"> modalSessionPlannedEl </span><span class="s7">=</span><span class="s1"> document</span><span class="s7">.</span><span class="s1">getElementById</span><span class="s7">(</span><span class="s8">'modal-session-planned'</span><span class="s7">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s12">const</span><span class="s1"> modalStatusEl </span><span class="s7">=</span><span class="s1"> document</span><span class="s7">.</span><span class="s1">getElementById</span><span class="s7">(</span><span class="s8">'modal-status'</span><span class="s7">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s12">const</span><span class="s1"> modalTimeEl </span><span class="s7">=</span><span class="s1"> document</span><span class="s7">.</span><span class="s1">getElementById</span><span class="s7">(</span><span class="s8">'modal-time'</span><span class="s7">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s12">const</span><span class="s1"> modalDistanceEl </span><span class="s7">=</span><span class="s1"> document</span><span class="s7">.</span><span class="s1">getElementById</span><span class="s7">(</span><span class="s8">'modal-distance'</span><span class="s7">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s12">const</span><span class="s1"> modalIntensityEl </span><span class="s7">=</span><span class="s1"> document</span><span class="s7">.</span><span class="s1">getElementById</span><span class="s7">(</span><span class="s8">'modal-intensity'</span><span class="s7">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s12">const</span><span class="s1"> modalRPEEl </span><span class="s7">=</span><span class="s1"> document</span><span class="s7">.</span><span class="s1">getElementById</span><span class="s7">(</span><span class="s8">'modal-rpe'</span><span class="s7">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s12">const</span><span class="s1"> modalNotesEl </span><span class="s7">=</span><span class="s1"> document</span><span class="s7">.</span><span class="s1">getElementById</span><span class="s7">(</span><span class="s8">'modal-notes'</span><span class="s7">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s12">const</span><span class="s1"> saveSessionBtn </span><span class="s7">=</span><span class="s1"> document</span><span class="s7">.</span><span class="s1">getElementById</span><span class="s7">(</span><span class="s8">'save-session-btn'</span><span class="s7">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s12">const</span><span class="s1"> cancelSessionBtn </span><span class="s7">=</span><span class="s1"> document</span><span class="s7">.</span><span class="s1">getElementById</span><span class="s7">(</span><span class="s8">'cancel-session-btn'</span><span class="s7">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s12">const</span><span class="s1"> exportCsvBtn </span><span class="s7">=</span><span class="s1"> document</span><span class="s7">.</span><span class="s1">getElementById</span><span class="s7">(</span><span class="s8">'export-csv-btn'</span><span class="s7">);</span></p>
<p class="p6"><span class="s9"></span><br></p>
<p class="p5"><span class="s4"><span class="Apple-converted-space">        </span></span><span class="s1">// --- Firebase Initialization ---</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s10">/**</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">         </span>* Initializes Firebase app, authentication, and Firestore.</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">         </span>* Sets up the authentication state listener and starts the Firestore data listener.</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">         </span>*/</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s12">async</span><span class="s1"> </span><span class="s12">function</span><span class="s1"> initializeFirebase</span><span class="s7">()</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s12">try</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span>app </span><span class="s7">=</span><span class="s1"> initializeApp</span><span class="s7">(</span><span class="s1">firebaseConfig</span><span class="s7">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span>db </span><span class="s7">=</span><span class="s1"> getFirestore</span><span class="s7">(</span><span class="s1">app</span><span class="s7">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span>auth </span><span class="s7">=</span><span class="s1"> getAuth</span><span class="s7">(</span><span class="s1">app</span><span class="s7">);</span></p>
<p class="p6"><span class="s9"></span><br></p>
<p class="p5"><span class="s4"><span class="Apple-converted-space">                </span></span><span class="s1">// Set up an authentication state listener</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span>onAuthStateChanged</span><span class="s7">(</span><span class="s1">auth</span><span class="s7">,</span><span class="s1"> </span><span class="s12">async</span><span class="s1"> </span><span class="s7">(</span><span class="s1">user</span><span class="s7">)</span><span class="s1"> </span><span class="s7">=&gt;</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                    </span></span><span class="s12">if</span><span class="s1"> </span><span class="s7">(</span><span class="s1">user</span><span class="s7">)</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                        </span>userId </span><span class="s7">=</span><span class="s1"> user</span><span class="s7">.</span><span class="s1">uid</span><span class="s7">;</span><span class="s1"> </span><span class="s10">// User is logged in</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                    </span></span><span class="s7">}</span><span class="s1"> </span><span class="s12">else</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p5"><span class="s4"><span class="Apple-converted-space">                        </span></span><span class="s1">// If no user, sign in anonymously</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                        </span></span><span class="s12">const</span><span class="s1"> anonymousUserCredential </span><span class="s7">=</span><span class="s1"> </span><span class="s12">await</span><span class="s1"> signInAnonymously</span><span class="s7">(</span><span class="s1">auth</span><span class="s7">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                        </span>userId </span><span class="s7">=</span><span class="s1"> anonymousUserCredential</span><span class="s7">.</span><span class="s1">user</span><span class="s7">.</span><span class="s1">uid</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                    </span></span><span class="s7">}</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                    </span>userIdDisplayEl</span><span class="s7">.</span><span class="s1">textContent </span><span class="s7">=</span><span class="s1"> userId</span><span class="s7">;</span><span class="s1"> </span><span class="s10">// Display the user ID</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                    </span>console</span><span class="s7">.</span><span class="s1">log</span><span class="s7">(</span><span class="s8">"Firebase initialized. User ID:"</span><span class="s7">,</span><span class="s1"> userId</span><span class="s7">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                    </span>startFirestoreListener</span><span class="s7">();</span><span class="s1"> </span><span class="s10">// Start listening for user-specific data</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                    </span>updateUIBasedOnCurrentDate</span><span class="s7">();</span><span class="s1"> </span><span class="s10">// Update UI to current week and race countdown</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                    </span>loadingDiv</span><span class="s7">.</span><span class="s1">classList</span><span class="s7">.</span><span class="s1">add</span><span class="s7">(</span><span class="s8">'hidden'</span><span class="s7">);</span><span class="s1"> </span><span class="s10">// Hide loading spinner</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                    </span>contentDiv</span><span class="s7">.</span><span class="s1">classList</span><span class="s7">.</span><span class="s1">remove</span><span class="s7">(</span><span class="s8">'hidden'</span><span class="s7">);</span><span class="s1"> </span><span class="s10">// Show app content</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s7">});</span></p>
<p class="p6"><span class="s9"></span><br></p>
<p class="p5"><span class="s4"><span class="Apple-converted-space">                </span></span><span class="s1">// Attempt to sign in with the custom token if available</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s12">if</span><span class="s1"> </span><span class="s7">(</span><span class="s1">initialAuthToken</span><span class="s7">)</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                    </span></span><span class="s12">await</span><span class="s1"> signInWithCustomToken</span><span class="s7">(</span><span class="s1">auth</span><span class="s7">,</span><span class="s1"> initialAuthToken</span><span class="s7">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s7">}</span><span class="s1"> </span><span class="s12">else</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p5"><span class="s4"><span class="Apple-converted-space">                    </span></span><span class="s1">// onAuthStateChanged will handle anonymous sign-in if no token is present</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s7">}</span></p>
<p class="p6"><span class="s9"></span><br></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s7">}</span><span class="s1"> </span><span class="s12">catch</span><span class="s1"> </span><span class="s7">(</span><span class="s1">error</span><span class="s7">)</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span>console</span><span class="s7">.</span><span class="s1">error</span><span class="s7">(</span><span class="s8">"Error initializing Firebase:"</span><span class="s7">,</span><span class="s1"> error</span><span class="s7">);</span></p>
<p class="p7"><span class="s4"><span class="Apple-converted-space">                </span>loadingDiv</span><span class="s7">.</span><span class="s4">textContent </span><span class="s7">=</span><span class="s4"> </span><span class="s1">"Error loading app. Please refresh and try again."</span><span class="s7">;</span></p>
<p class="p7"><span class="s4"><span class="Apple-converted-space">                </span>showStatusMessage</span><span class="s7">(</span><span class="s1">"Failed to initialize app. Please refresh."</span><span class="s7">,</span><span class="s4"> </span><span class="s1">"error"</span><span class="s7">,</span><span class="s4"> </span><span class="s14">5000</span><span class="s7">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s7">}</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s7">}</span></p>
<p class="p6"><span class="s9"></span><br></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s10">/**</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">         </span>* Starts the Firestore real-time listener for the user's training logs.</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">         </span>* Updates `userLogs` cache and re-renders the UI on changes.</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">         </span>*/</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s12">function</span><span class="s1"> startFirestoreListener</span><span class="s7">()</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s12">if</span><span class="s1"> </span><span class="s7">(</span><span class="s1">unsubscribeSnapshot</span><span class="s7">)</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p5"><span class="s4"><span class="Apple-converted-space">                </span>unsubscribeSnapshot</span><span class="s7">();</span><span class="s4"> </span><span class="s1">// Detach any existing listener to prevent duplicates</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s7">}</span></p>
<p class="p6"><span class="s9"></span><br></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s12">if</span><span class="s1"> </span><span class="s7">(!</span><span class="s1">userId</span><span class="s7">)</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p7"><span class="s4"><span class="Apple-converted-space">                </span>console</span><span class="s7">.</span><span class="s4">warn</span><span class="s7">(</span><span class="s1">"User ID not available, cannot start Firestore listener."</span><span class="s7">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s12">return</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s7">}</span></p>
<p class="p6"><span class="s9"></span><br></p>
<p class="p5"><span class="s4"><span class="Apple-converted-space">            </span></span><span class="s1">// Reference to the user's private training logs collection in Firestore</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s12">const</span><span class="s1"> logsCollectionRef </span><span class="s7">=</span><span class="s1"> collection</span><span class="s7">(</span><span class="s1">db</span><span class="s7">,</span><span class="s1"> </span><span class="s8">`artifacts/</span><span class="s7">${</span><span class="s1">appId</span><span class="s7">}</span><span class="s8">/users/</span><span class="s7">${</span><span class="s1">userId</span><span class="s7">}</span><span class="s8">/training_logs`</span><span class="s7">);</span></p>
<p class="p6"><span class="s9"></span><br></p>
<p class="p5"><span class="s4"><span class="Apple-converted-space">            </span></span><span class="s1">// Listen for real-time changes to the collection</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span>unsubscribeSnapshot </span><span class="s7">=</span><span class="s1"> onSnapshot</span><span class="s7">(</span><span class="s1">logsCollectionRef</span><span class="s7">,</span><span class="s1"> </span><span class="s7">(</span><span class="s1">snapshot</span><span class="s7">)</span><span class="s1"> </span><span class="s7">=&gt;</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span>userLogs </span><span class="s7">=</span><span class="s1"> </span><span class="s7">{};</span><span class="s1"> </span><span class="s10">// Clear previous cache</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span>snapshot</span><span class="s7">.</span><span class="s1">forEach</span><span class="s7">(</span><span class="s1">doc </span><span class="s7">=&gt;</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                    </span></span><span class="s12">const</span><span class="s1"> data </span><span class="s7">=</span><span class="s1"> doc</span><span class="s7">.</span><span class="s1">data</span><span class="s7">();</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                    </span></span><span class="s12">const</span><span class="s1"> dateKey </span><span class="s7">=</span><span class="s1"> data</span><span class="s7">.</span><span class="s1">date</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                    </span></span><span class="s12">if</span><span class="s1"> </span><span class="s7">(!</span><span class="s1">userLogs</span><span class="s7">[</span><span class="s1">dateKey</span><span class="s7">])</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                        </span>userLogs</span><span class="s7">[</span><span class="s1">dateKey</span><span class="s7">]</span><span class="s1"> </span><span class="s7">=</span><span class="s1"> </span><span class="s7">[];</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                    </span></span><span class="s7">}</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                    </span>userLogs</span><span class="s7">[</span><span class="s1">dateKey</span><span class="s7">].</span><span class="s1">push</span><span class="s7">({</span><span class="s1"> id</span><span class="s7">:</span><span class="s1"> doc</span><span class="s7">.</span><span class="s1">id</span><span class="s7">,</span><span class="s1"> </span><span class="s7">...</span><span class="s1">data </span><span class="s7">});</span><span class="s1"> </span><span class="s10">// Store document ID along with data</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s7">});</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span>console</span><span class="s7">.</span><span class="s1">log</span><span class="s7">(</span><span class="s8">"User logs updated:"</span><span class="s7">,</span><span class="s1"> userLogs</span><span class="s7">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span>renderTrainingSchedule</span><span class="s7">(</span><span class="s1">currentWeek</span><span class="s7">);</span><span class="s1"> </span><span class="s10">// Re-render the schedule with the latest data</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span>calculateAndDisplayWeeklyTotals</span><span class="s7">();</span><span class="s1"> </span><span class="s10">// Recalculate and display weekly totals</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s7">},</span><span class="s1"> </span><span class="s7">(</span><span class="s1">error</span><span class="s7">)</span><span class="s1"> </span><span class="s7">=&gt;</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span>console</span><span class="s7">.</span><span class="s1">error</span><span class="s7">(</span><span class="s8">"Error listening to Firestore:"</span><span class="s7">,</span><span class="s1"> error</span><span class="s7">);</span></p>
<p class="p7"><span class="s4"><span class="Apple-converted-space">                </span>showStatusMessage</span><span class="s7">(</span><span class="s1">"Failed to load training logs. Please check your internet connection."</span><span class="s7">,</span><span class="s4"> </span><span class="s1">"error"</span><span class="s7">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s7">});</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s7">}</span></p>
<p class="p6"><span class="s9"></span><br></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s10">/**</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">         </span>* Displays a temporary status message to the user (e.g., success, error, info).</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">         </span>* @param {string} message - The message to display.</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">         </span>* @param {'info'|'success'|'error'} type - The type of message (influences color).</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">         </span>* @param {number} duration - How long the message should be visible in milliseconds.</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">         </span>*/</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s12">function</span><span class="s1"> showStatusMessage</span><span class="s7">(</span><span class="s1">message</span><span class="s7">,</span><span class="s1"> type </span><span class="s7">=</span><span class="s1"> </span><span class="s8">"info"</span><span class="s7">,</span><span class="s1"> duration </span><span class="s7">=</span><span class="s1"> </span><span class="s14">3000</span><span class="s7">)</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s12">let</span><span class="s1"> messageDiv </span><span class="s7">=</span><span class="s1"> document</span><span class="s7">.</span><span class="s1">getElementById</span><span class="s7">(</span><span class="s8">'status-message'</span><span class="s7">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s12">if</span><span class="s1"> </span><span class="s7">(!</span><span class="s1">messageDiv</span><span class="s7">)</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p5"><span class="s4"><span class="Apple-converted-space">                </span></span><span class="s1">// Create the message div if it doesn't exist</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span>messageDiv </span><span class="s7">=</span><span class="s1"> document</span><span class="s7">.</span><span class="s1">createElement</span><span class="s7">(</span><span class="s8">'div'</span><span class="s7">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span>messageDiv</span><span class="s7">.</span><span class="s1">id </span><span class="s7">=</span><span class="s1"> </span><span class="s8">'status-message'</span><span class="s7">;</span></p>
<p class="p7"><span class="s4"><span class="Apple-converted-space">                </span>messageDiv</span><span class="s7">.</span><span class="s4">className </span><span class="s7">=</span><span class="s4"> </span><span class="s1">'fixed bottom-4 left-1/2 -translate-x-1/2 px-4 py-2 rounded-lg shadow-lg text-white text-sm z-[9999] opacity-0 transition-opacity duration-300'</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span>document</span><span class="s7">.</span><span class="s1">body</span><span class="s7">.</span><span class="s1">appendChild</span><span class="s7">(</span><span class="s1">messageDiv</span><span class="s7">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s7">}</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span>messageDiv</span><span class="s7">.</span><span class="s1">textContent </span><span class="s7">=</span><span class="s1"> message</span><span class="s7">;</span></p>
<p class="p5"><span class="s4"><span class="Apple-converted-space">            </span></span><span class="s1">// Set background color based on message type</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s12">if</span><span class="s1"> </span><span class="s7">(</span><span class="s1">type </span><span class="s7">===</span><span class="s1"> </span><span class="s8">"error"</span><span class="s7">)</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span>messageDiv</span><span class="s7">.</span><span class="s1">classList</span><span class="s7">.</span><span class="s1">add</span><span class="s7">(</span><span class="s8">'bg-red-500'</span><span class="s7">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span>messageDiv</span><span class="s7">.</span><span class="s1">classList</span><span class="s7">.</span><span class="s1">remove</span><span class="s7">(</span><span class="s8">'bg-green-500'</span><span class="s7">,</span><span class="s1"> </span><span class="s8">'bg-blue-500'</span><span class="s7">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s7">}</span><span class="s1"> </span><span class="s12">else</span><span class="s1"> </span><span class="s12">if</span><span class="s1"> </span><span class="s7">(</span><span class="s1">type </span><span class="s7">===</span><span class="s1"> </span><span class="s8">"success"</span><span class="s7">)</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span>messageDiv</span><span class="s7">.</span><span class="s1">classList</span><span class="s7">.</span><span class="s1">add</span><span class="s7">(</span><span class="s8">'bg-green-500'</span><span class="s7">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span>messageDiv</span><span class="s7">.</span><span class="s1">classList</span><span class="s7">.</span><span class="s1">remove</span><span class="s7">(</span><span class="s8">'bg-red-500'</span><span class="s7">,</span><span class="s1"> </span><span class="s8">'bg-blue-500'</span><span class="s7">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s7">}</span><span class="s1"> </span><span class="s12">else</span><span class="s1"> </span><span class="s7">{</span><span class="s1"> </span><span class="s10">// info</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span>messageDiv</span><span class="s7">.</span><span class="s1">classList</span><span class="s7">.</span><span class="s1">add</span><span class="s7">(</span><span class="s8">'bg-blue-500'</span><span class="s7">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span>messageDiv</span><span class="s7">.</span><span class="s1">classList</span><span class="s7">.</span><span class="s1">remove</span><span class="s7">(</span><span class="s8">'bg-red-500'</span><span class="s7">,</span><span class="s1"> </span><span class="s8">'bg-green-500'</span><span class="s7">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s7">}</span></p>
<p class="p5"><span class="s4"><span class="Apple-converted-space">            </span></span><span class="s1">// Show the message</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span>messageDiv</span><span class="s7">.</span><span class="s1">classList</span><span class="s7">.</span><span class="s1">remove</span><span class="s7">(</span><span class="s8">'opacity-0'</span><span class="s7">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span>messageDiv</span><span class="s7">.</span><span class="s1">classList</span><span class="s7">.</span><span class="s1">add</span><span class="s7">(</span><span class="s8">'opacity-100'</span><span class="s7">);</span></p>
<p class="p6"><span class="s9"></span><br></p>
<p class="p5"><span class="s4"><span class="Apple-converted-space">            </span></span><span class="s1">// Hide the message after the specified duration</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span>setTimeout</span><span class="s7">(()</span><span class="s1"> </span><span class="s7">=&gt;</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span>messageDiv</span><span class="s7">.</span><span class="s1">classList</span><span class="s7">.</span><span class="s1">remove</span><span class="s7">(</span><span class="s8">'opacity-100'</span><span class="s7">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span>messageDiv</span><span class="s7">.</span><span class="s1">classList</span><span class="s7">.</span><span class="s1">add</span><span class="s7">(</span><span class="s8">'opacity-0'</span><span class="s7">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s7">},</span><span class="s1"> duration</span><span class="s7">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s7">}</span></p>
<p class="p6"><span class="s9"></span><br></p>
<p class="p5"><span class="s4"><span class="Apple-converted-space">        </span></span><span class="s1">// --- Date and Time Utilities ---</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s10">/**</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">         </span>* Calculates the number of days between two dates (ignoring time).</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">         </span>* @param {Date} d1 - The first date.</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">         </span>* @param {Date} d2 - The second date.</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">         </span>* @returns {number} The difference in days.</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">         </span>*/</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s12">function</span><span class="s1"> getDaysBetween</span><span class="s7">(</span><span class="s1">d1</span><span class="s7">,</span><span class="s1"> d2</span><span class="s7">)</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s12">const</span><span class="s1"> date1 </span><span class="s7">=</span><span class="s1"> </span><span class="s12">new</span><span class="s1"> </span><span class="s13">Date</span><span class="s7">(</span><span class="s1">d1</span><span class="s7">.</span><span class="s1">getFullYear</span><span class="s7">(),</span><span class="s1"> d1</span><span class="s7">.</span><span class="s1">getMonth</span><span class="s7">(),</span><span class="s1"> d1</span><span class="s7">.</span><span class="s1">getDate</span><span class="s7">());</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s12">const</span><span class="s1"> date2 </span><span class="s7">=</span><span class="s1"> </span><span class="s12">new</span><span class="s1"> </span><span class="s13">Date</span><span class="s7">(</span><span class="s1">d2</span><span class="s7">.</span><span class="s1">getFullYear</span><span class="s7">(),</span><span class="s1"> d2</span><span class="s7">.</span><span class="s1">getMonth</span><span class="s7">(),</span><span class="s1"> d2</span><span class="s7">.</span><span class="s1">getDate</span><span class="s7">());</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s12">const</span><span class="s1"> diffTime </span><span class="s7">=</span><span class="s1"> </span><span class="s13">Math</span><span class="s7">.</span><span class="s1">abs</span><span class="s7">(</span><span class="s1">date2 </span><span class="s7">-</span><span class="s1"> date1</span><span class="s7">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s12">return</span><span class="s1"> </span><span class="s13">Math</span><span class="s7">.</span><span class="s1">ceil</span><span class="s7">(</span><span class="s1">diffTime </span><span class="s7">/</span><span class="s1"> </span><span class="s7">(</span><span class="s14">1000</span><span class="s1"> </span><span class="s7">*</span><span class="s1"> </span><span class="s14">60</span><span class="s1"> </span><span class="s7">*</span><span class="s1"> </span><span class="s14">60</span><span class="s1"> </span><span class="s7">*</span><span class="s1"> </span><span class="s14">24</span><span class="s7">));</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s7">}</span></p>
<p class="p6"><span class="s9"></span><br></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s10">/**</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">         </span>* Calculates the number of days remaining until the race day.</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">         </span>* @returns {number} Days left.</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">         </span>*/</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s12">function</span><span class="s1"> getDaysUntilRace</span><span class="s7">()</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s12">const</span><span class="s1"> today </span><span class="s7">=</span><span class="s1"> </span><span class="s12">new</span><span class="s1"> </span><span class="s13">Date</span><span class="s7">();</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s12">const</span><span class="s1"> diffDays </span><span class="s7">=</span><span class="s1"> getDaysBetween</span><span class="s7">(</span><span class="s1">today</span><span class="s7">,</span><span class="s1"> raceDay</span><span class="s7">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s12">return</span><span class="s1"> diffDays</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s7">}</span></p>
<p class="p6"><span class="s9"></span><br></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s10">/**</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">         </span>* Determines the current training week based on the `planStartDate` and today's date.</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">         </span>* @returns {number} The current training week (1-14).</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">         </span>*/</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s12">function</span><span class="s1"> getCurrentTrainingWeek</span><span class="s7">()</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s12">const</span><span class="s1"> today </span><span class="s7">=</span><span class="s1"> </span><span class="s12">new</span><span class="s1"> </span><span class="s13">Date</span><span class="s7">();</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s12">const</span><span class="s1"> diffDays </span><span class="s7">=</span><span class="s1"> getDaysBetween</span><span class="s7">(</span><span class="s1">planStartDate</span><span class="s7">,</span><span class="s1"> today</span><span class="s7">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s12">return</span><span class="s1"> </span><span class="s13">Math</span><span class="s7">.</span><span class="s1">min</span><span class="s7">(</span><span class="s14">14</span><span class="s7">,</span><span class="s1"> </span><span class="s13">Math</span><span class="s7">.</span><span class="s1">max</span><span class="s7">(</span><span class="s14">1</span><span class="s7">,</span><span class="s1"> </span><span class="s13">Math</span><span class="s7">.</span><span class="s1">floor</span><span class="s7">(</span><span class="s1">diffDays </span><span class="s7">/</span><span class="s1"> </span><span class="s14">7</span><span class="s7">)</span><span class="s1"> </span><span class="s7">+</span><span class="s1"> </span><span class="s14">1</span><span class="s7">));</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s7">}</span></p>
<p class="p6"><span class="s9"></span><br></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s10">/**</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">         </span>* Updates the race day countdown display in the UI.</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">         </span>*/</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s12">function</span><span class="s1"> updateRaceDayCountdown</span><span class="s7">()</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s12">const</span><span class="s1"> daysLeft </span><span class="s7">=</span><span class="s1"> getDaysUntilRace</span><span class="s7">();</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span>raceDayCountdownEl</span><span class="s7">.</span><span class="s1">textContent </span><span class="s7">=</span><span class="s1"> </span><span class="s8">`</span><span class="s7">${</span><span class="s1">daysLeft</span><span class="s7">}</span><span class="s8"> days left`</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s7">}</span></p>
<p class="p6"><span class="s9"></span><br></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s10">/**</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">         </span>* Updates the UI to show the current week and race countdown.</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">         </span>* This function is called once Firebase is initialized.</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">         </span>*/</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s12">function</span><span class="s1"> updateUIBasedOnCurrentDate</span><span class="s7">()</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span>currentWeek </span><span class="s7">=</span><span class="s1"> getCurrentTrainingWeek</span><span class="s7">();</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span>currentWeekDisplayEl</span><span class="s7">.</span><span class="s1">textContent </span><span class="s7">=</span><span class="s1"> currentWeek</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span>weekDisplayEl</span><span class="s7">.</span><span class="s1">textContent </span><span class="s7">=</span><span class="s1"> </span><span class="s8">`Week </span><span class="s7">${</span><span class="s1">currentWeek</span><span class="s7">}</span><span class="s8">`</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span>renderTrainingSchedule</span><span class="s7">(</span><span class="s1">currentWeek</span><span class="s7">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span>updateRaceDayCountdown</span><span class="s7">();</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s7">}</span></p>
<p class="p6"><span class="s9"></span><br></p>
<p class="p5"><span class="s4"><span class="Apple-converted-space">        </span></span><span class="s1">// --- Rendering Functions ---</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s10">/**</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">         </span>* Renders the training schedule for the specified week number.</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">         </span>* Merges the static plan with user-logged data from Firestore.</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">         </span>* @param {number} weekNum - The week number to display.</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">         </span>*/</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s12">function</span><span class="s1"> renderTrainingSchedule</span><span class="s7">(</span><span class="s1">weekNum</span><span class="s7">)</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span>trainingScheduleEl</span><span class="s7">.</span><span class="s1">innerHTML </span><span class="s7">=</span><span class="s1"> </span><span class="s8">''</span><span class="s7">;</span><span class="s1"> </span><span class="s10">// Clear previous schedule content</span></p>
<p class="p6"><span class="s9"></span><br></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s12">const</span><span class="s1"> weekPlan </span><span class="s7">=</span><span class="s1"> trainingPlan</span><span class="s7">.</span><span class="s1">find</span><span class="s7">(</span><span class="s1">w </span><span class="s7">=&gt;</span><span class="s1"> w</span><span class="s7">.</span><span class="s1">week </span><span class="s7">===</span><span class="s1"> weekNum</span><span class="s7">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s12">if</span><span class="s1"> </span><span class="s7">(!</span><span class="s1">weekPlan</span><span class="s7">)</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p7"><span class="s4"><span class="Apple-converted-space">                </span>trainingScheduleEl</span><span class="s7">.</span><span class="s4">innerHTML </span><span class="s7">=</span><span class="s4"> </span><span class="s1">'&lt;p class="text-center text-gray-500 mt-8"&gt;No training plan found for this week.&lt;/p&gt;'</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s12">return</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s7">}</span></p>
<p class="p6"><span class="s9"></span><br></p>
<p class="p5"><span class="s4"><span class="Apple-converted-space">            </span></span><span class="s1">// Loop through each planned session for the week</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span>weekPlan</span><span class="s7">.</span><span class="s1">workouts</span><span class="s7">.</span><span class="s1">forEach</span><span class="s7">(</span><span class="s1">session </span><span class="s7">=&gt;</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p5"><span class="s4"><span class="Apple-converted-space">                </span></span><span class="s1">// Find any logged data for this specific session date</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s12">const</span><span class="s1"> sessionLogsForDate </span><span class="s7">=</span><span class="s1"> userLogs</span><span class="s7">[</span><span class="s1">session</span><span class="s7">.</span><span class="s1">date</span><span class="s7">]</span><span class="s1"> </span><span class="s7">||</span><span class="s1"> </span><span class="s7">[];</span></p>
<p class="p5"><span class="s4"><span class="Apple-converted-space">                </span></span><span class="s1">// Find the specific logged session that matches the planned one</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s12">const</span><span class="s1"> loggedSession </span><span class="s7">=</span><span class="s1"> sessionLogsForDate</span><span class="s7">.</span><span class="s1">find</span><span class="s7">(</span><span class="s1">log </span><span class="s7">=&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                    </span>log</span><span class="s7">.</span><span class="s1">sport </span><span class="s7">===</span><span class="s1"> session</span><span class="s7">.</span><span class="s1">sport </span><span class="s7">&amp;&amp;</span><span class="s1"> log</span><span class="s7">.</span><span class="s1">type </span><span class="s7">===</span><span class="s1"> session</span><span class="s7">.</span><span class="s1">type</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s7">);</span></p>
<p class="p6"><span class="s9"></span><br></p>
<p class="p5"><span class="s4"><span class="Apple-converted-space">                </span></span><span class="s1">// Determine what to display based on logged data or original plan</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s12">const</span><span class="s1"> displayStatus </span><span class="s7">=</span><span class="s1"> loggedSession </span><span class="s7">?</span><span class="s1"> loggedSession</span><span class="s7">.</span><span class="s1">status </span><span class="s7">:</span><span class="s1"> </span><span class="s8">'planned'</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s12">const</span><span class="s1"> displayTime </span><span class="s7">=</span><span class="s1"> loggedSession </span><span class="s7">?</span><span class="s1"> loggedSession</span><span class="s7">.</span><span class="s1">loggedTime </span><span class="s7">:</span><span class="s1"> session</span><span class="s7">.</span><span class="s1">time</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s12">const</span><span class="s1"> displayDistance </span><span class="s7">=</span><span class="s1"> loggedSession</span><span class="s7">?.</span><span class="s1">loggedDistance </span><span class="s7">!==</span><span class="s1"> </span><span class="s12">null</span><span class="s1"> </span><span class="s7">&amp;&amp;</span><span class="s1"> loggedSession</span><span class="s7">?.</span><span class="s1">loggedDistance </span><span class="s7">!==</span><span class="s1"> </span><span class="s12">undefined</span><span class="s1"> </span><span class="s7">?</span><span class="s1"> </span><span class="s8">`</span><span class="s7">${</span><span class="s1">loggedSession</span><span class="s7">.</span><span class="s1">loggedDistance</span><span class="s7">}</span><span class="s8">km`</span><span class="s1"> </span><span class="s7">:</span><span class="s1"> session</span><span class="s7">.</span><span class="s1">distance</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s12">const</span><span class="s1"> displayIntensity </span><span class="s7">=</span><span class="s1"> loggedSession </span><span class="s7">?</span><span class="s1"> loggedSession</span><span class="s7">.</span><span class="s1">intensity </span><span class="s7">:</span><span class="s1"> session</span><span class="s7">.</span><span class="s1">intensity</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s12">const</span><span class="s1"> displayRPE </span><span class="s7">=</span><span class="s1"> loggedSession</span><span class="s7">?.</span><span class="s1">rpe </span><span class="s7">!==</span><span class="s1"> </span><span class="s12">null</span><span class="s1"> </span><span class="s7">&amp;&amp;</span><span class="s1"> loggedSession</span><span class="s7">?.</span><span class="s1">rpe </span><span class="s7">!==</span><span class="s1"> </span><span class="s12">undefined</span><span class="s1"> </span><span class="s7">?</span><span class="s1"> </span><span class="s8">`RPE: </span><span class="s7">${</span><span class="s1">loggedSession</span><span class="s7">.</span><span class="s1">rpe</span><span class="s7">}</span><span class="s8">`</span><span class="s1"> </span><span class="s7">:</span><span class="s1"> </span><span class="s7">(</span><span class="s1">session</span><span class="s7">.</span><span class="s1">rpe </span><span class="s7">!==</span><span class="s1"> </span><span class="s12">null</span><span class="s1"> </span><span class="s7">&amp;&amp;</span><span class="s1"> session</span><span class="s7">.</span><span class="s1">rpe </span><span class="s7">!==</span><span class="s1"> </span><span class="s12">undefined</span><span class="s1"> </span><span class="s7">&amp;&amp;</span><span class="s1"> session</span><span class="s7">.</span><span class="s1">rpe </span><span class="s7">!==</span><span class="s1"> </span><span class="s14">0</span><span class="s1"> </span><span class="s7">?</span><span class="s1"> </span><span class="s8">`Planned RPE: </span><span class="s7">${</span><span class="s1">session</span><span class="s7">.</span><span class="s1">rpe</span><span class="s7">}</span><span class="s8">`</span><span class="s1"> </span><span class="s7">:</span><span class="s1"> </span><span class="s8">''</span><span class="s7">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s12">const</span><span class="s1"> displayNotes </span><span class="s7">=</span><span class="s1"> loggedSession </span><span class="s7">?</span><span class="s1"> loggedSession</span><span class="s7">.</span><span class="s1">notes </span><span class="s7">:</span><span class="s1"> </span><span class="s8">''</span><span class="s7">;</span></p>
<p class="p6"><span class="s9"></span><br></p>
<p class="p5"><span class="s4"><span class="Apple-converted-space">                </span></span><span class="s1">// Apply dynamic styling based on session status</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s12">const</span><span class="s1"> statusColorClass </span><span class="s7">=</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p7"><span class="s4"><span class="Apple-converted-space">                    </span></span><span class="s1">'planned'</span><span class="s7">:</span><span class="s4"> </span><span class="s1">'border-blue-400'</span><span class="s7">,</span></p>
<p class="p7"><span class="s4"><span class="Apple-converted-space">                    </span></span><span class="s1">'completed'</span><span class="s7">:</span><span class="s4"> </span><span class="s1">'border-green-400 bg-green-50'</span><span class="s7">,</span></p>
<p class="p7"><span class="s4"><span class="Apple-converted-space">                    </span></span><span class="s1">'skipped'</span><span class="s7">:</span><span class="s4"> </span><span class="s1">'border-red-400 bg-red-50'</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s7">}[</span><span class="s1">displayStatus</span><span class="s7">]</span><span class="s1"> </span><span class="s7">||</span><span class="s1"> </span><span class="s8">'border-gray-300'</span><span class="s7">;</span></p>
<p class="p6"><span class="s9"></span><br></p>
<p class="p5"><span class="s4"><span class="Apple-converted-space">                </span></span><span class="s1">// Apply dynamic styling based on sport type</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s12">const</span><span class="s1"> sportColorClass </span><span class="s7">=</span><span class="s1"> </span><span class="s8">`sport-</span><span class="s7">${</span><span class="s1">session</span><span class="s7">.</span><span class="s1">sport</span><span class="s7">.</span><span class="s1">toLowerCase</span><span class="s7">().</span><span class="s1">replace</span><span class="s7">(</span><span class="s15">/\s/</span><span class="s12">g</span><span class="s7">,</span><span class="s1"> </span><span class="s8">'-'</span><span class="s7">)}</span><span class="s8">`</span><span class="s7">;</span></p>
<p class="p6"><span class="s9"></span><br></p>
<p class="p5"><span class="s4"><span class="Apple-converted-space">                </span></span><span class="s1">// Create the HTML structure for a single day's workout card</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s12">const</span><span class="s1"> dayCard </span><span class="s7">=</span><span class="s1"> document</span><span class="s7">.</span><span class="s1">createElement</span><span class="s7">(</span><span class="s8">'div'</span><span class="s7">);</span></p>
<p class="p7"><span class="s4"><span class="Apple-converted-space">                </span>dayCard</span><span class="s7">.</span><span class="s4">className </span><span class="s7">=</span><span class="s4"> </span><span class="s1">`bg-white rounded-lg shadow-md p-4 mb-4 border-l-4 </span><span class="s7">${</span><span class="s4">statusColorClass</span><span class="s7">}</span><span class="s1">`</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span>dayCard</span><span class="s7">.</span><span class="s1">innerHTML </span><span class="s7">=</span><span class="s1"> </span><span class="s8">`</span></p>
<p class="p7"><span class="s1"><span class="Apple-converted-space">                    </span>&lt;h3 class="text-lg font-semibold text-gray-800 mb-2 flex items-center justify-between"&gt;</span></p>
<p class="p7"><span class="s1"><span class="Apple-converted-space">                        </span>&lt;span&gt;</span><span class="s7">${</span><span class="s4">session</span><span class="s7">.</span><span class="s4">day</span><span class="s7">}</span><span class="s1"> - </span><span class="s7">${</span><span class="s12">new</span><span class="s4"> </span><span class="s13">Date</span><span class="s7">(</span><span class="s4">session</span><span class="s7">.</span><span class="s4">date</span><span class="s7">).</span><span class="s4">toLocaleDateString</span><span class="s7">(</span><span class="s1">'en-US'</span><span class="s7">,</span><span class="s4"> </span><span class="s7">{</span><span class="s4"> month</span><span class="s7">:</span><span class="s4"> </span><span class="s1">'short'</span><span class="s7">,</span><span class="s4"> day</span><span class="s7">:</span><span class="s4"> </span><span class="s1">'numeric'</span><span class="s4"> </span><span class="s7">})}</span><span class="s1">&lt;/span&gt;</span></p>
<p class="p7"><span class="s1"><span class="Apple-converted-space">                        </span>&lt;span class="text-sm font-normal text-gray-500"&gt;</span><span class="s7">${</span><span class="s4">session</span><span class="s7">.</span><span class="s4">sport </span><span class="s7">===</span><span class="s4"> </span><span class="s1">'Rest'</span><span class="s4"> </span><span class="s7">?</span><span class="s4"> </span><span class="s1">''</span><span class="s4"> </span><span class="s7">:</span><span class="s4"> displayStatus</span><span class="s7">.</span><span class="s4">toUpperCase</span><span class="s7">()}</span><span class="s1">&lt;/span&gt;</span></p>
<p class="p7"><span class="s1"><span class="Apple-converted-space">                    </span>&lt;/h3&gt;</span></p>
<p class="p7"><span class="s1"><span class="Apple-converted-space">                    </span>&lt;div class="flex items-center gap-2 mb-2 p-2 rounded-md </span><span class="s7">${</span><span class="s4">sportColorClass</span><span class="s7">}</span><span class="s1"> text-sm font-medium"&gt;</span></p>
<p class="p7"><span class="s1"><span class="Apple-converted-space">                        </span></span><span class="s7">${</span><span class="s4">getSportIcon</span><span class="s7">(</span><span class="s4">session</span><span class="s7">.</span><span class="s4">sport</span><span class="s7">)}</span><span class="s1"> &lt;!-- Displays an SVG icon for the sport --&gt;</span></p>
<p class="p7"><span class="s1"><span class="Apple-converted-space">                        </span>&lt;p class="text-gray-900"&gt;</span><span class="s7">${</span><span class="s4">session</span><span class="s7">.</span><span class="s4">sport</span><span class="s7">}</span><span class="s1">&lt;/p&gt;</span></p>
<p class="p7"><span class="s1"><span class="Apple-converted-space">                        </span>&lt;p class="text-gray-700 ml-auto"&gt;</span><span class="s7">${</span><span class="s4">session</span><span class="s7">.</span><span class="s4">type</span><span class="s7">}</span><span class="s1">&lt;/p&gt;</span></p>
<p class="p7"><span class="s1"><span class="Apple-converted-space">                    </span>&lt;/div&gt;</span></p>
<p class="p7"><span class="s1"><span class="Apple-converted-space">                    </span>&lt;div class="text-gray-700 text-sm"&gt;</span></p>
<p class="p7"><span class="s1"><span class="Apple-converted-space">                        </span>&lt;p&gt;&lt;strong&gt;Time:&lt;/strong&gt; </span><span class="s7">${</span><span class="s4">displayTime</span><span class="s7">}</span><span class="s1">&lt;/p&gt;</span></p>
<p class="p7"><span class="s1"><span class="Apple-converted-space">                        </span>&lt;p&gt;&lt;strong&gt;Distance:&lt;/strong&gt; </span><span class="s7">${</span><span class="s4">displayDistance</span><span class="s7">}</span><span class="s1">&lt;/p&gt;</span></p>
<p class="p7"><span class="s1"><span class="Apple-converted-space">                        </span>&lt;p&gt;&lt;strong&gt;Intensity:&lt;/strong&gt; </span><span class="s7">${</span><span class="s4">displayIntensity</span><span class="s7">}</span><span class="s1">&lt;/p&gt;</span></p>
<p class="p7"><span class="s1"><span class="Apple-converted-space">                        </span></span><span class="s7">${</span><span class="s4">displayRPE </span><span class="s7">?</span><span class="s4"> </span><span class="s1">`&lt;p&gt;</span><span class="s7">${</span><span class="s4">displayRPE</span><span class="s7">}</span><span class="s1">&lt;/p&gt;`</span><span class="s4"> </span><span class="s7">:</span><span class="s4"> </span><span class="s1">''</span><span class="s7">}</span></p>
<p class="p7"><span class="s1"><span class="Apple-converted-space">                        </span></span><span class="s7">${</span><span class="s4">displayNotes </span><span class="s7">?</span><span class="s4"> </span><span class="s1">`&lt;p&gt;&lt;strong&gt;Notes:&lt;/strong&gt; </span><span class="s7">${</span><span class="s4">displayNotes</span><span class="s7">}</span><span class="s1">&lt;/p&gt;`</span><span class="s4"> </span><span class="s7">:</span><span class="s4"> </span><span class="s1">''</span><span class="s7">}</span></p>
<p class="p7"><span class="s1"><span class="Apple-converted-space">                    </span>&lt;/div&gt;</span></p>
<p class="p7"><span class="s1"><span class="Apple-converted-space">                    </span>&lt;div class="flex justify-end mt-3"&gt;</span></p>
<p class="p7"><span class="s1"><span class="Apple-converted-space">                        </span></span><span class="s7">${</span><span class="s4">session</span><span class="s7">.</span><span class="s4">sport </span><span class="s7">!==</span><span class="s4"> </span><span class="s1">'Rest'</span><span class="s4"> </span><span class="s7">&amp;&amp;</span><span class="s4"> session</span><span class="s7">.</span><span class="s4">sport </span><span class="s7">!==</span><span class="s4"> </span><span class="s1">'Race Day'</span><span class="s4"> </span><span class="s7">?</span><span class="s4"> </span><span class="s1">`</span></p>
<p class="p7"><span class="s1"><span class="Apple-converted-space">                        </span>&lt;button data-session-date="</span><span class="s7">${</span><span class="s4">session</span><span class="s7">.</span><span class="s4">date</span><span class="s7">}</span><span class="s1">" data-session-sport="</span><span class="s7">${</span><span class="s4">session</span><span class="s7">.</span><span class="s4">sport</span><span class="s7">}</span><span class="s1">" data-session-type="</span><span class="s7">${</span><span class="s4">session</span><span class="s7">.</span><span class="s4">type</span><span class="s7">}</span><span class="s1">"</span></p>
<p class="p7"><span class="s1"><span class="Apple-converted-space">                                </span>class="edit-session-btn px-3 py-1 bg-blue-500 text-white text-sm rounded-md shadow hover:bg-blue-600 transition-colors"&gt;</span></p>
<p class="p7"><span class="s1"><span class="Apple-converted-space">                            </span>Edit Log</span></p>
<p class="p7"><span class="s1"><span class="Apple-converted-space">                        </span>&lt;/button&gt;</span></p>
<p class="p7"><span class="s1"><span class="Apple-converted-space">                        </span>`</span><span class="s4"> </span><span class="s7">:</span><span class="s4"> </span><span class="s1">''</span><span class="s7">}</span></p>
<p class="p7"><span class="s1"><span class="Apple-converted-space">                    </span>&lt;/div&gt;</span></p>
<p class="p7"><span class="s1"><span class="Apple-converted-space">                </span>`</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span>trainingScheduleEl</span><span class="s7">.</span><span class="s1">appendChild</span><span class="s7">(</span><span class="s1">dayCard</span><span class="s7">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s7">});</span></p>
<p class="p5"><span class="s4"><span class="Apple-converted-space">            </span>attachEditListeners</span><span class="s7">();</span><span class="s4"> </span><span class="s1">// Attach event listeners to the new "Edit Log" buttons</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s7">}</span></p>
<p class="p6"><span class="s9"></span><br></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s10">/**</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">         </span>* Returns an SVG icon string for a given sport type.</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">         </span>* @param {string} sport - The name of the sport (e.g., "Swim", "Bike").</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">         </span>* @returns {string} An SVG icon string.</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">         </span>*/</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s12">function</span><span class="s1"> getSportIcon</span><span class="s7">(</span><span class="s1">sport</span><span class="s7">)</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p5"><span class="s4"><span class="Apple-converted-space">            </span></span><span class="s1">// Using simple SVG icons for a clean look.</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s12">switch</span><span class="s1"> </span><span class="s7">(</span><span class="s1">sport</span><span class="s7">.</span><span class="s1">toLowerCase</span><span class="s7">())</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p7"><span class="s4"><span class="Apple-converted-space">                </span></span><span class="s12">case</span><span class="s4"> </span><span class="s1">'swim'</span><span class="s7">:</span><span class="s4"> </span><span class="s12">return</span><span class="s4"> </span><span class="s1">`&lt;svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"&gt;&lt;path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 19V5a2 2 0 00-2-2H7a2 2 0 00-2 2v14l-2 2h18l-2-2zM12 4v12"&gt;&lt;/path&gt;&lt;path d="M9 11l-4 4m8-4l4 4"&gt;&lt;/path&gt;&lt;/svg&gt;`</span><span class="s7">;</span><span class="s4"> </span><span class="s10">// Swimmer icon</span></p>
<p class="p7"><span class="s4"><span class="Apple-converted-space">                </span></span><span class="s12">case</span><span class="s4"> </span><span class="s1">'bike'</span><span class="s7">:</span><span class="s4"> </span><span class="s12">return</span><span class="s4"> </span><span class="s1">`&lt;svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"&gt;&lt;path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8V4m0 8v4m-6 1a3 3 0 110-6 3 3 0 010 6zm12 0a3 3 0 110-6 3 3 0 010 6z"&gt;&lt;/path&gt;&lt;/svg&gt;`</span><span class="s7">;</span><span class="s4"> </span><span class="s10">// Bicycle icon</span></p>
<p class="p7"><span class="s4"><span class="Apple-converted-space">                </span></span><span class="s12">case</span><span class="s4"> </span><span class="s1">'run'</span><span class="s7">:</span><span class="s4"> </span><span class="s12">return</span><span class="s4"> </span><span class="s1">`&lt;svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"&gt;&lt;path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4m0-10.47L20 7M4 7l8 4.47"&gt;&lt;/path&gt;&lt;/svg&gt;`</span><span class="s7">;</span><span class="s4"> </span><span class="s10">// Running person icon</span></p>
<p class="p7"><span class="s4"><span class="Apple-converted-space">                </span></span><span class="s12">case</span><span class="s4"> </span><span class="s1">'strength'</span><span class="s7">:</span><span class="s4"> </span><span class="s12">return</span><span class="s4"> </span><span class="s1">`&lt;svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"&gt;&lt;path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 12H9.5a2.5 2.5 0 01-2.5-2.5V9.5A2.5 2.5 0 019.5 7h.5m5 0h.5a2.5 2.5 0 012.5 2.5v.5a2.5 2.5 0 01-2.5 2.5h-.5m-7 0h2m-2 0h-2"&gt;&lt;/path&gt;&lt;/svg&gt;`</span><span class="s7">;</span><span class="s4"> </span><span class="s10">// Dumbbell icon</span></p>
<p class="p7"><span class="s4"><span class="Apple-converted-space">                </span></span><span class="s12">case</span><span class="s4"> </span><span class="s1">'core'</span><span class="s7">:</span><span class="s4"> </span><span class="s12">return</span><span class="s4"> </span><span class="s1">`&lt;svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"&gt;&lt;path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 20l-5-5a7 7 0 01-2-5.9c.2-1.9 1-3.6 2.3-4.9S6.9 2 8.8 2a7 7 0 016 2m2 10a7 7 0 01-2 5.9c-.2 1.9-1 3.6-2.3 4.9S17.1 22 15.2 22a7 7 0 01-6-2"&gt;&lt;/path&gt;&lt;/svg&gt;`</span><span class="s7">;</span><span class="s4"> </span><span class="s10">// Abs icon</span></p>
<p class="p7"><span class="s4"><span class="Apple-converted-space">                </span></span><span class="s12">case</span><span class="s4"> </span><span class="s1">'rest'</span><span class="s7">:</span><span class="s4"> </span><span class="s12">return</span><span class="s4"> </span><span class="s1">`&lt;svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"&gt;&lt;path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"&gt;&lt;/path&gt;&lt;/svg&gt;`</span><span class="s7">;</span><span class="s4"> </span><span class="s10">// X icon</span></p>
<p class="p7"><span class="s4"><span class="Apple-converted-space">                </span></span><span class="s12">case</span><span class="s4"> </span><span class="s1">'recovery'</span><span class="s7">:</span><span class="s4"> </span><span class="s12">return</span><span class="s4"> </span><span class="s1">`&lt;svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"&gt;&lt;path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"&gt;&lt;/path&gt;&lt;/svg&gt;`</span><span class="s7">;</span><span class="s4"> </span><span class="s10">// Heart icon</span></p>
<p class="p7"><span class="s4"><span class="Apple-converted-space">                </span></span><span class="s12">case</span><span class="s4"> </span><span class="s1">'brick'</span><span class="s7">:</span><span class="s4"> </span><span class="s12">return</span><span class="s4"> </span><span class="s1">`&lt;svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"&gt;&lt;path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"&gt;&lt;/path&gt;&lt;path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 12a9 9 0 11-18 0 9 9 0 0118 0z"&gt;&lt;/path&gt;&lt;/svg&gt;`</span><span class="s7">;</span><span class="s4"> </span><span class="s10">// Bike + Run icon</span></p>
<p class="p7"><span class="s4"><span class="Apple-converted-space">                </span></span><span class="s12">case</span><span class="s4"> </span><span class="s1">'triathlon'</span><span class="s7">:</span><span class="s4"> </span><span class="s12">return</span><span class="s4"> </span><span class="s1">`&lt;svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"&gt;&lt;path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"&gt;&lt;/path&gt;&lt;path d="M21 12a9 9 0 11-18 0 9 9 0 0118 0z"&gt;&lt;/path&gt;&lt;path d="M12 2C6.477 2 2 6.477 2 12s4.477 10 10 10 10-4.477 10-10S17.523 2 12 2z"&gt;&lt;/path&gt;&lt;/svg&gt;`</span><span class="s7">;</span><span class="s4"> </span><span class="s10">// Triathlon symbol (combined)</span></p>
<p class="p7"><span class="s4"><span class="Apple-converted-space">                </span></span><span class="s12">case</span><span class="s4"> </span><span class="s1">'race day'</span><span class="s7">:</span><span class="s4"> </span><span class="s12">return</span><span class="s4"> </span><span class="s1">`&lt;svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"&gt;&lt;path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"&gt;&lt;/path&gt;&lt;path d="M8 7v4a1 1 0 001 1h4a1 1 0 001-1V7m0 10.5a1.5 1.5 0 11-3 0 1.5 1.5 0 013 0z"&gt;&lt;/path&gt;&lt;path d="M18 10a1 1 0 00-1-1h-2a1 1 0 00-1 1v2a1 1 0 001 1h2a1 1 0 001-1v-2z"&gt;&lt;/path&gt;&lt;/svg&gt;`</span><span class="s7">;</span><span class="s4"> </span><span class="s10">// Checkered flag</span></p>
<p class="p7"><span class="s4"><span class="Apple-converted-space">                </span></span><span class="s12">default</span><span class="s7">:</span><span class="s4"> </span><span class="s12">return</span><span class="s4"> </span><span class="s1">`&lt;svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"&gt;&lt;path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6.253v13.5m0-13.5a4.5 4.125 0 110 0 4.5 4.125 0 010 0zM12 6.253v13.5m0-13.5a4.5 4.125 0 100 0 4.5 4.125 0 000 0z"&gt;&lt;/path&gt;&lt;/svg&gt;`</span><span class="s7">;</span><span class="s4"> </span><span class="s10">// Generic activity icon</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s7">}</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s7">}</span></p>
<p class="p6"><span class="s9"></span><br></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s10">/**</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">         </span>* Attaches click event listeners to all "Edit Log" buttons in the rendered schedule.</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">         </span>* When clicked, opens the session detail modal with relevant data.</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">         </span>*/</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s12">function</span><span class="s1"> attachEditListeners</span><span class="s7">()</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span>document</span><span class="s7">.</span><span class="s1">querySelectorAll</span><span class="s7">(</span><span class="s8">'.edit-session-btn'</span><span class="s7">).</span><span class="s1">forEach</span><span class="s7">(</span><span class="s1">button </span><span class="s7">=&gt;</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span>button</span><span class="s7">.</span><span class="s1">onclick </span><span class="s7">=</span><span class="s1"> </span><span class="s7">(</span><span class="s1">event</span><span class="s7">)</span><span class="s1"> </span><span class="s7">=&gt;</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                    </span></span><span class="s12">const</span><span class="s1"> date </span><span class="s7">=</span><span class="s1"> event</span><span class="s7">.</span><span class="s1">target</span><span class="s7">.</span><span class="s1">dataset</span><span class="s7">.</span><span class="s1">sessionDate</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                    </span></span><span class="s12">const</span><span class="s1"> sport </span><span class="s7">=</span><span class="s1"> event</span><span class="s7">.</span><span class="s1">target</span><span class="s7">.</span><span class="s1">dataset</span><span class="s7">.</span><span class="s1">sessionSport</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                    </span></span><span class="s12">const</span><span class="s1"> type </span><span class="s7">=</span><span class="s1"> event</span><span class="s7">.</span><span class="s1">target</span><span class="s7">.</span><span class="s1">dataset</span><span class="s7">.</span><span class="s1">sessionType</span><span class="s7">;</span></p>
<p class="p6"><span class="s9"></span><br></p>
<p class="p5"><span class="s4"><span class="Apple-converted-space">                    </span></span><span class="s1">// Find the original planned session from the `trainingPlan` array</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                    </span></span><span class="s12">const</span><span class="s1"> weekPlan </span><span class="s7">=</span><span class="s1"> trainingPlan</span><span class="s7">.</span><span class="s1">find</span><span class="s7">(</span><span class="s1">w </span><span class="s7">=&gt;</span><span class="s1"> w</span><span class="s7">.</span><span class="s1">week </span><span class="s7">===</span><span class="s1"> currentWeek</span><span class="s7">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                    </span></span><span class="s12">const</span><span class="s1"> originalSession </span><span class="s7">=</span><span class="s1"> weekPlan</span><span class="s7">.</span><span class="s1">workouts</span><span class="s7">.</span><span class="s1">find</span><span class="s7">(</span><span class="s1">s </span><span class="s7">=&gt;</span><span class="s1"> s</span><span class="s7">.</span><span class="s1">date </span><span class="s7">===</span><span class="s1"> date </span><span class="s7">&amp;&amp;</span><span class="s1"> s</span><span class="s7">.</span><span class="s1">sport </span><span class="s7">===</span><span class="s1"> sport </span><span class="s7">&amp;&amp;</span><span class="s1"> s</span><span class="s7">.</span><span class="s1">type </span><span class="s7">===</span><span class="s1"> type</span><span class="s7">);</span></p>
<p class="p6"><span class="s9"></span><br></p>
<p class="p5"><span class="s4"><span class="Apple-converted-space">                    </span></span><span class="s1">// Find the user's logged data for this specific session</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                    </span></span><span class="s12">const</span><span class="s1"> loggedSession </span><span class="s7">=</span><span class="s1"> </span><span class="s7">(</span><span class="s1">userLogs</span><span class="s7">[</span><span class="s1">date</span><span class="s7">]</span><span class="s1"> </span><span class="s7">||</span><span class="s1"> </span><span class="s7">[]).</span><span class="s1">find</span><span class="s7">(</span><span class="s1">log </span><span class="s7">=&gt;</span><span class="s1"> log</span><span class="s7">.</span><span class="s1">sport </span><span class="s7">===</span><span class="s1"> sport </span><span class="s7">&amp;&amp;</span><span class="s1"> log</span><span class="s7">.</span><span class="s1">type </span><span class="s7">===</span><span class="s1"> type</span><span class="s7">);</span></p>
<p class="p6"><span class="s9"></span><br></p>
<p class="p5"><span class="s4"><span class="Apple-converted-space">                    </span></span><span class="s1">// Store the selected session data globally for the modal</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                    </span>selectedSessionData </span><span class="s7">=</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                        </span>original</span><span class="s7">:</span><span class="s1"> originalSession</span><span class="s7">,</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                        </span>logged</span><span class="s7">:</span><span class="s1"> loggedSession</span><span class="s7">,</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                        </span>id</span><span class="s7">:</span><span class="s1"> loggedSession </span><span class="s7">?</span><span class="s1"> loggedSession</span><span class="s7">.</span><span class="s1">id </span><span class="s7">:</span><span class="s1"> </span><span class="s12">null</span><span class="s1"> </span><span class="s10">// Firestore document ID if it exists</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                    </span></span><span class="s7">};</span></p>
<p class="p6"><span class="s9"></span><br></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                    </span>openSessionDetailModal</span><span class="s7">();</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s7">};</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s7">});</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s7">}</span></p>
<p class="p6"><span class="s9"></span><br></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s10">/**</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">         </span>* Opens the session detail modal and populates it with data from `selectedSessionData`.</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">         </span>*/</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s12">function</span><span class="s1"> openSessionDetailModal</span><span class="s7">()</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s12">const</span><span class="s1"> original </span><span class="s7">=</span><span class="s1"> selectedSessionData</span><span class="s7">.</span><span class="s1">original</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s12">const</span><span class="s1"> logged </span><span class="s7">=</span><span class="s1"> selectedSessionData</span><span class="s7">.</span><span class="s1">logged</span><span class="s7">;</span></p>
<p class="p6"><span class="s9"></span><br></p>
<p class="p5"><span class="s4"><span class="Apple-converted-space">            </span></span><span class="s1">// Populate modal fields</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span>modalSessionTitleEl</span><span class="s7">.</span><span class="s1">textContent </span><span class="s7">=</span><span class="s1"> </span><span class="s8">`</span><span class="s7">${</span><span class="s1">original</span><span class="s7">.</span><span class="s1">day</span><span class="s7">}</span><span class="s8"> - </span><span class="s7">${</span><span class="s1">original</span><span class="s7">.</span><span class="s1">sport</span><span class="s7">}</span><span class="s8"> - </span><span class="s7">${</span><span class="s1">original</span><span class="s7">.</span><span class="s1">type</span><span class="s7">}</span><span class="s8">`</span><span class="s7">;</span></p>
<p class="p7"><span class="s4"><span class="Apple-converted-space">            </span>modalSessionPlannedEl</span><span class="s7">.</span><span class="s4">innerHTML </span><span class="s7">=</span><span class="s4"> </span><span class="s1">`&lt;strong&gt;Time:&lt;/strong&gt; </span><span class="s7">${</span><span class="s4">original</span><span class="s7">.</span><span class="s4">time</span><span class="s7">}</span><span class="s1">&lt;br&gt;&lt;strong&gt;Distance:&lt;/strong&gt; </span><span class="s7">${</span><span class="s4">original</span><span class="s7">.</span><span class="s4">distance</span><span class="s7">}</span><span class="s1">&lt;br&gt;&lt;strong&gt;Intensity:&lt;/strong&gt; </span><span class="s7">${</span><span class="s4">original</span><span class="s7">.</span><span class="s4">intensity</span><span class="s7">}</span><span class="s1">&lt;br&gt;&lt;strong&gt;RPE:&lt;/strong&gt; </span><span class="s7">${</span><span class="s4">original</span><span class="s7">.</span><span class="s4">rpe</span><span class="s7">}</span><span class="s1">`</span><span class="s7">;</span></p>
<p class="p6"><span class="s9"></span><br></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span>modalStatusEl</span><span class="s7">.</span><span class="s1">value </span><span class="s7">=</span><span class="s1"> logged </span><span class="s7">?</span><span class="s1"> logged</span><span class="s7">.</span><span class="s1">status </span><span class="s7">:</span><span class="s1"> </span><span class="s8">'planned'</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span>modalTimeEl</span><span class="s7">.</span><span class="s1">value </span><span class="s7">=</span><span class="s1"> logged </span><span class="s7">?</span><span class="s1"> logged</span><span class="s7">.</span><span class="s1">loggedTime </span><span class="s7">:</span><span class="s1"> </span><span class="s8">''</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span>modalDistanceEl</span><span class="s7">.</span><span class="s1">value </span><span class="s7">=</span><span class="s1"> logged</span><span class="s7">?.</span><span class="s1">loggedDistance </span><span class="s7">!==</span><span class="s1"> </span><span class="s12">null</span><span class="s1"> </span><span class="s7">&amp;&amp;</span><span class="s1"> logged</span><span class="s7">?.</span><span class="s1">loggedDistance </span><span class="s7">!==</span><span class="s1"> </span><span class="s12">undefined</span><span class="s1"> </span><span class="s7">?</span><span class="s1"> logged</span><span class="s7">.</span><span class="s1">loggedDistance </span><span class="s7">:</span><span class="s1"> </span><span class="s8">''</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span>modalIntensityEl</span><span class="s7">.</span><span class="s1">value </span><span class="s7">=</span><span class="s1"> logged </span><span class="s7">?</span><span class="s1"> logged</span><span class="s7">.</span><span class="s1">intensity </span><span class="s7">:</span><span class="s1"> </span><span class="s8">''</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span>modalRPEEl</span><span class="s7">.</span><span class="s1">value </span><span class="s7">=</span><span class="s1"> logged</span><span class="s7">?.</span><span class="s1">rpe </span><span class="s7">!==</span><span class="s1"> </span><span class="s12">null</span><span class="s1"> </span><span class="s7">&amp;&amp;</span><span class="s1"> logged</span><span class="s7">?.</span><span class="s1">rpe </span><span class="s7">!==</span><span class="s1"> </span><span class="s12">undefined</span><span class="s1"> </span><span class="s7">?</span><span class="s1"> logged</span><span class="s7">.</span><span class="s1">rpe </span><span class="s7">:</span><span class="s1"> </span><span class="s8">''</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span>modalNotesEl</span><span class="s7">.</span><span class="s1">value </span><span class="s7">=</span><span class="s1"> logged </span><span class="s7">?</span><span class="s1"> logged</span><span class="s7">.</span><span class="s1">notes </span><span class="s7">:</span><span class="s1"> </span><span class="s8">''</span><span class="s7">;</span></p>
<p class="p6"><span class="s9"></span><br></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span>sessionDetailModal</span><span class="s7">.</span><span class="s1">classList</span><span class="s7">.</span><span class="s1">remove</span><span class="s7">(</span><span class="s8">'hidden'</span><span class="s7">);</span><span class="s1"> </span><span class="s10">// Show the modal</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s7">}</span></p>
<p class="p6"><span class="s9"></span><br></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s10">/**</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">         </span>* Closes the session detail modal and clears `selectedSessionData`.</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">         </span>*/</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s12">function</span><span class="s1"> closeSessionDetailModal</span><span class="s7">()</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span>sessionDetailModal</span><span class="s7">.</span><span class="s1">classList</span><span class="s7">.</span><span class="s1">add</span><span class="s7">(</span><span class="s8">'hidden'</span><span class="s7">);</span><span class="s1"> </span><span class="s10">// Hide the modal</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span>selectedSessionData </span><span class="s7">=</span><span class="s1"> </span><span class="s12">null</span><span class="s7">;</span><span class="s1"> </span><span class="s10">// Clear selected data</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s7">}</span></p>
<p class="p6"><span class="s9"></span><br></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s10">/**</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">         </span>* Saves or updates a session log in Firestore based on the modal's input fields.</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">         </span>*/</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s12">async</span><span class="s1"> </span><span class="s12">function</span><span class="s1"> saveSessionLog</span><span class="s7">()</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s12">if</span><span class="s1"> </span><span class="s7">(!</span><span class="s1">userId</span><span class="s7">)</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p7"><span class="s4"><span class="Apple-converted-space">                </span>showStatusMessage</span><span class="s7">(</span><span class="s1">"App not ready. Please wait for user authentication."</span><span class="s7">,</span><span class="s4"> </span><span class="s1">"error"</span><span class="s7">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s12">return</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s7">}</span></p>
<p class="p6"><span class="s9"></span><br></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s12">const</span><span class="s1"> original </span><span class="s7">=</span><span class="s1"> selectedSessionData</span><span class="s7">.</span><span class="s1">original</span><span class="s7">;</span></p>
<p class="p5"><span class="s4"><span class="Apple-converted-space">            </span></span><span class="s1">// Create a new log object from the modal inputs</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s12">const</span><span class="s1"> newLog </span><span class="s7">=</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span>date</span><span class="s7">:</span><span class="s1"> original</span><span class="s7">.</span><span class="s1">date</span><span class="s7">,</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span>week</span><span class="s7">:</span><span class="s1"> currentWeek</span><span class="s7">,</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span>dayOfWeek</span><span class="s7">:</span><span class="s1"> original</span><span class="s7">.</span><span class="s1">day</span><span class="s7">,</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span>sport</span><span class="s7">:</span><span class="s1"> original</span><span class="s7">.</span><span class="s1">sport</span><span class="s7">,</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span>type</span><span class="s7">:</span><span class="s1"> original</span><span class="s7">.</span><span class="s1">type</span><span class="s7">,</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span>status</span><span class="s7">:</span><span class="s1"> modalStatusEl</span><span class="s7">.</span><span class="s1">value</span><span class="s7">,</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span>loggedTime</span><span class="s7">:</span><span class="s1"> modalTimeEl</span><span class="s7">.</span><span class="s1">value</span><span class="s7">,</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span>loggedDistance</span><span class="s7">:</span><span class="s1"> parseFloat</span><span class="s7">(</span><span class="s1">modalDistanceEl</span><span class="s7">.</span><span class="s1">value</span><span class="s7">)</span><span class="s1"> </span><span class="s7">||</span><span class="s1"> </span><span class="s12">null</span><span class="s7">,</span><span class="s1"> </span><span class="s10">// Convert to number, or null if empty</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span>intensity</span><span class="s7">:</span><span class="s1"> modalIntensityEl</span><span class="s7">.</span><span class="s1">value</span><span class="s7">,</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span>rpe</span><span class="s7">:</span><span class="s1"> parseInt</span><span class="s7">(</span><span class="s1">modalRPEEl</span><span class="s7">.</span><span class="s1">value</span><span class="s7">)</span><span class="s1"> </span><span class="s7">||</span><span class="s1"> </span><span class="s12">null</span><span class="s7">,</span><span class="s1"> </span><span class="s10">// Convert to integer, or null if empty</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span>notes</span><span class="s7">:</span><span class="s1"> modalNotesEl</span><span class="s7">.</span><span class="s1">value</span><span class="s7">,</span></p>
<p class="p5"><span class="s4"><span class="Apple-converted-space">                </span>originalPlan</span><span class="s7">:</span><span class="s4"> </span><span class="s7">{</span><span class="s4"> </span><span class="s1">// Store original plan details for reference</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                    </span>time</span><span class="s7">:</span><span class="s1"> original</span><span class="s7">.</span><span class="s1">time</span><span class="s7">,</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                    </span>distance</span><span class="s7">:</span><span class="s1"> original</span><span class="s7">.</span><span class="s1">distance</span><span class="s7">,</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                    </span>intensity</span><span class="s7">:</span><span class="s1"> original</span><span class="s7">.</span><span class="s1">intensity</span><span class="s7">,</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                    </span>rpe</span><span class="s7">:</span><span class="s1"> original</span><span class="s7">.</span><span class="s1">rpe </span><span class="s7">!==</span><span class="s1"> </span><span class="s12">null</span><span class="s1"> </span><span class="s7">&amp;&amp;</span><span class="s1"> original</span><span class="s7">.</span><span class="s1">rpe </span><span class="s7">!==</span><span class="s1"> </span><span class="s12">undefined</span><span class="s1"> </span><span class="s7">?</span><span class="s1"> original</span><span class="s7">.</span><span class="s1">rpe </span><span class="s7">:</span><span class="s1"> </span><span class="s12">null</span><span class="s7">,</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                    </span>isBrick</span><span class="s7">:</span><span class="s1"> original</span><span class="s7">.</span><span class="s1">isBrick </span><span class="s7">||</span><span class="s1"> </span><span class="s12">false</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s7">}</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s7">};</span></p>
<p class="p6"><span class="s9"></span><br></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s12">try</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s12">const</span><span class="s1"> logsCollectionRef </span><span class="s7">=</span><span class="s1"> collection</span><span class="s7">(</span><span class="s1">db</span><span class="s7">,</span><span class="s1"> </span><span class="s8">`artifacts/</span><span class="s7">${</span><span class="s1">appId</span><span class="s7">}</span><span class="s8">/users/</span><span class="s7">${</span><span class="s1">userId</span><span class="s7">}</span><span class="s8">/training_logs`</span><span class="s7">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s12">if</span><span class="s1"> </span><span class="s7">(</span><span class="s1">selectedSessionData</span><span class="s7">.</span><span class="s1">id</span><span class="s7">)</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p5"><span class="s4"><span class="Apple-converted-space">                    </span></span><span class="s1">// If an ID exists, update the existing document</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                    </span></span><span class="s12">const</span><span class="s1"> docRef </span><span class="s7">=</span><span class="s1"> doc</span><span class="s7">(</span><span class="s1">db</span><span class="s7">,</span><span class="s1"> logsCollectionRef</span><span class="s7">.</span><span class="s1">path</span><span class="s7">,</span><span class="s1"> selectedSessionData</span><span class="s7">.</span><span class="s1">id</span><span class="s7">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                    </span></span><span class="s12">await</span><span class="s1"> updateDoc</span><span class="s7">(</span><span class="s1">docRef</span><span class="s7">,</span><span class="s1"> newLog</span><span class="s7">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                    </span>showStatusMessage</span><span class="s7">(</span><span class="s8">"Log updated successfully!"</span><span class="s7">,</span><span class="s1"> </span><span class="s8">"success"</span><span class="s7">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s7">}</span><span class="s1"> </span><span class="s12">else</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p5"><span class="s4"><span class="Apple-converted-space">                    </span></span><span class="s1">// Otherwise, add a new document</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                    </span></span><span class="s12">await</span><span class="s1"> addDoc</span><span class="s7">(</span><span class="s1">logsCollectionRef</span><span class="s7">,</span><span class="s1"> newLog</span><span class="s7">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                    </span>showStatusMessage</span><span class="s7">(</span><span class="s8">"Log added successfully!"</span><span class="s7">,</span><span class="s1"> </span><span class="s8">"success"</span><span class="s7">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s7">}</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span>closeSessionDetailModal</span><span class="s7">();</span><span class="s1"> </span><span class="s10">// Close modal after saving</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s7">}</span><span class="s1"> </span><span class="s12">catch</span><span class="s1"> </span><span class="s7">(</span><span class="s1">error</span><span class="s7">)</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span>console</span><span class="s7">.</span><span class="s1">error</span><span class="s7">(</span><span class="s8">"Error saving session log:"</span><span class="s7">,</span><span class="s1"> error</span><span class="s7">);</span></p>
<p class="p7"><span class="s4"><span class="Apple-converted-space">                </span>showStatusMessage</span><span class="s7">(</span><span class="s1">"Failed to save log. Please try again."</span><span class="s7">,</span><span class="s4"> </span><span class="s1">"error"</span><span class="s7">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s7">}</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s7">}</span></p>
<p class="p6"><span class="s9"></span><br></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s10">/**</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">         </span>* Calculates and displays the total distance for Swim, Bike, and Run for the current week.</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">         </span>* Only counts "completed" sessions. Handles parsing distances from brick workouts.</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">         </span>*/</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s12">function</span><span class="s1"> calculateAndDisplayWeeklyTotals</span><span class="s7">()</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s12">let</span><span class="s1"> totalSwim </span><span class="s7">=</span><span class="s1"> </span><span class="s14">0</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s12">let</span><span class="s1"> totalBike </span><span class="s7">=</span><span class="s1"> </span><span class="s14">0</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s12">let</span><span class="s1"> totalRun </span><span class="s7">=</span><span class="s1"> </span><span class="s14">0</span><span class="s7">;</span></p>
<p class="p6"><span class="s9"></span><br></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s12">const</span><span class="s1"> weekPlan </span><span class="s7">=</span><span class="s1"> trainingPlan</span><span class="s7">.</span><span class="s1">find</span><span class="s7">(</span><span class="s1">w </span><span class="s7">=&gt;</span><span class="s1"> w</span><span class="s7">.</span><span class="s1">week </span><span class="s7">===</span><span class="s1"> currentWeek</span><span class="s7">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s12">if</span><span class="s1"> </span><span class="s7">(!</span><span class="s1">weekPlan</span><span class="s7">)</span><span class="s1"> </span><span class="s12">return</span><span class="s7">;</span></p>
<p class="p6"><span class="s9"></span><br></p>
<p class="p5"><span class="s4"><span class="Apple-converted-space">            </span></span><span class="s1">// Iterate through each session in the current week's plan</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span>weekPlan</span><span class="s7">.</span><span class="s1">workouts</span><span class="s7">.</span><span class="s1">forEach</span><span class="s7">(</span><span class="s1">session </span><span class="s7">=&gt;</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s12">const</span><span class="s1"> sessionLogsForDate </span><span class="s7">=</span><span class="s1"> userLogs</span><span class="s7">[</span><span class="s1">session</span><span class="s7">.</span><span class="s1">date</span><span class="s7">]</span><span class="s1"> </span><span class="s7">||</span><span class="s1"> </span><span class="s7">[];</span></p>
<p class="p5"><span class="s4"><span class="Apple-converted-space">                </span></span><span class="s1">// Find the *completed* logged session that matches the planned one</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s12">const</span><span class="s1"> loggedSession </span><span class="s7">=</span><span class="s1"> sessionLogsForDate</span><span class="s7">.</span><span class="s1">find</span><span class="s7">(</span><span class="s1">log </span><span class="s7">=&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                    </span>log</span><span class="s7">.</span><span class="s1">sport </span><span class="s7">===</span><span class="s1"> session</span><span class="s7">.</span><span class="s1">sport </span><span class="s7">&amp;&amp;</span><span class="s1"> log</span><span class="s7">.</span><span class="s1">type </span><span class="s7">===</span><span class="s1"> session</span><span class="s7">.</span><span class="s1">type </span><span class="s7">&amp;&amp;</span><span class="s1"> log</span><span class="s7">.</span><span class="s1">status </span><span class="s7">===</span><span class="s1"> </span><span class="s8">'completed'</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s7">);</span></p>
<p class="p6"><span class="s9"></span><br></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s12">if</span><span class="s1"> </span><span class="s7">(</span><span class="s1">loggedSession</span><span class="s7">)</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p5"><span class="s4"><span class="Apple-converted-space">                    </span></span><span class="s1">// Check if it's a brick workout or a race day which has combined distances</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                    </span></span><span class="s12">if</span><span class="s1"> </span><span class="s7">(</span><span class="s1">loggedSession</span><span class="s7">.</span><span class="s1">originalPlan</span><span class="s7">.</span><span class="s1">isBrick </span><span class="s7">||</span><span class="s1"> loggedSession</span><span class="s7">.</span><span class="s1">sport</span><span class="s7">.</span><span class="s1">toLowerCase</span><span class="s7">()</span><span class="s1"> </span><span class="s7">===</span><span class="s1"> </span><span class="s8">'triathlon'</span><span class="s1"> </span><span class="s7">||</span><span class="s1"> loggedSession</span><span class="s7">.</span><span class="s1">sport</span><span class="s7">.</span><span class="s1">toLowerCase</span><span class="s7">()</span><span class="s1"> </span><span class="s7">===</span><span class="s1"> </span><span class="s8">'race day'</span><span class="s7">)</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                        </span></span><span class="s12">const</span><span class="s1"> originalDistanceString </span><span class="s7">=</span><span class="s1"> loggedSession</span><span class="s7">.</span><span class="s1">originalPlan</span><span class="s7">.</span><span class="s1">distance</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                        </span></span><span class="s12">if</span><span class="s1"> </span><span class="s7">(</span><span class="s1">originalDistanceString </span><span class="s7">&amp;&amp;</span><span class="s1"> </span><span class="s12">typeof</span><span class="s1"> originalDistanceString </span><span class="s7">===</span><span class="s1"> </span><span class="s8">'string'</span><span class="s7">)</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p5"><span class="s4"><span class="Apple-converted-space">                            </span></span><span class="s1">// Parse distances from combined string (e.g., "Bike: 20km, Run: 5km")</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                            </span></span><span class="s12">const</span><span class="s1"> parts </span><span class="s7">=</span><span class="s1"> originalDistanceString</span><span class="s7">.</span><span class="s1">split</span><span class="s7">(</span><span class="s8">', '</span><span class="s7">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                            </span>parts</span><span class="s7">.</span><span class="s1">forEach</span><span class="s7">(</span><span class="s1">part </span><span class="s7">=&gt;</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                                </span></span><span class="s12">if</span><span class="s1"> </span><span class="s7">(</span><span class="s1">part</span><span class="s7">.</span><span class="s1">includes</span><span class="s7">(</span><span class="s8">'Swim:'</span><span class="s7">))</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                                    </span></span><span class="s12">const</span><span class="s1"> dist </span><span class="s7">=</span><span class="s1"> parseFloat</span><span class="s7">(</span><span class="s1">part</span><span class="s7">.</span><span class="s1">replace</span><span class="s7">(</span><span class="s8">'Swim: '</span><span class="s7">,</span><span class="s1"> </span><span class="s8">''</span><span class="s7">).</span><span class="s1">replace</span><span class="s7">(</span><span class="s8">'km'</span><span class="s7">,</span><span class="s1"> </span><span class="s8">''</span><span class="s7">));</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                                    </span></span><span class="s12">if</span><span class="s1"> </span><span class="s7">(!</span><span class="s1">isNaN</span><span class="s7">(</span><span class="s1">dist</span><span class="s7">))</span><span class="s1"> totalSwim </span><span class="s7">+=</span><span class="s1"> dist</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                                </span></span><span class="s7">}</span><span class="s1"> </span><span class="s12">else</span><span class="s1"> </span><span class="s12">if</span><span class="s1"> </span><span class="s7">(</span><span class="s1">part</span><span class="s7">.</span><span class="s1">includes</span><span class="s7">(</span><span class="s8">'Bike:'</span><span class="s7">))</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                                    </span></span><span class="s12">const</span><span class="s1"> dist </span><span class="s7">=</span><span class="s1"> parseFloat</span><span class="s7">(</span><span class="s1">part</span><span class="s7">.</span><span class="s1">replace</span><span class="s7">(</span><span class="s8">'Bike: '</span><span class="s7">,</span><span class="s1"> </span><span class="s8">''</span><span class="s7">).</span><span class="s1">replace</span><span class="s7">(</span><span class="s8">'km'</span><span class="s7">,</span><span class="s1"> </span><span class="s8">''</span><span class="s7">));</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                                    </span></span><span class="s12">if</span><span class="s1"> </span><span class="s7">(!</span><span class="s1">isNaN</span><span class="s7">(</span><span class="s1">dist</span><span class="s7">))</span><span class="s1"> totalBike </span><span class="s7">+=</span><span class="s1"> dist</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                                </span></span><span class="s7">}</span><span class="s1"> </span><span class="s12">else</span><span class="s1"> </span><span class="s12">if</span><span class="s1"> </span><span class="s7">(</span><span class="s1">part</span><span class="s7">.</span><span class="s1">includes</span><span class="s7">(</span><span class="s8">'Run:'</span><span class="s7">))</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                                    </span></span><span class="s12">const</span><span class="s1"> dist </span><span class="s7">=</span><span class="s1"> parseFloat</span><span class="s7">(</span><span class="s1">part</span><span class="s7">.</span><span class="s1">replace</span><span class="s7">(</span><span class="s8">'Run: '</span><span class="s7">,</span><span class="s1"> </span><span class="s8">''</span><span class="s7">).</span><span class="s1">replace</span><span class="s7">(</span><span class="s8">'km'</span><span class="s7">,</span><span class="s1"> </span><span class="s8">''</span><span class="s7">));</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                                    </span></span><span class="s12">if</span><span class="s1"> </span><span class="s7">(!</span><span class="s1">isNaN</span><span class="s7">(</span><span class="s1">dist</span><span class="s7">))</span><span class="s1"> totalRun </span><span class="s7">+=</span><span class="s1"> dist</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                                </span></span><span class="s7">}</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                            </span></span><span class="s7">});</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                        </span></span><span class="s7">}</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                    </span></span><span class="s7">}</span><span class="s1"> </span><span class="s12">else</span><span class="s1"> </span><span class="s12">if</span><span class="s1"> </span><span class="s7">(</span><span class="s12">typeof</span><span class="s1"> loggedSession</span><span class="s7">.</span><span class="s1">loggedDistance </span><span class="s7">===</span><span class="s1"> </span><span class="s8">'number'</span><span class="s7">)</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p5"><span class="s4"><span class="Apple-converted-space">                        </span></span><span class="s1">// For single-sport completed sessions, add their logged distance</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                        </span></span><span class="s12">if</span><span class="s1"> </span><span class="s7">(</span><span class="s1">loggedSession</span><span class="s7">.</span><span class="s1">sport</span><span class="s7">.</span><span class="s1">toLowerCase</span><span class="s7">().</span><span class="s1">includes</span><span class="s7">(</span><span class="s8">'swim'</span><span class="s7">))</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                            </span>totalSwim </span><span class="s7">+=</span><span class="s1"> loggedSession</span><span class="s7">.</span><span class="s1">loggedDistance</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                        </span></span><span class="s7">}</span><span class="s1"> </span><span class="s12">else</span><span class="s1"> </span><span class="s12">if</span><span class="s1"> </span><span class="s7">(</span><span class="s1">loggedSession</span><span class="s7">.</span><span class="s1">sport</span><span class="s7">.</span><span class="s1">toLowerCase</span><span class="s7">().</span><span class="s1">includes</span><span class="s7">(</span><span class="s8">'bike'</span><span class="s7">))</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                            </span>totalBike </span><span class="s7">+=</span><span class="s1"> loggedSession</span><span class="s7">.</span><span class="s1">loggedDistance</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                        </span></span><span class="s7">}</span><span class="s1"> </span><span class="s12">else</span><span class="s1"> </span><span class="s12">if</span><span class="s1"> </span><span class="s7">(</span><span class="s1">loggedSession</span><span class="s7">.</span><span class="s1">sport</span><span class="s7">.</span><span class="s1">toLowerCase</span><span class="s7">().</span><span class="s1">includes</span><span class="s7">(</span><span class="s8">'run'</span><span class="s7">))</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                            </span>totalRun </span><span class="s7">+=</span><span class="s1"> loggedSession</span><span class="s7">.</span><span class="s1">loggedDistance</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                        </span></span><span class="s7">}</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                    </span></span><span class="s7">}</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s7">}</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s7">});</span></p>
<p class="p6"><span class="s9"></span><br></p>
<p class="p5"><span class="s4"><span class="Apple-converted-space">            </span></span><span class="s1">// Update the UI with calculated totals, formatted to one decimal place</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span>totalSwimEl</span><span class="s7">.</span><span class="s1">textContent </span><span class="s7">=</span><span class="s1"> </span><span class="s8">`</span><span class="s7">${</span><span class="s1">totalSwim</span><span class="s7">.</span><span class="s1">toFixed</span><span class="s7">(</span><span class="s14">1</span><span class="s7">)}</span><span class="s8"> km`</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span>totalBikeEl</span><span class="s7">.</span><span class="s1">textContent </span><span class="s7">=</span><span class="s1"> </span><span class="s8">`</span><span class="s7">${</span><span class="s1">totalBike</span><span class="s7">.</span><span class="s1">toFixed</span><span class="s7">(</span><span class="s14">1</span><span class="s7">)}</span><span class="s8"> km`</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span>totalRunEl</span><span class="s7">.</span><span class="s1">textContent </span><span class="s7">=</span><span class="s1"> </span><span class="s8">`</span><span class="s7">${</span><span class="s1">totalRun</span><span class="s7">.</span><span class="s1">toFixed</span><span class="s7">(</span><span class="s14">1</span><span class="s7">)}</span><span class="s8"> km`</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s7">}</span></p>
<p class="p6"><span class="s9"></span><br></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s10">/**</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">         </span>* Exports all user's training logs from Firestore to a CSV file.</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">         </span>*/</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s12">async</span><span class="s1"> </span><span class="s12">function</span><span class="s1"> exportLogsToCSV</span><span class="s7">()</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s12">if</span><span class="s1"> </span><span class="s7">(!</span><span class="s1">userId</span><span class="s7">)</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p7"><span class="s4"><span class="Apple-converted-space">                </span>showStatusMessage</span><span class="s7">(</span><span class="s1">"No user data available to export."</span><span class="s7">,</span><span class="s4"> </span><span class="s1">"error"</span><span class="s7">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s12">return</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s7">}</span></p>
<p class="p6"><span class="s9"></span><br></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s12">try</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s12">const</span><span class="s1"> logsCollectionRef </span><span class="s7">=</span><span class="s1"> collection</span><span class="s7">(</span><span class="s1">db</span><span class="s7">,</span><span class="s1"> </span><span class="s8">`artifacts/</span><span class="s7">${</span><span class="s1">appId</span><span class="s7">}</span><span class="s8">/users/</span><span class="s7">${</span><span class="s1">userId</span><span class="s7">}</span><span class="s8">/training_logs`</span><span class="s7">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s12">const</span><span class="s1"> querySnapshot </span><span class="s7">=</span><span class="s1"> </span><span class="s12">await</span><span class="s1"> getDocs</span><span class="s7">(</span><span class="s1">logsCollectionRef</span><span class="s7">);</span><span class="s1"> </span><span class="s10">// Fetch all documents</span></p>
<p class="p6"><span class="s9"></span><br></p>
<p class="p7"><span class="s4"><span class="Apple-converted-space">                </span></span><span class="s12">let</span><span class="s4"> csvContent </span><span class="s7">=</span><span class="s4"> </span><span class="s1">"data:text/csv;charset=utf-8,"</span><span class="s7">;</span></p>
<p class="p5"><span class="s4"><span class="Apple-converted-space">                </span></span><span class="s1">// Define CSV headers</span></p>
<p class="p7"><span class="s4"><span class="Apple-converted-space">                </span></span><span class="s12">const</span><span class="s4"> headers </span><span class="s7">=</span><span class="s4"> </span><span class="s7">[</span><span class="s1">"Date"</span><span class="s7">,</span><span class="s4"> </span><span class="s1">"Week"</span><span class="s7">,</span><span class="s4"> </span><span class="s1">"DayOfWeek"</span><span class="s7">,</span><span class="s4"> </span><span class="s1">"Sport"</span><span class="s7">,</span><span class="s4"> </span><span class="s1">"WorkoutType"</span><span class="s7">,</span><span class="s4"> </span><span class="s1">"Status"</span><span class="s7">,</span><span class="s4"> </span><span class="s1">"LoggedTime"</span><span class="s7">,</span><span class="s4"> </span><span class="s1">"LoggedDistance (km)"</span><span class="s7">,</span><span class="s4"> </span><span class="s1">"Intensity"</span><span class="s7">,</span><span class="s4"> </span><span class="s1">"RPE"</span><span class="s7">,</span><span class="s4"> </span><span class="s1">"Notes"</span><span class="s7">,</span><span class="s4"> </span><span class="s1">"PlannedTime"</span><span class="s7">,</span><span class="s4"> </span><span class="s1">"PlannedDistance"</span><span class="s7">,</span><span class="s4"> </span><span class="s1">"PlannedIntensity"</span><span class="s7">,</span><span class="s4"> </span><span class="s1">"PlannedRPE"</span><span class="s7">];</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span>csvContent </span><span class="s7">+=</span><span class="s1"> headers</span><span class="s7">.</span><span class="s1">join</span><span class="s7">(</span><span class="s8">","</span><span class="s7">)</span><span class="s1"> </span><span class="s7">+</span><span class="s1"> </span><span class="s8">"\n"</span><span class="s7">;</span></p>
<p class="p6"><span class="s9"></span><br></p>
<p class="p5"><span class="s4"><span class="Apple-converted-space">                </span></span><span class="s1">// Iterate through each log document and build a CSV row</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span>querySnapshot</span><span class="s7">.</span><span class="s1">forEach</span><span class="s7">(</span><span class="s1">doc </span><span class="s7">=&gt;</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                    </span></span><span class="s12">const</span><span class="s1"> data </span><span class="s7">=</span><span class="s1"> doc</span><span class="s7">.</span><span class="s1">data</span><span class="s7">();</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                    </span></span><span class="s12">const</span><span class="s1"> row </span><span class="s7">=</span><span class="s1"> </span><span class="s7">[</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                        </span>data</span><span class="s7">.</span><span class="s1">date</span><span class="s7">,</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                        </span>data</span><span class="s7">.</span><span class="s1">week</span><span class="s7">,</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                        </span>data</span><span class="s7">.</span><span class="s1">dayOfWeek</span><span class="s7">,</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                        </span>data</span><span class="s7">.</span><span class="s1">sport</span><span class="s7">,</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                        </span>data</span><span class="s7">.</span><span class="s1">type</span><span class="s7">,</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                        </span>data</span><span class="s7">.</span><span class="s1">status</span><span class="s7">,</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                        </span>data</span><span class="s7">.</span><span class="s1">loggedTime</span><span class="s7">,</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                        </span>data</span><span class="s7">.</span><span class="s1">loggedDistance </span><span class="s7">!==</span><span class="s1"> </span><span class="s12">null</span><span class="s1"> </span><span class="s7">?</span><span class="s1"> data</span><span class="s7">.</span><span class="s1">loggedDistance </span><span class="s7">:</span><span class="s1"> </span><span class="s8">""</span><span class="s7">,</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                        </span>data</span><span class="s7">.</span><span class="s1">intensity</span><span class="s7">,</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                        </span>data</span><span class="s7">.</span><span class="s1">rpe </span><span class="s7">!==</span><span class="s1"> </span><span class="s12">null</span><span class="s1"> </span><span class="s7">?</span><span class="s1"> data</span><span class="s7">.</span><span class="s1">rpe </span><span class="s7">:</span><span class="s1"> </span><span class="s8">""</span><span class="s7">,</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                        </span>data</span><span class="s7">.</span><span class="s1">notes </span><span class="s7">||</span><span class="s1"> </span><span class="s8">""</span><span class="s7">,</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                        </span>data</span><span class="s7">.</span><span class="s1">originalPlan</span><span class="s7">?.</span><span class="s1">time </span><span class="s7">||</span><span class="s1"> </span><span class="s8">""</span><span class="s7">,</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                        </span>data</span><span class="s7">.</span><span class="s1">originalPlan</span><span class="s7">?.</span><span class="s1">distance </span><span class="s7">||</span><span class="s1"> </span><span class="s8">""</span><span class="s7">,</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                        </span>data</span><span class="s7">.</span><span class="s1">originalPlan</span><span class="s7">?.</span><span class="s1">intensity </span><span class="s7">||</span><span class="s1"> </span><span class="s8">""</span><span class="s7">,</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                        </span>data</span><span class="s7">.</span><span class="s1">originalPlan</span><span class="s7">?.</span><span class="s1">rpe </span><span class="s7">!==</span><span class="s1"> </span><span class="s12">null</span><span class="s1"> </span><span class="s7">&amp;&amp;</span><span class="s1"> data</span><span class="s7">.</span><span class="s1">originalPlan</span><span class="s7">?.</span><span class="s1">rpe </span><span class="s7">!==</span><span class="s1"> </span><span class="s12">undefined</span><span class="s1"> </span><span class="s7">?</span><span class="s1"> data</span><span class="s7">.</span><span class="s1">originalPlan</span><span class="s7">.</span><span class="s1">rpe </span><span class="s7">:</span><span class="s1"> </span><span class="s8">""</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                    </span></span><span class="s7">];</span></p>
<p class="p5"><span class="s4"><span class="Apple-converted-space">                    </span></span><span class="s1">// Map items to ensure proper CSV formatting (e.g., handling commas within fields by quoting)</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                    </span>csvContent </span><span class="s7">+=</span><span class="s1"> row</span><span class="s7">.</span><span class="s1">map</span><span class="s7">(</span><span class="s1">item </span><span class="s7">=&gt;</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                        </span></span><span class="s12">let</span><span class="s1"> value </span><span class="s7">=</span><span class="s1"> </span><span class="s13">String</span><span class="s7">(</span><span class="s1">item</span><span class="s7">);</span></p>
<p class="p5"><span class="s4"><span class="Apple-converted-space">                        </span></span><span class="s1">// Escape double quotes and enclose in double quotes if it contains commas or double quotes</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                        </span></span><span class="s12">if</span><span class="s1"> </span><span class="s7">(</span><span class="s1">value</span><span class="s7">.</span><span class="s1">includes</span><span class="s7">(</span><span class="s8">','</span><span class="s7">)</span><span class="s1"> </span><span class="s7">||</span><span class="s1"> value</span><span class="s7">.</span><span class="s1">includes</span><span class="s7">(</span><span class="s8">'"'</span><span class="s7">)</span><span class="s1"> </span><span class="s7">||</span><span class="s1"> value</span><span class="s7">.</span><span class="s1">includes</span><span class="s7">(</span><span class="s8">'\n'</span><span class="s7">))</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                            </span></span><span class="s12">return</span><span class="s1"> </span><span class="s8">`"</span><span class="s7">${</span><span class="s1">value</span><span class="s7">.</span><span class="s1">replace</span><span class="s7">(</span><span class="s15">/"/</span><span class="s12">g</span><span class="s7">,</span><span class="s1"> </span><span class="s8">'""'</span><span class="s7">)}</span><span class="s8">"`</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                        </span></span><span class="s7">}</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                        </span></span><span class="s12">return</span><span class="s1"> value</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                    </span></span><span class="s7">}).</span><span class="s1">join</span><span class="s7">(</span><span class="s8">","</span><span class="s7">)</span><span class="s1"> </span><span class="s7">+</span><span class="s1"> </span><span class="s8">"\n"</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s7">});</span></p>
<p class="p6"><span class="s9"></span><br></p>
<p class="p5"><span class="s4"><span class="Apple-converted-space">                </span></span><span class="s1">// Create a downloadable link for the CSV file</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s12">const</span><span class="s1"> encodedUri </span><span class="s7">=</span><span class="s1"> encodeURI</span><span class="s7">(</span><span class="s1">csvContent</span><span class="s7">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s12">const</span><span class="s1"> link </span><span class="s7">=</span><span class="s1"> document</span><span class="s7">.</span><span class="s1">createElement</span><span class="s7">(</span><span class="s8">"a"</span><span class="s7">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span>link</span><span class="s7">.</span><span class="s1">setAttribute</span><span class="s7">(</span><span class="s8">"href"</span><span class="s7">,</span><span class="s1"> encodedUri</span><span class="s7">);</span></p>
<p class="p7"><span class="s4"><span class="Apple-converted-space">                </span>link</span><span class="s7">.</span><span class="s4">setAttribute</span><span class="s7">(</span><span class="s1">"download"</span><span class="s7">,</span><span class="s4"> </span><span class="s1">`triathlon_training_logs_</span><span class="s7">${</span><span class="s4">userId</span><span class="s7">}</span><span class="s1">.csv`</span><span class="s7">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span>document</span><span class="s7">.</span><span class="s1">body</span><span class="s7">.</span><span class="s1">appendChild</span><span class="s7">(</span><span class="s1">link</span><span class="s7">);</span><span class="s1"> </span><span class="s10">// Required for Firefox to work</span></p>
<p class="p5"><span class="s4"><span class="Apple-converted-space">                </span>link</span><span class="s7">.</span><span class="s4">click</span><span class="s7">();</span><span class="s4"> </span><span class="s1">// Programmatically click the link to trigger download</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span>document</span><span class="s7">.</span><span class="s1">body</span><span class="s7">.</span><span class="s1">removeChild</span><span class="s7">(</span><span class="s1">link</span><span class="s7">);</span><span class="s1"> </span><span class="s10">// Clean up the link element</span></p>
<p class="p7"><span class="s4"><span class="Apple-converted-space">                </span>showStatusMessage</span><span class="s7">(</span><span class="s1">"Logs exported to CSV successfully!"</span><span class="s7">,</span><span class="s4"> </span><span class="s1">"success"</span><span class="s7">);</span></p>
<p class="p6"><span class="s9"></span><br></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s7">}</span><span class="s1"> </span><span class="s12">catch</span><span class="s1"> </span><span class="s7">(</span><span class="s1">error</span><span class="s7">)</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span>console</span><span class="s7">.</span><span class="s1">error</span><span class="s7">(</span><span class="s8">"Error exporting CSV:"</span><span class="s7">,</span><span class="s1"> error</span><span class="s7">);</span></p>
<p class="p7"><span class="s4"><span class="Apple-converted-space">                </span>showStatusMessage</span><span class="s7">(</span><span class="s1">"Failed to export logs. Please try again."</span><span class="s7">,</span><span class="s4"> </span><span class="s1">"error"</span><span class="s7">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s7">}</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s7">}</span></p>
<p class="p6"><span class="s9"></span><br></p>
<p class="p5"><span class="s4"><span class="Apple-converted-space">        </span></span><span class="s1">// --- Event Listeners ---</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span>prevWeekBtn</span><span class="s7">.</span><span class="s1">addEventListener</span><span class="s7">(</span><span class="s8">'click'</span><span class="s7">,</span><span class="s1"> </span><span class="s7">()</span><span class="s1"> </span><span class="s7">=&gt;</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s12">if</span><span class="s1"> </span><span class="s7">(</span><span class="s1">currentWeek </span><span class="s7">&gt;</span><span class="s1"> </span><span class="s14">1</span><span class="s7">)</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span>currentWeek</span><span class="s7">--;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span>weekDisplayEl</span><span class="s7">.</span><span class="s1">textContent </span><span class="s7">=</span><span class="s1"> </span><span class="s8">`Week </span><span class="s7">${</span><span class="s1">currentWeek</span><span class="s7">}</span><span class="s8">`</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span>renderTrainingSchedule</span><span class="s7">(</span><span class="s1">currentWeek</span><span class="s7">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span>calculateAndDisplayWeeklyTotals</span><span class="s7">();</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s7">}</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s7">});</span></p>
<p class="p6"><span class="s9"></span><br></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span>nextWeekBtn</span><span class="s7">.</span><span class="s1">addEventListener</span><span class="s7">(</span><span class="s8">'click'</span><span class="s7">,</span><span class="s1"> </span><span class="s7">()</span><span class="s1"> </span><span class="s7">=&gt;</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s12">if</span><span class="s1"> </span><span class="s7">(</span><span class="s1">currentWeek </span><span class="s7">&lt;</span><span class="s1"> </span><span class="s14">14</span><span class="s7">)</span><span class="s1"> </span><span class="s7">{</span><span class="s1"> </span><span class="s10">// Max 14 training weeks</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span>currentWeek</span><span class="s7">++;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span>weekDisplayEl</span><span class="s7">.</span><span class="s1">textContent </span><span class="s7">=</span><span class="s1"> </span><span class="s8">`Week </span><span class="s7">${</span><span class="s1">currentWeek</span><span class="s7">}</span><span class="s8">`</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span>renderTrainingSchedule</span><span class="s7">(</span><span class="s1">currentWeek</span><span class="s7">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span>calculateAndDisplayWeeklyTotals</span><span class="s7">();</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s7">}</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s7">});</span></p>
<p class="p6"><span class="s9"></span><br></p>
<p class="p5"><span class="s4"><span class="Apple-converted-space">        </span></span><span class="s1">// Event listeners for the session detail modal buttons</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span>saveSessionBtn</span><span class="s7">.</span><span class="s1">addEventListener</span><span class="s7">(</span><span class="s8">'click'</span><span class="s7">,</span><span class="s1"> saveSessionLog</span><span class="s7">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span>cancelSessionBtn</span><span class="s7">.</span><span class="s1">addEventListener</span><span class="s7">(</span><span class="s8">'click'</span><span class="s7">,</span><span class="s1"> closeSessionDetailModal</span><span class="s7">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span>exportCsvBtn</span><span class="s7">.</span><span class="s1">addEventListener</span><span class="s7">(</span><span class="s8">'click'</span><span class="s7">,</span><span class="s1"> exportLogsToCSV</span><span class="s7">);</span></p>
<p class="p6"><span class="s9"></span><br></p>
<p class="p5"><span class="s4"><span class="Apple-converted-space">        </span></span><span class="s1">// --- Initial Application Load ---</span></p>
<p class="p5"><span class="s4"><span class="Apple-converted-space">        </span></span><span class="s1">// Initialize Firebase when the entire window content has loaded</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span>window</span><span class="s7">.</span><span class="s1">onload </span><span class="s7">=</span><span class="s1"> initializeFirebase</span><span class="s7">;</span></p>
<p class="p1"><span class="s4"><span class="Apple-converted-space">    </span></span><span class="s3">&lt;/</span><span class="s1">script</span><span class="s3">&gt;</span></p>
<p class="p1"><span class="s3">&lt;/</span><span class="s1">body</span><span class="s3">&gt;</span></p>
<p class="p1"><span class="s3">&lt;/</span><span class="s1">html</span><span class="s3">&gt;</span></p>
<p class="p6"><span class="s9"></span><br></p>
</body>
</html>
